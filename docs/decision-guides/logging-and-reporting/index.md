---
title: Руководство по принятию решений о ведении журналов и создании отчетов
titleSuffix: Microsoft Cloud Adoption Framework for Azure
description: Сведения о ведении журналов, создании отчетов и мониторинге, которые играют важнейшую роль при миграции в Azure.
author: rotycenh
ms.author: v-tyhopk
ms.date: 02/11/2019
ms.topic: guide
ms.service: cloud-adoption-framework
ms.subservice: decision-guide
ms.custom: governance
ms.openlocfilehash: 5a2ce2529073c40abf73432d562d241890a8d805
ms.sourcegitcommit: 443c28f3afeedfbfe8b9980875a54afdbebd83a8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "71026423"
---
# <a name="logging-and-reporting-decision-guide"></a>Руководство по принятию решений о ведении журналов и создании отчетов

Все организации нуждаются в механизмах уведомления ИТ-специалистов о проблемах производительности, работоспособности и безопасности, прежде чем они станут серьезными. Успешная стратегия мониторинга позволяет понять, как работают отдельные компоненты, составляющие рабочие нагрузки и сетевую инфраструктуру. В контексте миграции в общедоступное облако интеграция ведения журналов и создания отчетов с любой из существующих систем мониторинга, а также видимость важных событий и метрик для соответствующего ИТ-персонала крайне важны для обеспечения бесперебойной работы, безопасности и соответствия политикам в вашей организации.

![График возможностей ведения журналов, создания отчетов и мониторинга в порядке увеличения сложности, соответствующих приведенным ниже ссылкам для быстрого перехода](../../_images/decision-guides/decision-guide-logging-and-reporting.png)

Перейти к разделу: [Планирование инфраструктуры мониторинга](#planning-your-monitoring-infrastructure) | [Полностью облачные решения](#cloud-native) | [Интеграция с локальными системами](#on-premises-extension) | [Агрегация шлюза](#gateway-aggregation) | [Гибридный мониторинг (локальный)](#hybrid-monitoring-on-premises) | [Гибридный мониторинг (на основе облака)](#hybrid-monitoring-cloud-based) | [Многооблачные решения](#multicloud) | [Дополнительные сведения](#learn-more)

Определение стратегии ведения журналов и отчетности для облака главным образом зависит от существующих инвестиций вашей организации в операционные процессы и в меньшей степени от определенных требований к поддержке многооблачной стратегии.

Существует несколько способов ведения журналов и создания отчетов о действиях в облаке. Полностью облачное и централизованное ведение журналов — это два распространенных варианта для программного обеспечения как услуги (SaaS), выбор между которыми определяется структурой и числом подписок.

## <a name="planning-your-monitoring-infrastructure"></a>Планирование инфраструктуры мониторинга

При планировании развертывания необходимо учитывать, где хранятся данные журналов и как интегрировать облачные службы отчетов и мониторинга с существующими процессами и инструментами.

| Вопрос | Облачная среда | Интеграция с локальными системами | Гибридный мониторинг | Агрегация шлюза |
|-----|-----|-----|-----|-----|
| Имеется ли у вас существующая локальная инфраструктура мониторинга? | Нет | Yes | Да |  Нет |
| Есть ли у вас требования, препятствующие хранению данных журналов во внешних хранилищах? | Нет | Yes | Нет | Нет |
| Вам необходимо интегрировать облачный мониторинг с локальными системами? | Нет | Нет | Yes | Нет |
Необходимо ли обрабатывать или фильтровать данные телеметрии перед их отправкой в системы мониторинга? | Нет | Нет | Нет | Yes |

### <a name="cloud-native"></a>Облачная среда

Если в вашей организации отсутствуют установленные системы ведения журналов и отчетности или если запланированное развертывание не нужно интегрировать с существующими локальными или другими внешними системами мониторинга, самым простым выбором будет облачное решение SaaS, например [Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/overview).

В этом случае данные журналов записываются и хранятся в облаке, а средства ведения журналов и создания отчетов, которые обрабатывают и предоставляют информацию ИТ-персоналу, предоставляются платформой Azure и Azure Monitor.

Пользовательские решения для ведения журналов на базе Azure Monitor можно внедрять по мере необходимости для каждой подписки или рабочей нагрузки в небольших или экспериментальных развертываниях, а также централизованно упорядочивать, чтобы отслеживать данные журналов в пределах облачной инфраструктуры.

**Некоторые моменты, связанные с облачными решениями**. Использование полностью облачной системы ведения журналов и отчетности предполагает следующее:

- Вам не нужно интегрировать данные журналов из ваших облачных рабочих нагрузок в существующие локальные системы.
- Вы не будете использовать свои облачные системы отчетности для мониторинга локальных систем.

### <a name="on-premises-extension"></a>Интеграция с локальными системами

Могут потребоваться значительные усилия по изменению приложений и служб, переносимых в облако, чтобы поддерживать облачные решения для ведения журналов и отчетности, таких как Azure Monitor. В таких случаях есть смысл сохранить прежние рабочие нагрузки, чтобы они по-прежнему отправляли данные телеметрии в существующие локальные системы.

Для поддержки такого сценария облачные ресурсы должны иметь возможность напрямую взаимодействовать с локальными системами, используя [гибридную сеть](../software-defined-network/hybrid.md) и [облачные доменные службы](../identity/index.md#cloud-hosted-domain-services). При этом облачная виртуальная сеть функционирует как сетевое расширение локальной среды. Таким образом, облачные рабочие нагрузки могут напрямую взаимодействовать с локальной системой ведения журналов и создания отчетов.

Этот подход основан на существующих инвестициях в средства мониторинга с ограниченными изменениями каких-либо облачных приложений или служб. Часто это самый быстрый вариант для организации мониторинга на период миграции методом lift-and-shift. Однако он не предусматривает сбор данных журналов, создаваемых облачными ресурсами PaaS и SaaS, а любые связанные с виртуальной машиной данные журналов, созданные самой облачной платформой, такие как состояние виртуальной машины, исключаются. В результате этот шаблон должен быть временным решением до тех пор, пока не будет реализовано более комплексное гибридное решение для мониторинга.

Некоторые моменты, связанные с моделью "Только локально".

- Данные журналов необходимо хранить только в локальной среде (либо в соответствии с техническими требованиями, либо в соответствии с нормативными требованиями или требованиями политики).
- Локальные системы не поддерживают гибридные решения для ведения журналов, создания отчетов или агрегации шлюза.
- Облачные приложения могут отправлять данные телеметрии непосредственно в локальные системы ведения журналов либо можно развернуть на виртуальных машинах с рабочими нагрузками агенты мониторинга, отправляющие данные в локальную среду.
- Рабочие нагрузки не зависят от служб PaaS или SaaS, требующих ведения журналов и создания отчетов в облаке.

### <a name="gateway-aggregation"></a>Агрегация шлюза

Для сценариев, в которых объем облачных данных телеметрии очень велик или существующим локальным системам мониторинга требуется изменение данных журналов перед обработкой, может понадобиться служба [агрегации шлюза данных журналов](https://docs.microsoft.com/azure/architecture/patterns/gateway-aggregation.md).

Служба шлюза развертывается в системе поставщика облачных служб. Затем соответствующие приложения и службы настраиваются, чтобы отправлять данные телеметрии в шлюз вместо системы ведения журналов по умолчанию. После этого шлюз может обрабатывать данные (агрегировать, объединять или иным образом форматировать их), а затем отправлять в службу мониторинга для приема и анализа.

Кроме того, шлюз может использоваться для агрегирования и предварительной обработки данных телеметрии, привязанных к облачным или гибридным системам.

Предположения относительно агрегации шлюза:

- Ожидаются очень большие объемы данных телеметрии из облачных приложений или служб.
- Перед отправкой данных телеметрии в системы мониторинга необходимо отформатировать или иным образом оптимизировать их.
- Ваши системы мониторинга используют API или другие механизмы для приема данных журналов после их обработки шлюзом.

### <a name="hybrid-monitoring-on-premises"></a>Гибридный мониторинг (локальный)

Гибридное решение для мониторинга объединяет данные журналов из локальных и облачных ресурсов, обеспечивая интегрированное представление рабочего состояния ИТ-среды.

При наличии инвестиций в локальные системы мониторинга, которые трудно или дорого заменить, может потребоваться интегрировать данные телеметрии из облачных рабочих нагрузок в существующие локальные решения для мониторинга. В гибридной локальной системе мониторинга локальные данные телеметрии продолжают использовать существующую локальную систему мониторинга. Облачные данные телеметрии отправляются непосредственно в локальную систему мониторинга или сохраняются в Azure Monitor, где они регулярно компилируются и передаются в локальную систему.

**Некоторые моменты, связанные с локальным гибридным мониторингом**. Использование локальной системы ведения журналов и отчетов для гибридного мониторинга предполагает следующее:

- Для мониторинга облачных рабочих нагрузок необходимо использовать существующие локальные системы отчетов.
- Необходимо сохранить право владения на локальные данные журналов.
- Локальные системы управления используют API или другие механизмы для приема данных журналов из облачных систем.

> [!TIP]
> В рамках итеративного подхода к миграции в облако по мере развития и интеграции облачных ресурсов и служб в составе ИТ-активов вероятен переход от строго облачного или локального мониторинга к варианту гибридного подхода.

### <a name="hybrid-monitoring-cloud-based"></a>Гибридный мониторинг (облачный)

Если у вас нет острой необходимости поддерживать локальную систему мониторинга или вы хотите заменить локальные системы мониторинга централизованным облачным решением, вы можете интегрировать в Azure Monitor локальные данные журналов, чтобы создать полностью централизованную облачную систему мониторинга.

Как и в централизованной локальной системе мониторинга, в этом сценарии облачные рабочие нагрузки будут передавать телеметрию напрямую в Azure Monitor, а локальные приложения и службы будут отправлять телеметрию в Azure Monitor или агрегировать эти данные для загрузки в Azure Monitor по расписанию. Azure Monitor здесь выполняет роль основной системы мониторинга и отчетности для всей ИТ-инфраструктуры.

Предположения относительно облачного гибридного мониторинга: Использование облачной системы ведения журналов и отчетов для гибридного мониторинга предполагает следующее:

- Вы не зависите от существующих локальных систем мониторинга.
- Рабочие нагрузки не имеют нормативных требований или требований политики для локального хранения данных журналов.
- Облачные системы мониторинга используют API или другие механизмы для приема данных журналов из локальных приложений и служб.

### <a name="multicloud"></a>Многооблачная среда

Интеграция возможностей ведения журналов и создания отчетов на платформе с несколькими облаками может быть достаточно сложной. Службы, предлагаемые различными платформами, часто не сопоставимы напрямую, и возможности ведения журналов и телеметрии, предоставляемые этими службами, также различаются.
Чтобы поддерживать ведение журналов в нескольких облаках, часто требуется использовать службы шлюза для преобразования данных журналов в общий формат перед их отправкой в гибридное решение ведения журналов.

## <a name="learn-more"></a>Подробнее

[Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/overview) — это стандартная служба создания отчетов и мониторинга в Azure. Служба предоставляет:

- Унифицированную платформу для сбора телеметрии приложений, телеметрии узлов (например, виртуальных машин), метрик контейнеров, метрик платформы Azure и журналов событий.
- Визуализацию, запросы, оповещения и аналитические инструменты. Это позволяет получать аналитические сведения о виртуальных машинах, гостевых операционных системах, виртуальных сетях и событиях приложений рабочей нагрузки.
- [REST API](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-rest-api-walkthrough) для интеграции со внешними службами и автоматизации служб мониторинга и оповещения.
- [Интеграцию](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-partners) со многими популярными сторонними поставщиками.

## <a name="next-steps"></a>Дополнительная информация

Ведение журналов и отчетность — одна из базовых функций инфраструктуры, решение о которой необходимо принять на этапе внедрения облачных решений. См. [общие сведения о принятии решений](../index.md), чтобы узнать об альтернативных шаблонах или моделях, используемых при принятии решений для других типов инфраструктуры.

> [!div class="nextstepaction"]
> [Руководства по принятию решений об архитектуре](../index.md)
