---
title: Перестроение локального приложения в Azure
description: Узнайте, как Contoso перестраивает приложение в Azure с помощью службы приложений Azure, службы Azure Kubernetes Service (AKS), Azure Cosmos DB, функций Azure и Cognitive Services Azure.
author: BrianBlanchard
ms.author: brblanch
ms.date: 7/1/2020
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: migrate
services: site-recovery
ms.openlocfilehash: 373d4216eb9259bd49a85c4d1dd6466c4f33388d
ms.sourcegitcommit: 65e8d2fc3ef31f2bb11a50f7c7a2d1eb116a6632
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/28/2020
ms.locfileid: "87255103"
---
<!-- docsTest:ignore "Enable .NET" SmartHotel360 SmartHotel360-Backend Pet.Checker contoso-datacenter git aks PetCheckerFunction -->

<!-- cSpell:ignore givenscj SQLVM WEBVM contosohost vcenter contosodc smarthotel contososmarthotel smarthotelcontoso smarthotelpetchecker petchecker smarthotelakseus smarthotelacreus smarthotelpets kubectl contosodevops visualstudio azuredeploy cloudapp smarthotelsettingsurl appsettings -->

# <a name="rebuild-an-on-premises-application-in-azure"></a>Перестроение локального приложения в Azure

В этой статье показано, как вымышленная компания Contoso перестраивает двухстороннее приложение Windows .NET, которое работает на виртуальных машинах VMware (ВМ) в рамках миграции в Azure. Компания Contoso переносит клиентскую виртуальную машину в веб-приложение службы приложений Azure. Компания Contoso создает серверную части приложения с помощью микрослужб, развернутых в контейнерах, управляемых службой Azure Kubernetes Service (AKS). Веб-сайт взаимодействует со службой "Функции Azure", предоставляя функцию фотографирования животных.

Приложение SmartHotel360, используемое в этом примере, предоставляется в виде открытого кода. Если вы хотите использовать его для тестирования, вы можете скачать его с сайта [GitHub](https://github.com/Microsoft/SmartHotel360).

## <a name="business-drivers"></a>Бизнес-факторы

Совместными усилиями ИТ-руководство Contoso и деловые партнеры определили указанные ниже цели этой миграции.

- **Устраните бизнес-рост.** Компания Contoso растет и хочет получить дифференцированные возможности для клиентов на веб-сайтах contoso.
- **Гибкость.** Компания Contoso должна иметь возможность реагировать быстрее, чем изменения в Marketplace, чтобы обеспечить их успешную работу в глобальной экономике.
- **Измените.** По мере успешного развития бизнеса ИТ-отдел компании Contoso должен предоставить системы, которые могут расти в одном темпе.
- **Сократите затраты.** Компании Contoso требуется минимизировать затраты на лицензирование.

## <a name="migration-goals"></a>Цели миграции

Группа разработчиков Contoso Cloud заблокировала требования к приложениям для этой миграции. Эти требования использовались для определения оптимального метода миграции:

- Приложение в Azure должно оставаться критически важным, так как оно сегодня локально. Оно должно хорошо работать и легко масштабироваться.
- Приложение не должно использовать компоненты "инфраструктура как услуга" (IaaS). Все должно быть создано для использования платформы как службы (PaaS) или бессерверных служб.
- Сборки приложений должны выполняться в облачных службах, а контейнеры должны находиться в частном корпоративном реестре в облаке.
- Служба API, используемая для фотографий домашних животных, должна быть точной и надежной в реальном мире, так как решения, принятые приложением, должны учитываться в своих гостиницах. Любой одобренный питомец может остаться в гостинице.
- Чтобы удовлетворить требования для конвейера DevOps, Contoso будет использовать репозиторий Git в Azure Repos для управления исходным кодом. Автоматические выполняемые сборки и выпуски будут использоваться для компиляции кода и его развертывания в Службе приложений Azure, Функциях Azure и AKS.
- Отдельные конвейеры непрерывной интеграции и непрерывной разработки (CI/CD) необходимы для микрослужб в серверной части и для веб-сайта на стороне внешнего интерфейса.
- Серверные службы и интерфейсное веб-приложение имеют разные циклы выпуска. Для удовлетворения этого требования компания Contoso развернет два разных конвейера.
- Contoso необходимо утвердить все развертывание интерфейсного веб-сайта, и конвейер CI/CD должен обеспечить это.

## <a name="solution-design"></a>Архитектура решения

Определив свои цели и требования, специалисты Contoso начинают разработку и анализ решения развертывания и идентифицируют процесс миграции, включая службы Azure, которые будут использоваться при этой миграции.

### <a name="current-application"></a>Текущее приложение

- Локальное приложение SmartHotel360 распределено между двумя виртуальными машинами ( `WEBVM` и `SQLVM` ).
- Виртуальные машины расположены на узле VMware ESXi `contosohost1.contoso.com` (версии 6.5).
- Среда VMware находится под управлением сервера vCenter Server 6.5 (`vcenter.contoso.com`), запущенного на виртуальной машине.
- Компания Contoso использует локальный центр обработки данных (`contoso-datacenter`) с локальным контроллером домена (`contosodc1`).
- После завершения миграции локальные виртуальные машины в центре обработки данных Contoso будут выведены из эксплуатации.

### <a name="proposed-architecture"></a>Предлагаемая архитектура

- Внешний интерфейс приложения развертывается как веб-приложение службы приложений Azure в основном регионе Azure.
- Служба "Функции Azure" обеспечит передачу фотографий домашних животных, и веб-сайт будет взаимодействовать с этой функцией.
- Функция фото в Pet использует API компьютерного зрения Cognitive Services Azure вместе с Azure Cosmos DB.
- Серверная часть сайта строится с помощью микрослужб. Эти микрослужбы будут развернуты в контейнерах, управляемых в AKS.
- Контейнеры будут созданы с помощью Azure DevOps и отправлены в реестр контейнеров Azure.
- Сейчас компания Contoso вручную развернет веб-приложение и код функции с помощью Visual Studio.
- Компания Contoso будет развертывать микрослужбы с помощью сценария PowerShell, который вызывает программы командной строки Kubernetes.

    ![Схема архитектуры сценария для миграции в Azure.](./media/contoso-migration-rebuild/architecture.png)  
    _Рис. 1. Архитектура сценария._

### <a name="solution-review"></a>Проверка решения

Специалисты Contoso оценивают предлагаемый дизайн, составляя список плюсов и минусов.

| Рассматриваемый вопрос | Сведения |
| --- | --- |
| **Преимущества** | Использование PaaS и бессерверных решений для комплексного развертывания значительно сокращает время управления, которое должен предоставить компания Contoso. <br><br> Переход на архитектуру на основе микрослужб позволяет компании Contoso легко расширять решение с течением времени. <br><br> Новые функции можно перевести в режим «в сети», не нарушая работу существующих кодовых баз. <br><br> Веб-приложение будет настроено с несколькими экземплярами без единой точки отказа. <br><br> Автоматическое масштабирование будет включено, чтобы приложение могла обрабатывать разные объемы трафика. <br><br> При переходе к службам PaaS компания Contoso может снять с учета актуальные решения, которые выполняются в операционной системе Windows Server 2008 R2. <br><br> Azure Cosmos DB имеет встроенную отказоустойчивость, которая не требует настройки компанией Contoso. Это означает, что уровень данных больше не является единой точкой отказа. |
| **Недостатки** | По сравнению с другими вариантами миграции контейнеры более сложные. Для Contoso длительное изучение может стать проблемой. Они представляют новый уровень сложности, который обеспечивает значение, несмотря на кривую. <br><br> Группа эксплуатации в компании Contoso должна освоиться для понимания и поддержки Azure, контейнеров и микрослужб для приложения. <br><br> Компания Contoso не полностью реализовала DevOps для всего решения. Специалистам компании нужно подумать об этом при развертывании служб в AKS, Функциях Azure и Службе приложений Azure. |

### <a name="migration-process"></a>Процесс миграции

1. Компания Contoso подготавливает реестр контейнеров Azure, AKS и Azure Cosmos DB.
2. Компания Contoso подготавливает инфраструктуру для развертывания, включая веб-приложение службы приложений Azure, учетную запись хранения, функцию и API.
3. После создания инфраструктуры компания Contoso создает свои образы контейнеров микрослужб с помощью Azure DevOps, которая передает образы в реестр контейнеров.
4. Компания Contoso развертывает эти микрослужбы в AKS с помощью сценария PowerShell.
5. Наконец, компания Contoso развертывает функцию и веб-приложение.

    ![Схема процесса миграции с подготовки к развертыванию в облаке.](./media/contoso-migration-rebuild/migration-process.png)  
    _Рис. 2. процесс миграции._

### <a name="azure-services"></a>Службы Azure

| Служба | Описание | Стоимость |
|---|---|---|
| [AKS](https://docs.microsoft.com/sql/dma/dma-overview?view=ssdt-18vs2017) | Упрощает развертывание, администрирование и использование Kubernetes. Предоставляет полностью управляемую службу оркестрации контейнеров Kubernetes. | AKS — это бесплатная служба. Платите только за виртуальные машины, связанные хранилища и сетевые ресурсы, которые потребляются. [Подробнее.](https://azure.microsoft.com/pricing/details/kubernetes-service) |
| [Функции Azure](https://azure.microsoft.com/services/functions) | Ускорьте процесс разработки с помощью управляемых событиями и независимыми от сервера вычислительных средств. Выполняйте масштабирование по необходимости. | Платите только за использованные ресурсы. Плата по плану начисляется в зависимости от потребления ресурсов и числа выполнений в секунду. [Подробнее.](https://azure.microsoft.com/pricing/details/functions) |
| [Реестр контейнеров Azure](https://azure.microsoft.com/services/container-registry) | Хранит образы для всех типов развертываний контейнеров. | Стоимость зависит от функций, хранилища и продолжительности использования. [Подробнее.](https://azure.microsoft.com/pricing/details/container-registry) |
| [Служба приложений Azure](https://azure.microsoft.com/services/app-service/containers) | Быстро создавайте, развертывайте и масштабируюте приложения корпоративного уровня, мобильные и API, которые работают на любой платформе. | Счета за планы службы приложений выставляются за секунду. [Подробнее.](https://azure.microsoft.com/pricing/details/app-service/windows) |

## <a name="prerequisites"></a>Предварительные требования

Ниже приведены действия компании Contoso, необходимые для этого сценария.

| Требования | Сведения |
| --- | --- |
| Подписка Azure | <li> Подписки, созданные Contoso в более ранней статье. Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись Azure](https://azure.microsoft.com/free). <li> Если вы создаете бесплатную учетную запись, вы являетесь администратором подписки и можете выполнять все действия. <li> Если вы используете существующую подписку и вы не являетесь администратором, вам нужно обратиться к администратору, чтобы назначить вам разрешения владельца или участника. |
| Инфраструктура Azure | <li> Узнайте [, как Contoso настраивает инфраструктуру Azure](./contoso-migration-infrastructure.md). |
| Предварительные требования для разработчика | Contoso необходимы следующие средства на рабочей станции разработчика: <li>  [Visual Studio Community 2017 версии 15,5](https://visualstudio.microsoft.com) <li> Рабочая нагрузка .NET, включена <li> [Git](https://git-scm.com); <li> [Azure PowerShell](https://azure.microsoft.com/downloads) <li> [CLI Azure.](https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest) <li> [DOCKER Community Edition (Windows 10) или DOCKER Enterprise Edition (Windows Server)](https://docs.docker.com/docker-for-windows/install), настроено для использования контейнеров Windows |

## <a name="scenario-steps"></a>Шаги выполнения сценария

Ниже рассказывается, как компания Contoso выполняет миграцию.

> [!div class="checklist"]
>
> - **Шаг 1. подготавливает AKS и реестр контейнеров Azure.** Компания Contoso подготавливает управляемый кластер AKS и реестр контейнеров с помощью PowerShell.
> - **Шаг 2. Создание контейнеров DOCKER.** Компания Contoso настраивает непрерывную интеграцию (CI) для контейнеров DOCKER с помощью Azure DevOps и передает контейнеры в реестр контейнеров.
> - **Шаг 3. Развертывание серверных микрослужб.** Компания Contoso развертывает оставшуюся часть инфраструктуры, которая будет использоваться внутренними микрослужбами.
> - **Шаг 4. Развертывание интерфейсной инфраструктуры.** Компания Contoso развертывает интерфейсную инфраструктуру, включая хранилище BLOB-объектов для домашних телефонов, Azure Cosmos DB и API компьютерного зрения.
> - **Шаг 5. Перенос серверной части.** Contoso развертывает микрослужбы и запускает их на AKS для миграции серверной части.
> - **Шаг 6. Публикация внешнего интерфейса.** Contoso публикует приложение SmartHotel360 в службе приложений Azure вместе с приложением функции, которое вызывается службой Pet.

## <a name="provision-back-end-resources"></a>Подготовка ресурсов серверной части

Администраторы Contoso выполняют скрипт развертывания для создания управляемого кластера Kubernetes с помощью AKS и реестра контейнеров Azure. В инструкциях для этого раздела используется репозиторий GitHub [SmartHotel360-](https://github.com/Microsoft/SmartHotel360-Backend) The. Репозиторий содержит все программное обеспечение для данной части развертывания.

### <a name="ensure-that-prerequisites-are-met"></a>Убедитесь, что выполнены необходимые условия

Перед запуском администраторы Contoso гарантируют, что все необходимое программное обеспечение установлено на компьютере разработки, используемом для развертывания. Они копируют репозиторий локально на компьютер разработки с помощью Git:

`git clone https://github.com/Microsoft/SmartHotel360-Backend.git`

### <a name="provision-aks-and-azure-container-registry"></a>Подготавливает AKS и реестр контейнеров Azure

Администраторы Contoso подготавливают AKS и реестр контейнеров Azure следующим образом:

1. В Visual Studio Code они открывают папку и заходят в `/deploy/k8s` каталог, содержащий скрипт `gen-aks-env.ps1` .

2. Они запускают скрипт для создания управляемого кластера Kubernetes с помощью AKS и реестра контейнеров Azure.

    ![Снимок экрана, показывающий сценарий AKS в Visual Studio Code.](./media/contoso-migration-rebuild/aks1.png)  
    _Рис. 3. Создание управляемого кластера Kubernetes._

3. После открытия файла он обновит параметр $location на `eastus2` и сохранит файл.

    ![Снимок экрана, на котором показан параметр $location AKS, обновленный до eastus2.](./media/contoso-migration-rebuild/aks2.png)  
    _Рис. 4. Сохранение файла._

4. Выберите **вид**  >  **интегрированный терминал** , чтобы открыть интегрированный терминал в Visual Studio Code.

    ![Снимок экрана, показывающий ссылку "интегрированный терминал".](./media/contoso-migration-rebuild/aks3.png)  
    _Рис. 5. терминал в Visual Studio Code._

5. В интегрированном терминале PowerShell они входят в Azure с помощью `Connect-AzureRmAccount` команды. Дополнительные сведения см. в статье [Приступая к работе с PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).

    ![Снимок экрана: окно входа для интегрированного терминала PowerShell.](./media/contoso-migration-rebuild/aks4.png)  
    _Рис. 6. Встроенный терминал PowerShell._

6. Они проверяют подлинность Azure CLI, выполняя `az login` команду и следуя инструкциям по проверке подлинности с помощью веб-браузера. Дополнительные [сведения](https://docs.microsoft.com/cli/azure/authenticate-azure-cli?view=azure-cli-latest) о входе в систему с помощью Azure CLI.

    ![Снимок экрана, показывающий окно проверки подлинности для Azure CLI.](./media/contoso-migration-rebuild/aks5.png)  
    _Рис. 7. Проверка подлинности Azure CLI._

7. При передаче имени группы ресурсов `ContosoRG` , имени кластера AKS `smarthotel-aks-eus2` и нового имени реестра они выполняют следующую команду.

    `.\gen-aks-env.ps1  -resourceGroupName ContosoRg -orchestratorName smarthotelakseus2 -registryName smarthotelacreus2`

    ![Снимок экрана, показывающий команды смарсотел в области группы ресурсов.](./media/contoso-migration-rebuild/aks6.png)  
    _Рис. 8. выполнение команды._

8. Azure создает другую группу ресурсов, содержащую ресурсы для кластера AKS.

    ![Снимок экрана создания группы ресурсов.](./media/contoso-migration-rebuild/aks7.png)  
    _Рис. 9. Создание группы ресурсов в Azure._

9. После завершения развертывания устанавливается `kubectl` программа командной строки. Средство уже установлено на Azure Cloud Shell.

    `az aks install-cli`

10. Они проверяют подключение к кластеру, выполняя `kubectl get nodes` команду. Имя узла совпадает с именем виртуальной машины в автоматически созданной группе ресурсов.

    ![Снимок экрана, показывающий проверку подключения к кластеру.](./media/contoso-migration-rebuild/aks8.png)  
    _Рис. 10. Проверка подключения к кластеру._

11. Чтобы запустить панель мониторинга Kubernetes, выполните следующую команду:

    `az aks browse --resource-group ContosoRG --name smarthotelakseus2`

12. Откроется вкладка браузер на панели мониторинга. Это туннельное соединение, которое использует Azure CLI.

    ![Снимок экрана, показывающий туннельное соединение.](./media/contoso-migration-rebuild/aks9.png)  
    _Рис. 11. туннельное соединение._

## <a name="step-2-configure-the-back-end-pipeline"></a>Шаг 2. Настройка серверного конвейера

### <a name="create-an-azure-devops-project-and-build"></a>Создание проекта и сборки Azure DevOps

Contoso создает проект Azure DevOps, настраивает сборку CI для создания контейнера, а затем отправляет его в реестр контейнеров. В инструкциях этого раздела используется репозиторий [SmartHotel360-серверной части](https://github.com/Microsoft/SmartHotel360-Backend) .

1. В `visualstudio.com` они создают новую организацию ( `contosodevops360.visualstudio.com` ) и настраивают ее для использования Git.

2. Они создают новый проект ( `SmartHotelBackend` ), выбирая **Git** для управления версиями и **Agile** для рабочего процесса.

    ![Снимок экрана: панель Azure DevOps "Создание нового проекта".](./media/contoso-migration-rebuild/vsts1.png)  
    _Рис. 12. Создание нового проекта._

3. Специалисты компании импортируют [репозиторий GitHub](https://github.com/Microsoft/SmartHotel360-Backend).

    ![Снимок экрана с областью импорта репозитория Git в Azure DevOps.](./media/contoso-migration-rebuild/vsts2.png)  
    _Рис. 13. Импорт репозитория GitHub._

4. В **конвейерах**они выбирают **сборку** и создают новый конвейер с помощью Azure Repos Git в качестве источника из репозитория.

    ![Снимок экрана панели DevOps для создания нового конвейера.](./media/contoso-migration-rebuild/vsts3.png)  
    _Рис. 14. Создание нового конвейера._

5. Они выбирают **пустое задание**.

    ![Снимок экрана со ссылкой "пустое задание" в Azure DevOps.](./media/contoso-migration-rebuild/vsts4.png)  
    _Рис. 15. начало с пустого задания._

6. Они выбирают **Hosted Linux Preview** (Размещенная предварительная версия Linux) для конвейера сборки.

    ![Снимок экрана: Настройка конвейера сборки в Azure DevOps.](./media/contoso-migration-rebuild/vsts5.png)  
    _Рис. 16. Настройка конвейера сборки._

7. На **этапе 1** добавляется задача **Docker Compose**. Эта задача создает Docker Compose.

    ![Снимок экрана создания задачи Docker Compose в Azure DevOps.](./media/contoso-migration-rebuild/vsts6.png)  
    _Рис. 17. Создание Docker Compose._

8. Специалисты компании повторяют и добавляют еще одну задачу **Docker Compose**. Он передает контейнеры в реестр контейнеров.

     ![Снимок экрана: Добавление еще одной задачи Docker Compose в Azure DevOps.](./media/contoso-migration-rebuild/vsts7.png)  
    _Рис. 18. Добавление еще одной задачи Docker Compose._

9. Они выбирают первую задачу для сборки и настройки сборки с помощью подписки Azure, авторизации и реестра контейнеров.

    ![Снимок экрана создания и настройки сборки в Azure DevOps.](./media/contoso-migration-rebuild/vsts8.png)  
    _Рис. 19. Построение и Настройка сборки._

10. Они указывают путь к `docker-compose.yaml` файлу в папке *src* репозитория. Они выбирают создание образов служб и включают в себя последний тег. Когда действие меняется на **Build service images** (Создание образов служб), имя задачи Azure DevOps меняется на **Build services automatically** (Автоматическое создание служб).

    ![Снимок экрана с различными специфическими задачами в Azure DevOps.](./media/contoso-migration-rebuild/vsts9.png)  
    _Рис. 20. особенности задачи._

11. Теперь они настраивают вторую задачу Docker (для отправки). Они выбирают подписку и реестр контейнеров ( `smarthotelacreus2` ).

    ![Снимок экрана настройки второй задачи DOCKER в Azure DevOps.](./media/contoso-migration-rebuild/vsts10.png)  
    _Рис. 21. Настройка второй задачи DOCKER._

12. Они вводят имя файла *DOCKER-сформируйте. YAML* и выбирают **образы службы отправки**, включая последний тег. Когда действие меняется на **Push service images** (Отправка образов служб), имя задачи Azure DevOps меняется на **Push services automatically** (Автоматическая отправка служб).

    ![Снимок экрана: изменение имени задачи DevOps для Azure.](./media/contoso-migration-rebuild/vsts11.png)  
    _Рис. 22. изменение имени задачи DevOps для Azure._

13. После настройки задач DevOps Azure компания Contoso сохраняет конвейер сборки и запускает процесс сборки.

    ![Снимок экрана: запуск процесса сборки в Azure DevOps.](./media/contoso-migration-rebuild/vsts12.png)  
    _Рис. 23. Запуск процесса сборки._

14. Они отслеживают ход выполнения, перейдя к заданию сборки.

    ![Снимок экрана: проверка хода выполнения сборки в Azure DevOps.](./media/contoso-migration-rebuild/vsts13.png)  
    _Рис. 24. Проверка хода выполнения._

15. После завершения сборки в реестре контейнеров отобразятся новые репозиториев, которые заполняются контейнерами, используемыми микрослужбами.

    ![Снимок экрана: Просмотр новых репозиториев после завершения сборки в Azure DevOps.](./media/contoso-migration-rebuild/vsts14.png)  
    _Рис. 25. Просмотр новых репозиториев после завершения сборки._

### <a name="deploy-the-back-end-infrastructure"></a>Развертывание серверной инфраструктуры

Создав кластер AKS и выполнив сборку образов Docker, администраторы Contoso развертывают остальную инфраструктуру, которая будет использоваться внутренними микрослужбами. 
- В инструкциях этого раздела используется репозиторий [SmartHotel360-серверной части](https://github.com/Microsoft/SmartHotel360-Backend) . 
- В `/deploy/k8s/arm` папке есть один сценарий для создания всех элементов.

Администраторы развертывают инфраструктуру следующим образом:

1. Они открывают командную строку разработчика, а затем используют команду `az login` для подписки Azure.

2. Они используют `deploy.cmd` файл для развертывания ресурсов Azure в группе ресурсов ContosoRG и регионе "Восточная часть США 2". для этого введите следующую команду:

    `.\deploy.cmd azuredeploy ContosoRG -c eastus2`

    ![Снимок экрана развертывания серверной части.](./media/contoso-migration-rebuild/backend1.png)  
    _Рис. 26. Развертывание серверной части._

3. В портал Azure они записывают строку подключения для каждой базы данных для последующего использования.

    ![Снимок экрана, показывающий строку подключения для каждой базы данных.](./media/contoso-migration-rebuild/backend2.png)  
    _Рис. 27. запись строки подключения для каждой базы данных._

### <a name="create-the-back-end-release-pipeline"></a>Создание конвейера выпуска серверной части

Теперь администраторам Contoso потребуется предпринять следующее:

- Развернуть контроллер входящего трафика NGINX, чтобы разрешить входящий трафик к службам.
- Развернуть микрослужбы в кластере AKS.
- В качестве первого шага администраторы обновляют строки подключения к микрослужбам с помощью Azure DevOps. Затем они настраивают новый конвейер выпуска Azure DevOps для развертывания микрослужб.
- В инструкциях этого раздела используется репозиторий [SmartHotel360-серверной части](https://github.com/Microsoft/SmartHotel360-Backend) .
- Некоторые параметры конфигурации (например, Active Directory B2C) не рассматриваются в этой статье. Дополнительные сведения об этих параметрах см. в приведенном выше репозитории SmartHotel360-The.

Администраторы создают конвейер:

1. В Visual Studio они обновляют файл */deploy/k8s/config_local. yml* с помощью сведений о подключении к базе данных, упомянутых ранее.

    ![Снимок экрана, показывающий кнопку "создать конвейер" в Visual Studio.](./media/contoso-migration-rebuild/back-pipe1.png)  
    _Рис. 28. подключения к базе данных._

2. Они открывают Azure DevOps, и в проекте SmartHotel360 они выбирают **+ New конвейер** на панели **выпуски** .

    ![Снимок экрана, показывающий кнопку "создать конвейер" в Azure DevOps.](./media/contoso-migration-rebuild/back-pipe2.png)  
    _Рис. 29. Создание нового конвейера._

3. Специалисты компании щелкают **Пустое задание** для запуска конвейера без шаблона.
4. Они указывают имена рабочей области и конвейера.

      ![Снимок экрана, показывающий создание имени этапа в Azure DevOps.](./media/contoso-migration-rebuild/back-pipe4.png)  
        _Рис. 30. имя этапа._

      ![Снимок экрана, показывающий создание имени конвейера в Azure DevOps.](./media/contoso-migration-rebuild/back-pipe5.png)  
        _Рис. 31. имя конвейера._

5. Специалисты добавляют артефакт.

     ![Снимок экрана, показывающий Добавление артефакта в Azure DevOps.](./media/contoso-migration-rebuild/back-pipe6.png)  
    _Рис. 32. Добавление артефакта._

6. Они выбирают **Git** в качестве исходного типа и указывают проект, источник и главную ветвь для приложения SmartHotel360.

    ![Снимок экрана: панель "Добавление артефакта" с Git в качестве типа источника.](./media/contoso-migration-rebuild/back-pipe7.png)  
    _Рис. 33. область параметров артефактов._

7. Они выбирают ссылку на задачу.

    ![Снимок экрана, показывающий ссылку на задачу, выделенную в Azure DevOps.](./media/contoso-migration-rebuild/back-pipe8.png)  
    _Рис. 34. ссылка на задачу._

8. Они добавляют новую задачу Azure PowerShell, чтобы можно было запускать сценарий PowerShell в среде Azure.

    ![Снимок экрана добавления новой задачи PowerShell в Azure.](./media/contoso-migration-rebuild/back-pipe9.png)  
    _Рис. 35. Добавление новой задачи PowerShell._

9. Они выбирают подписку Azure для задачи и выбирают `deploy.ps1` скрипт из репозитория Git.

    ![Снимок экрана: выбор скрипта для запуска из репозитория Git.](./media/contoso-migration-rebuild/back-pipe10.png)  
    _Рис. 36. Запуск скрипта._

10. Они добавляют аргументы в сценарий. Сценарий удаляет все содержимое кластера (за исключением **входящего трафика** и **контроллера входящего трафика**) и развертывает микрослужбы.

    ![Снимок экрана, показывающий аргументы, которые необходимо добавить в скрипт.](./media/contoso-migration-rebuild/back-pipe11.png)  
    _Рис. 37. Добавление аргументов в скрипт._

11. Они задают в качестве предпочтительной версии Azure PowerShell последнюю версию и сохраняют конвейер.

12. Они вернемся к области **Создание новой версии** и вручную создали новый выпуск.

    ![Снимок экрана: область "Создание нового выпуска".](./media/contoso-migration-rebuild/back-pipe12.png)  
    _Рис. 38. Создание нового выпуска вручную._

13. После создания выпуска они выбирают его и в разделе **действия**выбирают пункт **развернуть**.

      ![Снимок экрана, на котором выделяются кнопки развертывания для развертывания выпуска.](./media/contoso-migration-rebuild/back-pipe13.png)  
    _Рис. 39. Развертывание выпуска._

14. После завершения развертывания выполните следующую команду, чтобы проверить состояние служб с помощью Azure Cloud Shell: `kubectl get services` .

## <a name="step-3-provision-front-end-services"></a>Шаг 3. Подготовка интерфейсных служб

Администраторам Contoso необходимо развернуть инфраструктуру, которая будет использоваться интерфейсными приложениями. Они создают:

- Контейнер хранилища BLOB-объектов для хранения образов Pet.
- База данных Azure Cosmos DB для хранения документов, содержащих сведения об Pet.
- API компьютерного зрения для веб-сайта.

В инструкциях для этого раздела используется репозиторий [SmartHotel360-website](https://github.com/microsoft/smartHotel360-website) .

### <a name="create-blob-storage-containers"></a>Создание контейнеров хранилища BLOB-объектов

1. В портал Azure администраторы открывают созданную учетную запись хранения, а затем выбирают **большие двоичные объекты**.
2. Они создают новый контейнер с именем, `Pets` установленным для контейнера с общим доступом. Пользователи отправляют фотографии своих домашних животных в этот контейнер.

    ![Снимок экрана создания нового контейнера в портал Azure.](./media/contoso-migration-rebuild/blob1.png)  
    _Рис. 40. Создание нового контейнера._

3. Они создают второй новый контейнер с именем `settings` . В нем будет размещен файл со всеми параметрами интерфейсного приложения.

    ![Снимок экрана создания второго нового контейнера в портал Azure.](./media/contoso-migration-rebuild/blob2.png)  
    _Рис. 41. Создание второго контейнера._

4. Они захватывают сведения о доступе для учетной записи хранения в текстовом файле для последующего использования.

    ![Снимок экрана: текстовый файл с записью сведений о доступе.](./media/contoso-migration-rebuild/blob2.png)  
    _Рис. 42. текстовый файл, записывающий сведения о доступе._

### <a name="provision-an-azure-cosmos-db-database"></a>Подготавливает базу данных Azure Cosmos DB

Администраторы Contoso подготавливают Azure Cosmos DBную базу данных для использования с информацией Pet.

1. Они создают базу данных **Azure Cosmos DB** в Azure Marketplace.

    ![Снимок экрана, показывающий создание базы данных Azure Cosmos DB в Azure Marketplace.](./media/contoso-migration-rebuild/cosmos1.png)  
    _Рис. 43. Создание базы данных Azure Cosmos DB._

2. Они указывают имя `contososmarthotel` , выберите API SQL и поместите его в рабочую группу ресурсов `ContosoRG` в основном регионе `East US 2` .

    ![Снимок экрана с именем базы данных Azure Cosmos DB и другими параметрами.](./media/contoso-migration-rebuild/cosmos2.png)  
    _Рис. 44. Именование Azure Cosmos DB базы данных._

3. Специалисты компании добавляют новую коллекцию в базу данных с емкостью и пропускной способностью по умолчанию.

    ![Снимок экрана: панель "Добавление коллекции" для Azure Cosmos DB.](./media/contoso-migration-rebuild/cosmos3.png)  
    _Рис. 45. Добавление новой коллекции в базу данных._

4. Они запомните сведения о соединении для базы данных для последующего использования.

    ![Снимок экрана со сведениями о соединении для Azure Cosmos DB базы данных.](./media/contoso-migration-rebuild/cosmos4.png)  
    _Рис. 46. сведения о соединении для базы данных._

### <a name="provision-the-computer-vision-api"></a>Подготавливает API компьютерного зрения

Администраторы Contoso подготавливают API компьютерного зрения. API будет вызываться функцией для вычисления изображений, передаваемых пользователями.

1. Администраторы создают экземпляр **компьютерное зрение** в Azure Marketplace.

     ![Снимок экрана создания нового экземпляра концепции компьютера в Azure Marketplace.](./media/contoso-migration-rebuild/vision1.png)  
    _Рис. 47. новый экземпляр в Azure Marketplace._

2. Они подготавливают API ( `smarthotelpets` ) в Рабочей группе ресурсов `ContosoRG` в основном регионе ( `East US 2` ).

    ![Снимок экрана: Настройка API в Рабочей группе ресурсов.](./media/contoso-migration-rebuild/vision2.png)  
    _Рис. 48. Подготовка API в Рабочей группе ресурсов._

3. Специалисты компании сохраняют параметры подключения API в текстовый файл для последующего использования.

     ![Снимок экрана: сохранение параметров подключения API в текстовый файл.](./media/contoso-migration-rebuild/vision3.png)  
    _Рис. 49. Сохранение параметров подключения API._

### <a name="provision-the-azure-web-app"></a>Подготовка веб-приложения Azure

Администраторы Contoso подготавливают веб-приложение с помощью портал Azure.

1. На портале специалисты компании выбирают **Веб-приложение**.

    ![Снимок экрана выбора веб-приложения в портал Azure.](./media/contoso-migration-rebuild/web-app1.png)  
    _Рис. 50. Выбор веб-приложения._

2. Они предоставляют имя веб-приложения ( `smarthotelcontoso` ), запускают его в Windows и размещают в Рабочей группе ресурсов `ContosoRG` . Они создают новый экземпляр Application Insights для наблюдения за приложениями.

    ![Снимок экрана с указанием имени веб-приложения и других сведений.](./media/contoso-migration-rebuild/web-app2.png)  
    _Рис. 51. имя веб-приложения._

3. После этого администраторы будут просматривать адрес приложения, чтобы проверить, успешно ли оно было создано.

4. В портал Azure они создают промежуточный слот для кода. Конвейер будет развернут в этом слоте. Такой подход гарантирует, что код не помещается в рабочую среду, пока администраторы не выполнит выпуск.

    ![Снимок экрана добавления промежуточного слота веб-приложения.](./media/contoso-migration-rebuild/web-app3.png)  
    _Рис. 52. Добавление промежуточного слота веб-приложения._

### <a name="provision-the-function-app"></a>Подготавливает приложение функции

В портал Azure администраторы Contoso подготавливают приложение функции.

1. Они щелкают **Приложение-функция**.

    ![Снимок экрана, показывающий создание приложения-функции.](./media/contoso-migration-rebuild/function-app1.png)  
    _Рис. 53. Выбор приложения функции._

2. Они предоставляют имя для приложения-функции ( `smarthotelpetchecker` ). Они размещают приложение-функцию в Рабочей группе ресурсов ( `ContosoRG` ). Они задают размещение в **плане потребления**и размещают приложение функции в `East US 2` регионе. Новая учетная запись хранения создается вместе с экземпляром Application Insights для мониторинга.

    ![Снимок экрана, показывающий параметры приложения функции.](./media/contoso-migration-rebuild/function-app2.png)  
    _Рис. 54. параметры приложения функции._

3. После развертывания приложения функции администраторы могут перейти к его адресу, чтобы убедиться, что он успешно создан.

## <a name="step-4-set-up-the-front-end-pipeline"></a>Шаг 4. Настройка конвейера внешнего интерфейса

Администраторы Contoso создают два различных проекта для сайта внешнего интерфейса.

1. В Azure DevOps они создают проект `SmartHotelFrontend` .

    ![Снимок экрана создания проекта внешнего интерфейса.](./media/contoso-migration-rebuild/function-app1.png)  
    _Рис. 55. Создание клиентского проекта._

2. Администраторы импортируют репозиторий Git [SmartHotel360 front-end](https://github.com/Microsoft/SmartHotel360-Website) в новый проект.

3. Для приложения-функции они создают другой проект Azure DevOps ( `SmartHotelPetChecker` ) и импортируют репозиторий [петчеккер](https://github.com/sonahander/SmartHotel360-PetCheckerFunction) Git в этот проект.

### <a name="configure-the-web-app"></a>Настройка веб-приложения

Теперь администраторы Contoso настраивают веб-приложение для использования ресурсов Contoso.

1. Администраторы подключаются к проекту Azure DevOps и копируют репозиторий локально на компьютер разработки.
2. В Visual Studio специалисты компании открывают папку, чтобы просмотреть все файлы в репозитории.

    ![Снимок экрана Visual Studio, показывающий папку со всеми файлами в репозитории.](./media/contoso-migration-rebuild/configure-webapp1.png)  
    _Рис. 56. Просмотр всех файлов в репозитории._

3. Они вносят необходимые изменения конфигурации.

    - При запуске веб-приложение ищет `SettingsUrl` параметр приложения.
    - Эта переменная должна содержать URL-адрес, указывающий на файл конфигурации.
    - По умолчанию используется общедоступная конечная точка.

4. Они обновляют `/config-sample.json/sample.json` файл.

    - Это файл конфигурации для Интернета, когда он использует общедоступную конечную точку.
    - Они редактируют `urls` `pets_config` разделы и со значениями для конечных точек API AKS, учетных записей хранения и базы данных Azure Cosmos DB.
    - URL-адреса должны соответствовать DNS-имени нового веб-приложения, которое создает Contoso.
    - Для contoso это `smarthotelcontoso.eastus2.cloudapp.azure.com` .

    ![Снимок экрана параметров JSON в Visual Studio.](./media/contoso-migration-rebuild/configure-webapp2.png)  
    _Рис. 57. параметры JSON._

5. После обновления файла администраторы переименают его `smarthotelsettingsurl` и передают в хранилище BLOB-объектов, созданные ранее.

    ![Снимок экрана: переименование и отправка JSON файла.](./media/contoso-migration-rebuild/configure-webapp3.png)  
    _Рис. 58. Переименование и отправка файла._

6. Администраторы выбирают файл, чтобы получить URL-адрес. Этот URL-адрес используется приложением при извлекать файлы конфигурации.

    ![Снимок экрана с URL-адресом файла, который используется приложением.](./media/contoso-migration-rebuild/configure-webapp4.png)  
    _Рис. 59. URL-адрес приложения._

7. В *appsettings.Production.js* файле они обновляются на `SettingsURL` URL-адрес нового файла.

    ![Снимок экрана: Обновление URL-адреса нового файла.](./media/contoso-migration-rebuild/configure-webapp5.png)  
    _Рис. 60. Обновление URL-адреса нового файла._

### <a name="deploy-the-website-to-azure-app-service"></a>Развертывание веб-сайта в Службе приложений Azure

Администраторы Contoso теперь могут опубликовать веб-сайт.

1. Они открывают Azure DevOps, и в `SmartHotelFrontend` проекте в **сборках и выпусках**они выбирают **+ New конвейер**.
2. Администраторы выбирают **Azure DevOps Git** как источник.
3. Затем они выбирают шаблон **ASP.NET Core**.
4. Они просматривают конвейер и проверяют, чтобы убедиться, что выбраны **веб-проекты публикации** и **ZIP** published.

    ![Снимок экрана параметров конвейера веб-проекта.](./media/contoso-migration-rebuild/vsts-publish-front2.png)  
    _Рис. 61. параметры конвейера._

5. В **триггерах**они обеспечивают непрерывную интеграцию и Добавление главной ветви. Это гарантирует, что конвейер сборки будет запускаться каждый раз, когда в решении будет зафиксирован новый код в главной ветви.

    ![Снимок экрана: Включение непрерывной интеграции и Добавление главной ветви.](./media/contoso-migration-rebuild/vsts-publish-front3.png)  
    _Рис. 62. Включение непрерывной интеграции._

6. Они выбирают **Сохранить и поместить в очередь**, чтобы начать выполнение сборки.
7. После завершения сборки они настраивают конвейер выпуска с помощью **развертывания службы приложений Azure**.
8. Они содержат имя этапа **промежуточного хранения**.

    ![Снимок экрана с указанием имени этапа для среды.](./media/contoso-migration-rebuild/vsts-publish-front4.png)  
    _Рис. 63. Именование среды._

9. Они добавляют артефакт и выбирают сборку, настроенную пользователем.

    ![Снимок экрана добавления артефакта с построением в качестве типа источника.](./media/contoso-migration-rebuild/vsts-publish-front5.png)  
    _Рис. 64. Добавление артефакта._

10. Они выбирают значок с молнией на артефакте, а затем устанавливают непрерывное развертывание в значение **включено**.

    ![Снимок экрана включения непрерывного развертывания.](./media/contoso-migration-rebuild/vsts-publish-front6.png)  
    _Рис. 65. Включение непрерывного развертывания._

11. На вкладке **Среда** они щелкают **1 задание, 1 задача** в разделе **Промежуточный**.
12. После выбора подписки и имени веб-приложения администраторы открывают задачу " **развертывание службы приложений Azure** ". Развертывание настроено для использования **промежуточного** слота развертывания. В результате код будет автоматически создан для проверки и утверждения в этом слоте.

     ![Снимок экрана: развертывание веб-приложения в слот.](./media/contoso-migration-rebuild/vsts-publish-front7.png)  
    _Рис. 66. Развертывание в слот._

13. На вкладке **Конвейер** администраторы добавляют новый этап.

    ![Снимок экрана вкладки "конвейер" и Добавление нового этапа.](./media/contoso-migration-rebuild/vsts-publish-front8.png)  
    _Рис. 67. Добавление нового этапа._

14. Выберите **развертывание службы приложений Azure с помощью слота** , а затем имя **рабочей среды.**
15. Они выбирают **1 задание, 2 задачи** , а затем подписку, имя службы приложений и **промежуточный** слот.

    ![Снимок экрана, показывающий именование среды.](./media/contoso-migration-rebuild/vsts-publish-front10.png)  
    _Рис. 68. Именование среды._

16. Они удаляют этап **развертывания службы приложений Azure в слот** из конвейера. Он был помещен туда на предыдущих шагах.

    ![Снимок экрана, показывающий удаление слота из конвейера.](./media/contoso-migration-rebuild/vsts-publish-front11.png)  
    _Рис. 69. Удаление слота из конвейера._

17. Они сохраняют конвейер. В конвейере администраторы щелкают **Условия после развертывания**.

    ![Снимок экрана кнопки "условия после развертывания".](./media/contoso-migration-rebuild/vsts-publish-front12.png)  
    _Рис. 70. условия, выполняемые после развертывания._

18. Они включают **утверждения после развертывания** , а затем добавляют ведущего разработчика в качестве утверждающего.

    ![Снимок экрана со списком включенных утверждающих после развертывания.](./media/contoso-migration-rebuild/vsts-publish-front13.png)  
    _Рис. 71. Добавление утверждающего._

19. В конвейере сборки администраторы вручную запускают сборку. При этом запускается новый конвейер выпуска, который используется для развертывания сайта в промежуточном слоте. Для Contoso URL-адресом слота является `https://smarthotelcontoso-staging.azurewebsites.net/`.

20. После завершения сборки и развертывания выпуска в слоте Azure DevOps по электронной почте руководителю разработки на утверждение.

21. Руководитель разработки выбирает **Просмотр утверждения** и может утвердить или отклонить запрос на портале Azure DevOps.

    ![Снимок экрана со ссылкой "утверждение или отклонение" после развертывания.](./media/contoso-migration-rebuild/vsts-publish-front14.png)  
    _Рис. 72. ожидающий запрос на утверждение выпуска._

22. Руководитель разработки вносит комментарий и утверждает его. Это запустит обмен **промежуточными** и рабочими **слотами и** переместит сборку в рабочую среду.

    ![Снимок экрана утверждения после развертывания и комментария.](./media/contoso-migration-rebuild/vsts-publish-front15.png)  
    _Рис. 73. Перемещение сборки в рабочую среду._

23. Конвейер завершает переключение.

    ![Снимок экрана, показывающий состояние развертывания сборки.](./media/contoso-migration-rebuild/vsts-publish-front16.png)  
    _Рис. 74. Завершение переключения._

24. Команда проверяет слот **prod**, чтобы убедиться, что веб-приложение находится в рабочей среде по адресу `https://smarthotelcontoso.azurewebsites.net/`.

### <a name="deploy-the-petchecker-function-app"></a>Развертывание приложения функции Петчеккер

Администраторы Contoso развертывают приложение, выполняя следующие действия.

1. Они подключаются к проекту Azure DevOps и клонируют репозиторий локально на компьютер разработки.
2. В Visual Studio специалисты компании открывают папку, чтобы просмотреть все файлы в репозитории.
3. Они открывают файл *src/петчеккерфунктион/local.settings.jsв* файле и добавляют параметры приложения для хранилища, Azure Cosmos DB базы данных и API компьютерного зрения.

    ![Снимок экрана параметров приложения в файле JSON в Visual Studio.](./media/contoso-migration-rebuild/function5.png)  
    _Рис. 75. Развертывание функции._

4. Они фиксируют код и синхронизируют его с Azure DevOps, отправляя свои изменения.
5. Они добавляют новый конвейер сборки, а затем выбирают **Azure DevOps Git** для источника.
6. Затем они выбирают шаблон **ASP.NET Core (.NET Framework)**.
7. Администраторы принимают значения по умолчанию для шаблона.
8. В разделе **триггеры**выберите **включить непрерывную интеграцию** , а затем выберите **сохранить & очередь** для запуска сборки.
9. После завершения сборки они создают конвейер выпуска, добавляя **развертывание службы приложений Azure с помощью слота**.
10. Они применяют к **рабочей** среде имя среды, а затем выбирают подписку. В качестве **типа приложения** укажите **приложение-функция** и имя службы приложений в формате `smarthotelpetchecker` .

    ![Снимок экрана: тип приложения и имя службы приложений.](./media/contoso-migration-rebuild/petchecker2.png)  
    _Рис. 76. приложение функции._

11. Они добавляют артефакт, **сборку**.

    ![Снимок экрана добавления артефакта с типом источника "сборка".](./media/contoso-migration-rebuild/petchecker3.png)  
    _Рис. 77. Добавление артефакта._

12. Они включают **Триггер непрерывного развертывания** , а затем нажмите кнопку **сохранить**.
13. Они щелкают **Поставить новую сборку в очередь** для запуска полного конвейера CI/CD.
14. После развертывания функции она отображается в портал Azure с состоянием **выполняется**.

    ![Снимок экрана приложения-функции, показывающего состояние "работает".](./media/contoso-migration-rebuild/function6.png)  
    _Рис. 78. Обновление состояния функции._

15. Они насматривают приложение "шашка Pet" в `http://smarthotel360public.azurewebsites.net/pets` , чтобы убедиться, что оно работает правильно.

16. Специалисты компании щелкают аватар, чтобы передать изображение.

    ![Снимок экрана панели для назначения рисунка аватару.](./media/contoso-migration-rebuild/function7.png)  
    _Рис. 79. назначение рисунка аватару._

17. Сначала проверяется фотография небольшой собаки.

    ![Снимок экрана, показывающий фотографию собаки.](./media/contoso-migration-rebuild/function8.png)  
    _Рис. 80. Проверка фотографии._

18. Приложение возвращает сообщение о принятии.

    ![Снимок экрана сообщения о принятии запроса.](./media/contoso-migration-rebuild/function9.png)  
    _Рис. 81. сообщение о принятии запроса._

## <a name="review-the-deployment"></a>Проверка развертывания

Теперь, когда выполняется миграция ресурсов в Azure, компании Contoso необходимо полностью ввести его в эксплуатацию и защитить свою новую инфраструктуру.

### <a name="security"></a>Безопасность

- Компания Contoso должна гарантировать, что их новые базы данных безопасны. Дополнительные сведения см. в статье [Общие сведения о базе данных SQL Azure и возможностях безопасности sql управляемый экземпляр](https://docs.microsoft.com/azure/sql-database/sql-database-security-overview).
- Приложение должно быть обновлено для использования SSL с сертификатами. Экземпляр контейнера должен быть повторно развернут для ответа через порт 443.
- Компания Contoso должна рассмотреть возможность использования Azure Key Vault для защиты секретов в своих Service Fabric приложениях. Дополнительные сведения см. [в статье Управление зашифрованными секретными кодами в Service Fabric приложениях](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-secret-management).

### <a name="backups-and-disaster-recovery"></a>Резервное копирование и аварийное восстановление

- Contoso необходимо проверить [требования к резервному копированию для базы данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-automated-backups).
- Компания Contoso должна рассмотреть возможность реализации [групп отработки отказа SQL для обеспечения региональной отработки отказа для базы данных](https://docs.microsoft.com/azure/sql-database/sql-database-auto-failover-group).
- Contoso может использовать [георепликацию для SKU реестра контейнеров Azure Premium](https://docs.microsoft.com/azure/container-registry/container-registry-geo-replication).
- Azure Cosmos DB автоматически архивируется. Дополнительные сведения см. [в разделе оперативное резервное копирование и восстановление данных по запросу в Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/online-backup-and-restore).

### <a name="licensing-and-cost-optimization"></a>Лицензирование и оптимизация затрат

- После развертывания всех ресурсов специалисты компании Contoso должны назначить теги Azure в соответствии со своим [планированием инфраструктуры](./contoso-migration-infrastructure.md#set-up-tagging).
- Полное лицензирование входит в стоимость служб PaaS, которые использует Contoso. Это будет вычтено из Соглашение Enterprise.
- Компания Contoso включит службу [управления затратами Azure и выставления счетов](https://docs.microsoft.com/azure/cost-management-billing/cost-management-billing-overview) для помощи в мониторинге ресурсов Azure и управлении ими.

## <a name="conclusion"></a>Заключение

В этой статье компания Contoso перестраивает приложение SmartHotel360 в Azure. Клиентская виртуальная машина локального приложения перестраивается для веб-приложений службы приложений Azure. Серверная части приложения создается с помощью микрослужб, развернутых в контейнерах, управляемых AKS. Улучшенная функциональность contoso с фотографией приложения Pet.

## <a name="suggested-skills"></a>Предлагаемые навыки

Microsoft Learn — это новый подход к изучению. Готовность к работе с новыми навыками и обязанностями, связанными с внедрением облачных технологий, дается нелегко. Microsoft Learn предоставляет более результативный подход к практическим занятиям, которые помогают быстрее достичь целей. С помощью Microsoft Learn вы можете заработать баллы, повышать их уровень и получить дополнительные возможности.

Ниже приведены два примера настроенных путей обучения на Microsoft Learn, которые соответствуют приложению Contoso SmartHotel360 в Azure.

<!--docsTest:ignore "Azure Cognitive Vision Services" -->

- **[Развертывание веб-сайта в Azure с помощью службы приложений Azure](https://docs.microsoft.com/learn/paths/deploy-a-website-with-azure-app-service)**. Создав веб-приложения в Azure, вы можете легко публиковать свой веб-сайт и управлять им без необходимости работать с базовыми серверами, хранилищами или сетевыми ресурсами. Вместо этого вы можете сосредоточиться на функциях веб-сайта и полагаться на надежную платформу Azure, чтобы обеспечить безопасный доступ к сайту.

- **[Обработайте и классификация образов с помощью служб "самостоятельное представление Azure](https://docs.microsoft.com/learn/paths/classify-images-with-vision-services)**". Azure Cognitive Services предлагает предварительно созданные функции для обеспечения функциональности компьютерных концепций в приложениях. Узнайте, как использовать службы распознавания концепций для обнаружения лиц, тегов и классификации изображений, а также для идентификации объектов.
