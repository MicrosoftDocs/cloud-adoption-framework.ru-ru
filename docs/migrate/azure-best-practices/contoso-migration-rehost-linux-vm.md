---
title: Повторное размещение локального приложения Linux на виртуальных машинах Azure
description: Узнайте, как повторно разместить локальное приложение Linux, перенесите его на виртуальные машины Azure с помощью инфраструктуры внедрения в облако для Azure.
author: BrianBlanchard
ms.author: brblanch
ms.date: 04/04/2019
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: migrate
services: site-recovery
ms.openlocfilehash: 3130494f151897d005a5ded28268d056f15bd15c
ms.sourcegitcommit: ea63be7fa94a75335223bd84d065ad3ea1d54fdb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "80355960"
---
<!-- cSpell:ignore SQLVM OSTICKETWEB OSTICKETMYSQL contosohost contosodc vcenter WEBVM systemctl NSGs -->

# <a name="rehost-an-on-premises-linux-app-to-azure-vms"></a>Повторное размещение локального приложения Linux на виртуальных машинах Azure

В этой статье показано, как вымышленная компания Contoso повторно размещает двухуровневое приложение LAMP (Linux, Apache, MySQL, PHP) с помощью виртуальных машин IaaS Azure.

Приложение службы поддержки osTicket, используемое в этом примере, предоставляется в виде открытого кода. Если вы хотите использовать его для тестирования, то можете скачать это приложение с сайта [GitHub](https://github.com/osTicket/osTicket).

## <a name="business-drivers"></a>Бизнес-факторы

Совместными усилиями ИТ-руководство и деловые партнеры определили указанные ниже цели этой миграции.

- **Адаптация к расширению бизнеса.** По мере развития компании Contoso растет нагрузка на локальные системы и инфраструктуру.
- **Ограничение рисков.** Приложение службы поддержки критически важно для деятельности Contoso. Поэтому компания Contoso хочет переместить его в Azure с минимальными рисками.
- **Расширение.** Сотрудники компании Contoso не намерены менять приложение прямо сейчас. Нужно, чтобы оно просто стабильно работало.

## <a name="migration-goals"></a>Цели миграции

Для определения наилучшего способа миграции команда Contoso по работе в облаке определила цели миграции.

- После миграции в Azure приложение должно иметь те же возможности с точки зрения производительности, что и в текущей локальной среде VMWare. В облаке приложение будет играть такую же критически важную роль, как в локальной среде.
- Компания Contoso не хочет вкладываться в это приложение. Оно важно для бизнеса, но компании Contoso просто нужно безопасно переместить его в облако в его текущей форме.
- В компании Contoso не намерены изменять модель взаимодействия с этим приложением. Взаимодействие с ним в облаке должно осуществляться так же, как и сейчас.
- В компании Contoso не намерены изменять функции приложения. Нужно изменить только его расположение.
- После выполнения ряда миграций приложения Windows специалисты Contoso хотят освоить использование инфраструктуры на базе Linux в Azure.

## <a name="solution-design"></a>Архитектура решения

Определив свои цели и требования, специалисты компании Contoso начинают разработку и анализ решения для развертывания и планируют процесс миграции, включая службы Azure, которые будут использоваться в ходе этой миграции.

### <a name="current-app"></a>Текущее приложение

- У приложения OSTicket есть два уровня, которые размещаются на двух виртуальных машинах (**OSTICKETWEB** и **OSTICKETMYSQL**).
- Виртуальные машины расположены на узле VMware ESXi **contosohost1.contoso.com** (версии 6.5).
- Средой VMware управляет сервер vCenter Server 6.5 (**vcenter.contoso.com**), который запущен на виртуальной машине.
- Contoso использует локальный центр обработки данных (**contoso-datacenter**) с локальным контроллером домена (**contosodc1**).

### <a name="proposed-architecture"></a>Предлагаемая архитектура

- Так как приложение является рабочей нагрузкой в рабочей среде, виртуальные машины в Azure будут располагаться в рабочей группе ресурсов **ContosoRG**.
- Виртуальные машины будут перенесены в основной регион (восточная часть США 2) и помещены в рабочую сеть (VNET-PROD-EUS2).
  - Виртуальная машина веб-уровня будет находиться в интерфейсной подсети (PROD-FE-EUS2).
  - Виртуальная машина базы данных будет находиться в подсети баз данных (PROD-DB-EUS2).
- После завершения миграции локальные виртуальные машины в центре обработки данных Contoso будут выведены из эксплуатации.

![Архитектура сценария](./media/contoso-migration-rehost-linux-vm/architecture.png)

### <a name="solution-review"></a>Проверка решения

Специалисты Contoso оценивают предлагаемый дизайн, составляя список плюсов и минусов.

<!-- markdownlint-disable MD033 -->

**Рассмотрение** | **Сведения**
--- | ---
**Преимущества** | Обе виртуальные машины будут перемещены в Azure без изменений, упрощая миграцию.<br/><br/> Так как компания Contoso использует подход с приближением и сдвигом для виртуальных машин приложений, для базы данных приложения специальные средства настройки или миграции не требуются.<br/><br/> Компания Contoso сохранит полный контроль над виртуальными машинами приложений в Azure. <br/><br/> Виртуальные машины приложения работают под управлением ОС Ubuntu 16.04-TLS, которая является одобренным дистрибутивом Linux. [Дополнительные сведения](https://docs.microsoft.com/azure/virtual-machines/linux/endorsed-distros)
**Недостатки** | Веб-уровень и уровень данных приложения останутся в одной точке отработки отказа. <br/><br/> Компании Contoso потребуется и дальше поддерживать виртуальные машины приложения, а не переходить на управляемую службу, такую как Служба приложений Azure и База данных Azure для MySQL.<br/><br/> Компания Contoso осведомлена о том, что благодаря простоте миграции виртуальных машин с переносом и сменой виртуальной машины они не используют все преимущества функций [базы данных Azure для MySQL](https://docs.microsoft.com/azure/mysql/overview) (Встроенная Высокая доступность, прогнозируемая производительность, простое масштабирование, автоматическое резервное копирование и встроенная безопасность).

<!-- markdownlint-enable MD033 -->

### <a name="migration-process"></a>Процесс миграции

Contoso будет осуществлять миграцию следующим образом:

- В качестве первого шага Contoso подготовит и настроит компоненты Azure для средства миграции серверов Миграции Azure, а также подготовит локальную инфраструктуру VMware.
- В компании уже развернута [инфраструктура Azure](./contoso-migration-infrastructure.md), поэтому Contoso нужно только добавить и настроить репликацию виртуальных машин с помощью средства миграции серверов Миграции Azure.
- Когда все будет подготовлено, Contoso сможет начать репликацию виртуальных машин.
- После того как репликация будет включена и начнет работать, Contoso перенесет виртуальную машину путем отработки отказа в Azure.

![Процесс миграции](./media/contoso-migration-rehost-linux-vm/migration-process-az-migrate.png)

### <a name="azure-services"></a>Службы Azure

**Служба** | **Описание** | **Стоимость**
--- | --- | ---
[Миграция сервера службы "Миграция Azure"](https://docs.microsoft.com/azure/migrate/contoso-migration-rehost-linux-vm) | Служба управляет переносом локальных приложений и рабочих нагрузок, а также экземпляров виртуальных машин AWS/GCP. | Во время репликации в Azure взимается плата за службу хранилища Azure. При отработке отказа создаются виртуальные машины Azure, за которые взимается плата. Дополнительные сведения о ценах см. на [этой странице](https://azure.microsoft.com/pricing/details/azure-migrate).

## <a name="prerequisites"></a>предварительные требования

Ниже приведены действия компании Contoso, необходимые для этого сценария.

<!-- markdownlint-disable MD033 -->

**Требования** | **Сведения**
--- | ---
**Подписка Azure.** | Специалисты Contoso создали подписки в более ранней статье в этой серии. Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись Azure](https://azure.microsoft.com/pricing/free-trial).<br/><br/> Если вы создаете бесплатную учетную запись, вы являетесь администратором своей подписки и можете выполнять любые действия.<br/><br/> Если вы используете существующую подписку, в которой не являетесь администратором, администратор должен назначить вам права владельца или участника.<br/><br/> Если вам требуются более детализированные разрешения, ознакомьтесь с [этой статьей](https://docs.microsoft.com/azure/site-recovery/site-recovery-role-based-linked-access-control).
**Инфраструктура Azure** |  [Узнайте, как](./contoso-migration-infrastructure.md) компания Contoso настраивает инфраструктуру Azure.<br/><br/> Узнайте больше о [требованиях](https://docs.microsoft.com/azure/migrate/contoso-migration-rehost-linux-vm#prerequisites) к средству миграции серверов Миграции Azure.
**Локальные серверы** | Потребуется локальный сервер vCenter Server версии 5.5, 6.0 или 6.5.<br/><br/> Узел ESXi под управлением версии 5.5, 6.0 или 6.5.<br/><br/> Одна или несколько виртуальных машин VMware, которые выполняются на узле ESXi.
**Локальные виртуальные машины** | [Ознакомьтесь со списком виртуальных машин Linux](https://docs.microsoft.com/azure/virtual-machines/linux/endorsed-distros), которые рекомендованы к использованию в Azure.

<!-- markdownlint-enable MD033 -->

## <a name="scenario-steps"></a>Шаги выполнения сценария

Миграция в Contoso будет осуществляться следующим образом:

> [!div class="checklist"]
>
> - **Шаг 1. Подготовка Azure для миграции сервера миграция Azure.** Специалисты компании Contoso добавляют средство миграции серверов в свой проект Миграции Azure.
> - **Шаг 2. Подготовка локальной среды VMware для миграции сервера миграция в Azure.** Специалисты компании Contoso подготавливают учетные записи для обнаружения виртуальных машин и подключения к виртуальным машинам Azure после отработки отказа.
> - **Шаг 3. репликация виртуальных машин.** Специалисты компании Contoso настраивают репликацию и запускают репликацию виртуальных машин в хранилище Azure.
> - **Шаг 4. Миграция виртуальных машин с миграцией Azure миграция сервера.** Специалисты компании Contoso выполняют тестовую отработку отказа, чтобы убедиться в надлежащей работе всех компонентов, а затем выполняют полную отработку отказа для переноса виртуальных машин в Azure.

## <a name="step-1-prepare-azure-for-the-azure-migrate-server-migration-tool"></a>Шаг 1. Подготовка Azure для миграции сервера в Azure Migration Tool

Ниже перечислены компоненты Azure, которые необходимы для миграции виртуальных машин компании Contoso в Azure.

- Виртуальная сеть, в которой будут размещены виртуальные машины Azure, созданные в результате отработки отказа.
- Подготовленное средство миграции серверов Миграции Azure.

Специалисты компании Contoso настроили их указанным ниже образом.

1. **Настройка сети:** Компания Contoso уже настроила сеть, которая может быть для миграции сервера в Azure при [развертывании инфраструктуры Azure](./contoso-migration-infrastructure.md) .

    - SmartHotel360 — это рабочее приложение, и виртуальные машины будут перенесены в рабочую сеть Azure (VNET-PROD-EUS2) в основном регионе "Восточная часть США 2".
    - Обе виртуальные машины будут размещены в группе ресурсов ContosoRG, которая используется для рабочих ресурсов.
    - Интерфейсная виртуальная машина приложения (WEBVM) будет перенесена в интерфейсную подсеть (PROD-FE-EUS2) в рабочей сети.
    - Виртуальная машина базы данных приложения (SQLVM) будет перенесена в подсеть базы данных (PROD-DB-EUS2) в рабочей сети.

2. **Подготавливается средство миграции сервера Azure Migration Server:** После создания сети и учетной записи хранения Contoso теперь создает хранилище служб восстановления (Контосомигратионваулт) и помещает его в группу ресурсов Контософаиловеррг в основном регионе "Восточная часть США 2".

    ![Средство миграции серверов Миграции Azure](./media/contoso-migration-rehost-linux-vm/server-migration-tool.png)

**Нужна дополнительная помощь?**

[Узнайте больше о](https://docs.microsoft.com/azure/migrate) настройке средства миграции серверов Миграции Azure.

### <a name="prepare-to-connect-to-azure-vms-after-failover"></a>Подготовка к подключению виртуальных машин Azure после отработки отказа

После отработки отказа в Azure компания Contoso хочет подключиться к реплицированным виртуальным машинам в Azure. Чтобы сделать это, администраторы Contoso должны выполнить следующие действия:

- Чтобы получить доступ к виртуальным машинам Azure через Интернет, следует включить SSH на локальных виртуальных машинах Linux перед миграцией. Для Ubuntu эту процедуру можно выполнить с помощью следующей команды: **Sudo apt-get ssh install -y**.
- После выполнения миграции (отработки отказа) можно проверить данные **диагностики загрузки**, чтобы увидеть снимок виртуальной машины.
- Если не удается сделать это, необходимо проверить, работает ли виртуальная машина, и изучить [советы по устранению неполадок](https://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).

**Нужна дополнительная помощь?**

- [Узнайте больше](https://docs.microsoft.com/azure/migrate/contoso-migration-rehost-linux-vm#prepare-vms-for-migration) о подготовке виртуальных машин к миграции.

## <a name="step-3-replicate-the-on-premises-vms"></a>Шаг 3. Репликация локальных виртуальных машин

Чтобы можно было запустить миграцию в Azure, администраторам компании Contoso потребуется настроить и включить репликацию.

По завершении обнаружения можно начать репликацию виртуальных машин VMware в Azure.

1. В проекте "миграция Azure" > **серверы**, служба **"миграция Azure": миграция сервера**выберите **репликация**.

    ![Репликация виртуальных машин](./media/contoso-migration-rehost-linux-vm/select-replicate.png)

2. В разделе **Реплицировать** выберите **Параметры исходного кода** > **Ваши компьютеры виртуализированы?** и **Yes, with VMware vSphere Hypervisor** (Да, с помощью гипервизора VMware vSphere).

3. В разделе **Локальное устройство** выберите имя устройства Миграции Azure, которое вы настроили, и нажмите кнопку **ОК**.

    ![Параметры источника](./media/contoso-migration-rehost-linux-vm/source-settings.png)

4. В разделе **Виртуальные машины** выберите виртуальные машины, которые необходимо реплицировать.
    - Если вы выполнили оценку для виртуальных машин, вы можете применить рекомендации по выбору размера виртуальной машины и типу диска ("Премиум" или "Стандарт") из результатов оценки. Для этого в поле **Импортировать параметры миграции из средства оценки Миграции Azure?** выберите вариант **Да**.
    - Если вы не проводили оценку или не хотите использовать параметры оценки, выберите вариант **Нет**.
    - Если вы решили использовать оценку, выберите группу виртуальных машин и имя оценки.

    ![Выбор оценки](./media/contoso-migration-rehost-linux-vm/select-assessment.png)

5. В разделе **Виртуальные машины** найдите виртуальные машины и отметьте каждую виртуальную машину, которую вы хотите перенести. Затем нажмите кнопку **Далее: целевые параметры**.

6. В разделе **Целевые параметры** выберите подписку и целевой регион, в который вы хотите выполнить миграцию, а также укажите группу ресурсов, в которой будут находиться виртуальные машины Azure после миграции. В разделе **Виртуальная сеть** выберите виртуальную сеть или подсеть Azure, к которой будут подключены виртуальные машины Azure после миграции.

7. В **преимущество гибридного использования Azure**выберите следующее:

    - выберите вариант **Нет**, если вы не хотите применять Преимущество гибридного использования Azure. Выберите **Далее**.
    - Выберите вариант **Да**, если у вас есть компьютеры с Windows Server, на которые распространяются активные подписки Software Assurance или Windows Server, и вы хотите применить это преимущество к компьютерам, которые вы переносите. Выберите **Далее**.

8. В разделе **Вычисления** просмотрите имя виртуальной машины, размер, тип диска ОС и группу доступности. Виртуальные машины должны соответствовать [требованиям Azure](https://docs.microsoft.com/azure/migrate/migrate-support-matrix-vmware#vmware-requirements).

    - **Размер виртуальной машины:** Если вы используете рекомендации по оценке, раскрывающийся список размер виртуальной машины будет содержать рекомендуемый размер. В противном случае Миграция Azure выбирает размер в зависимости от ближайшего совпадения в подписке Azure. В качестве альтернативы выберите размер вручную в разделе **Размер виртуальной машины Azure**.
    - **Диск ОС:** Укажите диск операционной системы (загрузочный) для виртуальной машины. Диск ОС — это диск с загрузчиком операционной системы и установщиком.
    - **Группа доступности:** Если после миграции виртуальная машина должна находиться в группе доступности Azure, укажите набор. Группа должна находиться в целевой группе ресурсов, которую вы указываете для миграции.

9. В разделе **Диски** укажите, следует ли реплицировать диски виртуальных машин в Azure, и выберите тип диска (SSD или HDD (цен. категория "Стандартный") или управляемые диски (цен. категория "Премиум")) в Azure. Выберите **Далее**.
    - Диски можно исключить из репликации.
    - Если вы исключите диски, они не будут присутствовать на виртуальной машине Azure после миграции.

10. В окне **Проверка и запуск репликации**просмотрите параметры, а затем выберите **репликация** , чтобы запустить начальную репликацию для серверов.

> [!NOTE]
> Вы можете обновить параметры репликации в любое время до начала репликации в разделе **Управление** > **Репликация компьютеров**. Настройки невозможно изменить после начала репликации.

## <a name="step-4-migrate-the-vms"></a>Шаг 4. Миграция виртуальных машин

Администраторы компании Contoso выполняют быструю тестовую отработку отказа, а затем полную отработку отказа для миграции виртуальных машин.

### <a name="run-a-test-failover"></a>Запуск тестовой отработки отказа

1. В **задачах миграции** > **серверы** > **службе "миграция Azure": миграция сервера**выберите **тестировать перенесенные серверы**.

     ![Тестовая миграция серверов](./media/contoso-migration-rehost-linux-vm/test-migrated-servers.png)

2. Щелкните правой кнопкой мыши виртуальную машину, которую нужно протестировать, и выберите пункт **Тестовая миграция**.

    ![Тестовая миграция](./media/contoso-migration-rehost-linux-vm/test-migrate.png)

3. В разделе **Тестовая миграция** выберите виртуальную сеть Azure, в которой будет находиться виртуальная машина Azure после миграции. Мы рекомендуем использовать непродукцию-виртуальную сеть.
4. Запустится задание **Тестовая миграция**. Отслеживайте задание и уведомления на портале.
5. После завершения миграции просмотрите перенастроенную виртуальную машину Azure в разделе **Виртуальные машины** на портале Azure. Имя машины содержит суффикс **-Test**.
6. После выполнения теста щелкните правой кнопкой мыши виртуальную машину Azure в области **репликация компьютеров**, а затем выберите **очистить тестовую миграцию**.

    ![Очистка миграции](./media/contoso-migration-rehost-linux-vm/clean-up.png)

### <a name="migrate-the-vms"></a>Миграция виртуальных машин

Теперь администраторы компании Contoso могут выполнить полную отработку отказа, чтобы завершить миграцию.

1. В проекте "миграция Azure" > **серверы** > миграции **Azure: миграция сервера**выберите **репликация серверов**.

    ![Репликация серверов](./media/contoso-migration-rehost-linux-vm/replicating-servers.png)

2. В области **Репликация компьютеров** щелкните правой кнопкой мыши виртуальную машину и выберите **Миграция**.
3. В разделе **Миграция** > **Shut down virtual machines and perform a planned migration with no data loss** (Завершить работу виртуальных машин и выполнить запланированную миграцию без потери данных?) выберите вариант **Да** > **ОК**.
    - По умолчанию Миграция Azure выключает локальную виртуальную машину и запускает репликацию по требованию для синхронизации любых изменений виртуальной машины, которые произошли с момента последней репликации. Это гарантирует отсутствие потери данных.
    - Если вы не хотите выключать виртуальную машину, выберите вариант **Нет**.
4. Запустится задание миграции виртуальной машины. Отслеживайте задание в уведомлениях Azure.
5. После завершения работы вы можете просматривать виртуальную машину и управлять ею на странице **Виртуальные машины**.

### <a name="connect-the-vm-to-the-database"></a>Подключение виртуальной машины к базе данных

В качестве последнего шага процесса миграции администраторы Contoso обновляют строку подключения приложения, чтобы она указывала на базу данных приложения, работающую на виртуальной машине **остиккетмискл** .

1. Специалисты компании устанавливают SSH-подключение к виртуальной машине **OSTICKETWEB** с помощью Putty или другого клиента SSH. Виртуальная машина частная, поэтому для подключения к ней используется частный IP-адрес.

    ![Подключение к базе данных](./media/contoso-migration-rehost-linux-vm/db-connect.png)

    ![Подключение к базе данных](./media/contoso-migration-rehost-linux-vm/db-connect2.png)

2. Специалистам необходимо убедиться, что виртуальная машина **OSTICKETWEB** может взаимодействовать с виртуальной машиной **OSTICKETMYSQL**. В настоящее время в конфигурации жестко закодирован локальный IP-адрес 172.16.0.43.

    **Перед обновлением**

    ![Обновление IP-адреса](./media/contoso-migration-rehost-linux-vm/update-ip1.png)

    **После обновления**

    ![Обновление IP-адреса](./media/contoso-migration-rehost-linux-vm/update-ip2.png)

3. Специалисты компании перезапускают службу с помощью команды **systemctl перезапустите apache2**.

    ![Перезагрузить](./media/contoso-migration-rehost-linux-vm/restart.png)

4. Наконец, они обновляют записи DNS для **OSTICKETWEB** и **OSTICKETMYSQL** на одном из контроллеров домена Contoso.

    ![Обновление DNS](./media/contoso-migration-rehost-linux-vm-mysql/update-dns.png)

    ![Обновление DNS](./media/contoso-migration-rehost-linux-vm-mysql/update-dns.png)

**Нужна дополнительная помощь?**

- [Узнайте, как](https://docs.microsoft.com/azure/migrate/tutorial-migrate-vmware#run-a-test-migration) выполнить тестовую отработку отказа.
- [Узнайте больше](https://docs.microsoft.com/azure/migrate/tutorial-migrate-vmware#migrate-vms) о переносе виртуальных машин в Azure.

## <a name="clean-up-after-migration"></a>Очистка после миграции

По завершении миграции уровни приложения osTicket работают на виртуальных машинах Azure.

Для этого специалистам компании Contoso потребуется выполнить очистку:

- Удалите локальные виртуальные машины из перечня в vCenter.
- Удалить локальные виртуальные машины из локальных заданий резервного копирования.
- Обновление внутренней документации с указанием новых расположений и IP-адресов для OSTICKETWEB и OSTICKETMYSQL.
- Проверить все ресурсы, взаимодействующие с виртуальными машинами, и обновить все соответствующие параметры или документы согласно новой конфигурации.
- Специалисты Contoso использовали службу "Миграция Azure" с сопоставлением зависимостей для оценки пригодности виртуальных машин для миграции. Администраторы должны удалить Microsoft Monitoring Agent и агент зависимостей Майкрософт, установленные для этой цели, с виртуальной машины.

## <a name="review-the-deployment"></a>Проверка развертывания

Теперь, когда приложение работает, компании Contoso необходимо полностью ввести его в эксплуатацию и защитить свою новую инфраструктуру.

### <a name="security"></a>безопасность

Группа безопасности Contoso просматривает виртуальные машины ОСТИККЕТВЕБ и ОСТИККЕТМИСКЛ, чтобы определить проблемы безопасности.

- Чтобы можно было управлять доступом, команда проверяет группы безопасности сети (NSG) для виртуальных машин. NSG позволяют пропускать только разрешенный для приложения трафик.
- Команда также анализирует возможность защиты данных на диске виртуальной машины с помощью шифрования дисков и Azure KeyVault.

Дополнительные сведения см. в статье рекомендации [по обеспечению безопасности для рабочих нагрузок IaaS в Azure](https://docs.microsoft.com/azure/security/fundamentals/iaas).

### <a name="bcdr"></a>Непрерывность бизнес-процессов и аварийное восстановление

Чтобы обеспечить непрерывность бизнес-процессов и аварийное восстановление, специалисты компании Contoso выполняют указанные ниже действия.

- **Безопасное хранение данных.** Компания Contoso выполняет резервное копирование данных с виртуальных машин при помощи службы Azure Backup. [Дополнительные сведения](https://docs.microsoft.com/azure/backup/backup-introduction-to-azure-backup?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
- **Поддержание бесперебойной работы приложений.** Специалисты компании Contoso реплицируют виртуальные машины приложения в дополнительный регион Azure с помощью Site Recovery. [Дополнительные сведения](https://docs.microsoft.com/azure/site-recovery/azure-to-azure-quickstart)

### <a name="licensing-and-cost-optimization"></a>Лицензирование и оптимизация затрат

- После развертывания ресурсов Contoso назначает теги Azure в соответствии с определениями, заданными в ходе [развертывания инфраструктуры Azure](./contoso-migration-infrastructure.md#set-up-tagging).
- У компании Contoso нет проблем с лицензированием серверов Ubuntu.
- Компания будет использовать Управление затратами Azure по лицензии Cloudyn (дочернее подразделение корпорации Майкрософт). Это решение по управлению затратами для нескольких облаков, которое позволяет использовать облака Azure и другие облачные ресурсы, а также управлять ими. Дополнительные сведения об управлении расходами см. [на этой странице](https://docs.microsoft.com/azure/cost-management/overview).
