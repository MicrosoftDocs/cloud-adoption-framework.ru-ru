---
title: Повторное размещение локального приложения с миграцией на виртуальные машины Azure с помощью Управляемого экземпляра Базы данных SQL Azure
description: В этой статье рассказывается о том, как компания Contoso перемещает локальное приложение в виртуальные машины Azure используя Управляемый экземпляр Базы данных SQL Azure.
author: givenscj
ms.author: abuck
ms.date: 04/02/2020
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: migrate
services: azure-migrate
ms.openlocfilehash: 47343781c43b3074e722eacff293c120f11aec47
ms.sourcegitcommit: e5c4db8f660fa4c58d1441f0feb4cce415491dfd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/17/2020
ms.locfileid: "84943038"
---
<!-- cSpell:ignore givenscj WEBVM SQLVM OSTICKETWEB OSTICKETMYSQL contosohost vcenter contosodc NSGs agentless SQLMI iisreset -->

# <a name="rehost-an-on-premises-app-on-an-azure-vm-and-sql-database-managed-instance"></a>Повторное размещение локального приложения на виртуальной машине Azure и в Управляемом экземпляре Базы данных SQL

В этой статье показано, как вымышленная компания Contoso переносит двухстороннее приложение внешнего интерфейса Windows .NET, работающее на виртуальных машинах VMware, на виртуальную машину Azure с помощью службы "миграция Azure". В ней также показано, как компания Contoso переносит базу данных приложения на Управляемый экземпляр Базы данных SQL Azure.

Приложение SmartHotel360, используемое в этом примере, предоставляется в виде открытого кода. Если вы хотите использовать его для тестирования, то можете скачать это приложение с сайта [GitHub](https://github.com/Microsoft/SmartHotel360).

## <a name="business-drivers"></a>Бизнес-факторы

Совместными усилиями ИТ-руководство компании Contoso и деловые партнеры определили указанные ниже цели этой миграции.

- **Устраните бизнес-рост.** Компания Contoso растет. В результате увеличилось давление на внутренние системы и инфраструктуру компании.
- **Повышение эффективности.** Компании Contoso необходимо удалить ненужные процедуры и оптимизировать процессы для разработчиков и пользователей. Бизнес нуждается в том, чтобы ИТ были быстрыми и не тратили время или деньги, поэтому компания может быстрее выполнять требования клиентов.
- **Повышение гибкости.** ИТ-отдел компании Contoso должен проявлять большую гибкость в отношении потребностей бизнеса. Он должен реагировать быстрее чем изменения, которые происходят на рынке, для достижение компанией успеха в глобальной экономике. ИТ-отдел в компании Contoso не должен мешать или становиться помехой для бизнеса.
- **Измените.** По мере роста бизнеса компании ИТ-отдел компании Contoso должен предоставлять системы, которые могут расти с той же скоростью.

## <a name="migration-goals"></a>Цели миграции

Группа, работающая над облачной инфраструктурой компании Contoso, определила цели этой миграции. Компания использует цели миграции, чтобы определить наилучший способ миграции.

- После миграции приложение Azure должно иметь те же возможности с точки зрения производительности, что и приложение в текущей локальной среде VMware компании Contoso. Переход в облако не означает, что производительность приложения сильно уменьшится.
- Компания Contoso не хочет вкладывать приложения в приложение. Это приложение критически важно для бизнеса, но компании Contoso просто нужно переместить его в облако в его текущей форме.
- Задачи администрирования базы данных должны быть минимальными после переноса приложения.
- Компания Contoso не хочет использовать базу данных SQL Azure для этого приложения. Она ищет альтернативные варианты.

## <a name="solution-design"></a>Архитектура решения

Определив свои цели и требования, специалисты компании Contoso начинают разработку и анализ решения для развертывания и планируют процесс миграции, включая службы Azure, которые будут использоваться в ходе этой миграции.

### <a name="current-architecture"></a>Текущая архитектура

- У компании Contoso есть один главный центр обработки данных (**contoso-datacenter**). Он находится в Нью-Йорке (в восточной части США).
- У компании есть еще три местных филиала в других уголках США.
- Основной центр обработки данных подключается к Интернету с помощью оптоволоконного соединения Metro Ethernet (500 Мбит/с).
- Каждый филиал подключен локально к Интернету с помощью соединений бизнес-класса и применяет VPN-туннели IPSec для передачи данных в основной центр обработки данных. Эта настройка позволяет компании Contoso обеспечивать постоянство подключения всей сети и оптимизацию подключения к Интернету.
- Основной центр обработки данных полностью виртуализирован на базе решений VMware. Компания использует два узла виртуализации ESXi 6.5 под управлением vCenter Server 6.5.
- Компания Contoso использует управление удостоверениями в Active Directory. Компания Contoso использует DNS-серверы внутренней сети.
- В компании Contoso используется локальный контроллер домена (**contosodc1**).
- Контроллеры домена работают на виртуальных машинах VMware. Контроллеры домена в местных филиалах размещены на физических серверах.
- Приложение SmartHotel360 расположено на нескольких виртуальных машинах (**WEBVM** и **SQLVM**), находящихся на узле VMware ESXi версии 6.5 (**contosohost1.contoso.com**).
- Управление средой VMware осуществляется с vCenter Server 6,5 (**vCenter.contoso.com**), работающей на виртуальной машине.

![Текущая архитектура Contoso](./media/contoso-migration-rehost-vm-sql-managed-instance/contoso-architecture.png)

### <a name="proposed-architecture"></a>Предлагаемая архитектура

В этом сценарии Contoso хочет перенести свое двухуровневое локальное приложение для туристических фирм следующим образом:

- База данных приложения (**SmartHotelDB**) переносится в Управляемый экземпляр Базы данных SQL Azure.
- Внешний интерфейс **WebVM** переносится на виртуальную машину Azure.
- После завершения миграции локальные виртуальные машины в центре обработки данных Contoso будут выведены из эксплуатации.

![Архитектура сценария](./media/contoso-migration-rehost-vm-sql-managed-instance/architecture.png)

### <a name="database-considerations"></a>Рекомендации по базе данных

В ходе проектирования решения специалисты Contoso сравнили функции Базы данных Azure SQL и Управляемого экземпляра SQL Server. Следующие рекомендации помогли вам решить, как использовать Управляемый экземпляр.

- Управляемый экземпляр призван обеспечить практически 100-процентную совместимость с последней версией локального сервера SQL Server. Корпорация Майкрософт рекомендует Управляемый экземпляр для клиентов, работающих SQL Server локально или на виртуальных машинах IaaS, и вы хотите перенести свои приложения в полностью управляемую службу с минимальными изменениями структуры.
- Компания Contoso планирует перенести большое количество приложений из локальной среды в IaaS. Многие из них предоставляются независимыми поставщиками программного обеспечения. Компания Contoso осознает, что использование Управляемый экземпляр обеспечит совместимость базы данных для этих приложений, вместо использования базы данных SQL, которая может не поддерживаться.
- Компания Contoso может выполнить миграцию с переносом на Управляемый экземпляр с помощью полностью автоматизированных Azure Database Migration Service. Подготовив эту службу, Contoso сможет использовать ее при миграции баз данных в будущем.
- SQL Управляемый экземпляр поддерживает агент SQL Server, важный компонент приложения SmartHotel360. Компании Contoso нужна эта совместимость, так как без нее придется заново проектировать планы обслуживания приложения.
- Software Assurance позволит Contoso приобрести Управляемый экземпляр Базы данных SQL по сниженной цене, воспользовавшись Преимуществом гибридного использования Azure для SQL Server. Это позволит компании Contoso сэкономить до 30 % на Управляемом экземпляре.
- SQL Управляемый экземпляр полностью содержится в виртуальной сети, поэтому обеспечивает более высокий уровень изоляции и безопасности данных Contoso. Компания Contoso может пользоваться преимуществами общедоступного облака, сохраняя изолированность среды от публичного сегмента Интернета.
- Управляемый экземпляр поддерживает множество функций безопасности, включая Always-encrypted, динамическое Маскирование данных, безопасность на уровне строк и обнаружение угроз.

### <a name="solution-review"></a>Проверка решения

Специалисты Contoso оценивают предлагаемый дизайн, составляя список плюсов и минусов.

<!-- markdownlint-disable MD033 -->

| **Оценка** | **Сведения** |
| --- | --- |
| **Преимущества** | Интерфейс WEBVM будет перемещен в Azure без изменений, упрощая миграцию. <br><br> Управляемый экземпляр SQL соответствует техническим требованиям и целям компании Contoso. <br><br> Управляемый экземпляр обеспечит 100-процентную совместимость с текущим развертыванием, позволяя компании прекратить использование SQL Server 2008 R2. <br><br> Компания может задействовать свои инвестиции в программу Software Assurance, воспользовавшись Преимуществом гибридного использования Azure для SQL Server и Windows Server. <br><br> Службу Azure Database Migration Service можно будет повторно использовать для миграции в будущем. <br><br> В Управляемый экземпляр Базы данных SQL встроены средства обеспечения отказоустойчивости, которые специалистам Contoso не требуется настраивать. Это гарантия того, что уровень данных больше не является единой точкой отказа. |
| **Недостатки** | WEBVM работает под управлением Windows Server 2008 R2. Эта операционная система поддерживается в Azure, но больше не является поддерживаемой платформой. [Подробнее](https://support.microsoft.com/help/956893). <br><br> Веб-уровень остается единой точкой отработки отказа, а службы по-прежнему предоставляет только WEBVM. <br><br> Компании Contoso потребуется и дальше поддерживать веб-уровень приложения как виртуальную машину, а не переходить на управляемую службу, такую как Служба приложений Azure. <br><br> На уровне данных Управляемый экземпляр может быть не лучшим решением, если компании Contoso требуется настраивать операционную систему или сервер базы данных либо запускать сторонние приложения наряду с SQL Server. Использование SQL Server на виртуальной машине IaaS может обеспечить такую гибкость. |

<!-- markdownlint-enable MD033 -->

### <a name="migration-process"></a>Процесс миграции

Компания Contoso перенесет уровни данных и веб-приложения SmartHotel360 в Azure, выполняя эти действия.

1. У компании уже есть инфраструктура Azure, поэтому ей необходимо добавить всего пару специальных компонентов Azure в свой сценарий.
2. Уровень данных будет перенесен с помощью службы Azure Database Migration Service. Эта служба подключается к локальной виртуальной машине SQL Server через VPN-подключение типа "сеть — сеть", установленное между центром обработки данных Contoso и Azure. Затем служба перенесет базу данных.
3. Веб-уровень будет перенесен с помощью миграции с переносом и сдвигом с помощью службы "миграция Azure". Этот процесс подготовит локальную среду VMware, настроит и включит репликацию, а также осуществит миграцию виртуальных машин в Azure.

     ![Архитектура миграции](./media/contoso-migration-rehost-vm-sql-managed-instance/migration-architecture.png)

### <a name="azure-services"></a>Службы Azure

| Служба | Описание | Стоимость |
| --- | --- | --- |
| [Azure Database Migration Service](https://docs.microsoft.com/azure/dms/dms-overview) | Azure Database Migration Service обеспечивает прозрачную миграцию из нескольких источников баз данных на платформы данных Azure с минимальным временем простоя. | Дополнительные сведения о [поддерживаемых регионах](https://docs.microsoft.com/azure/dms/dms-overview#regional-availability) см. на странице [цен на Database Migration Service](https://azure.microsoft.com/pricing/details/database-migration). |
| [Управляемый экземпляр Базы данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance) | Управляемый экземпляр — это служба управляемой базы данных, которая представляет полностью управляемый экземпляр SQL Server в облаке Azure. Он использует тот же код, что и последняя версия ядра СУБД SQL Server, и имеет новейшие функции, улучшения производительности и исправления системы безопасности. | За использование Управляемых экземпляров Базы данных SQL, выполняемых в Azure, взимается плата на основе емкости. Дополнительные сведения см. в статье [Цены на Базу данных SQL Azure ](https://azure.microsoft.com/pricing/details/sql-database/managed). |
| [Служба "Миграция Azure"](https://docs.microsoft.com/azure/migrate/migrate-services-overview) | Компания Contoso использует службу "Миграция Azure" для оценки виртуальных машин VMware. Служба "Миграция Azure" оценивает миграционную пригодность компьютеров. Она обеспечивает оценку размера и стоимости для работы в Azure. | Начиная с мая 2018 года "Миграция Azure" — это бесплатная служба. |

## <a name="prerequisites"></a>Предварительные условия

Компания Contoso и другие пользователи должны отвечать следующим предварительным условиям этого сценария.

<!-- markdownlint-disable MD033 -->

| Требования | Сведения |
| --- | --- |
| **Подписка Azure.** | Вы должны были создать подписку, когда выполняли оценку в первой статье этой серии. Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись Azure](https://azure.microsoft.com/pricing/free-trial). <br><br> Если вы создаете бесплатную учетную запись, вы являетесь администратором своей подписки и можете выполнять любые действия. <br><br> Если вы используете существующую подписку и вы не являетесь администратором подписки, необходимо обратиться к администратору, чтобы назначить вам разрешения владельца или участника для необходимых групп ресурсов и ресурсов. |
| **Инфраструктура Azure** | Contoso настраивает свою инфраструктуру Azure, как описано в статье [Развертывание инфраструктуры Azure для миграции в Contoso](./contoso-migration-infrastructure.md). |
| **Локальные серверы** | На локальном сервере vCenter Server должна быть установлена версия 5,5, 6,0 или 6,5. <br><br> Узел ESXi с версией 5,5, 6,0 или 6,5. <br><br> Одна или несколько виртуальных машин VMware, которые выполняются на узле ESXi. |
| **Локальные виртуальные машины** | [Ознакомьтесь со списком виртуальных машин Linux](https://docs.microsoft.com/azure/virtual-machines/linux/endorsed-distros), которые рекомендованы к использованию в Azure. |
| **Database Migration Service** | Для Azure Database Migration Service требуется [совместимое локальное VPN-устройство](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpn-devices). <br><br> Необходимо настроить локальное VPN-устройство. Оно должно иметь внешний общедоступный IPv4-адрес. Этот адрес не может быть за устройством преобразования сетевых адресов (NAT). <br><br> Убедитесь, что у вас есть доступ к локальной базе данных SQL Server. <br><br> Брандмауэр Windows должен иметь доступ к ядру исходной СУБД. Дополнительные сведения о [настройке брандмауэра Windows для доступа к ядру СУБД](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-windows-firewall-for-database-engine-access). <br><br> Если перед вашим компьютером базы данных есть брандмауэр, добавьте правила, разрешающие доступ к базе данных и файлам через SMB-порт 445. <br><br> Учетные данные, используемые для подключения к исходному экземпляру сервера SQL Server и целевому Управляемому экземпляру, должны принадлежать к серверной роли sysadmin. <br><br> Необходима сетевая папка в локальной базе данных, которую Azure Database Migration Service сможет использовать для резервного копирования базы данных-источника. <br><br> Убедитесь, что учетная запись службы, от имени которой выполняется исходный экземпляр SQL Server, имеет разрешения на запись для этой сетевой папки. <br><br> Запишите имя пользователя и пароль учетной записи Windows, которой предоставлены полные права доступа к этой сетевой папке. Служба Azure Database Migration Service олицетворяет пользователя с этими учетными данными, чтобы отправить файлы резервных копий в контейнер службы хранилища Azure. <br><br> В процессе установки SQL Server Express для протокола TCP/IP устанавливается **отключенное состояние** по умолчанию. Убедитесь, что он включен. |

<!-- markdownlint-enable MD033 -->

## <a name="scenario-steps"></a>Шаги выполнения сценария

Настройку развертывания компания Contoso планирует осуществлять следующим образом.

> [!div class="checklist"]
>
> - **Шаг 1. Подготовка Управляемый экземпляр Базы данных SQL.** Компании Contoso необходим существующий управляемый экземпляр, в который будет перенесена локальная база данных SQL Server.
> - **Шаг 2. Подготовка Azure Database Migration Service.** Компании Contoso необходимо зарегистрировать поставщик миграции базы данных, создать экземпляр, а затем создать проект Azure Database Migration Service. Специалистам Contoso также необходимо настроить универсальный код ресурса (URI) подписанного URL-адреса (SAS) для Azure Database Migration Service. URI SAS предоставляет делегированный доступ к ресурсам в учетной записи хранения компании Contoso, поэтому компания может предоставлять ограниченные разрешения к объектам в хранилище. Специалисты компании настроят универсальный код ресурса (URI) подписанного URL-адреса, чтобы служба Azure Database Migration Service могла получить доступ к контейнеру учетной записи хранения, в который служба передает файлы резервных копий SQL Server.
> - **Шаг 3. Подготовка Azure для миграции Azure: миграция сервера.** Специалисты компании Contoso добавляют средство миграции серверов в свой проект Миграции Azure.
> - **Шаг 4. Подготовка локальной среды VMware для миграции в Azure: миграция сервера.** Они подготавливают учетные записи для обнаружения ВМ и подготавливают подключение к виртуальным машинам Azure после миграции.
> - **Шаг 5. репликация виртуальных машин.** Специалисты компании Contoso настраивают репликацию и запускают репликацию виртуальных машин в хранилище Azure.
> - **Шаг 6. Перенос базы данных с помощью Azure Database Migration Service.** Contoso проводит миграцию базы данных.
> - **Шаг 7. Миграция виртуальной машины с помощью службы "миграция Azure": миграция сервера.** Они выполняют тестовую миграцию, чтобы убедиться, что все работает, а затем выполните полную миграцию, чтобы переместить виртуальные машины в Azure.

## <a name="step-1-prepare-a-sql-database-managed-instance"></a>Шаг 1. Подготовка Управляемого экземпляра базы данных SQL Azure

Чтобы настроить управляемый экземпляр Базы данных SQL Azure, специалистам компании Contoso требуется подсеть, которая соответствует следующим требованиям.

- Подсеть должна быть выделенной. Она должна быть пустой и не содержать другие облачные службы. Подсеть не должна быть подсетью шлюза.
- После создания Управляемого экземпляра компания не должна добавлять ресурсы в подсеть.
- С подсетью не должна быть связана группа безопасности сети.
- Подсеть должна иметь определяемую пользователем таблицу маршрутов. Должен быть назначен единственный интернет-маршрут следующего прыжка 0.0.0.0/0.
- Если для виртуальной сети указан необязательный настраиваемый DNS-сервер, виртуальный IP-адрес `168.63.129.16` для рекурсивных арбитров конфликтов в Azure должен быть добавлен в список. Узнайте, как [настроить пользовательский DNS для управляемый экземпляр базы данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-custom-dns).
- С подсетью не должна быть связана конечная точка службы (служба хранилища или база данных SQL). Конечные точки службы должны быть отключены в виртуальной сети.
- Для подсети необходимо как минимум 16 IP-адресов. Дополнительные сведения см. в разделе [Определение размера подсети для управляемого экземпляра](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-vnet-configuration).
- В гибридной среде Contoso требуются пользовательские параметры DNS. Компания Contoso настроит параметры DNS для использования одного или нескольких серверов DNS Azure компании. Дополнительные сведения о [настройке DNS](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-custom-dns).

### <a name="set-up-a-virtual-network-for-the-managed-instance"></a>Настройка виртуальной сети в управляемом экземпляре

Администраторы Contoso настраивают виртуальную сеть следующим образом:

1. Они создают виртуальную сеть (**VNET-SQLMI-EU2**) в основном регионе "Восточная часть США 2". Она добавит виртуальную сеть для группы ресурсов **ContosoNetworkingRG**.
2. Они назначают адресное пространство 10.235.0.0/24. Они гарантируют, что диапазон не пересекается с другими сетями в организации.
3. Они добавят к сети две подсети:
    - **Склми-DS-EUS2** (10.235.0.0.25).
    - **Склми-видели-EUS2** (10.235.0.128/29). Эта подсеть используется для присоединения каталога в Управляемом экземпляре.

      ![Управляемый экземпляр – Создание виртуальной сети](./media/contoso-migration-rehost-vm-sql-managed-instance/mi-vnet.png)

4. После развертывания виртуальной сети и подсетей они назначают сетям ранги следующим образом:

    - Согласовывается ранг **VNET-SQLMI-EUS2** и **VNET-HUB-EUS2** (центр виртуальной сети для восточной части США 2).
    - Одноранговые узлы **vnet-склми-EUS2** с **vnet-Production-EUS2** (производственная сеть).

      ![Пиринг сетей](./media/contoso-migration-rehost-vm-sql-managed-instance/mi-peering.png)

5. Они задают пользовательские параметры DNS. Служба доменных имен (DNS) сначала указывает на контроллеры домена Azure компании Contoso. Azure DNS является вторичной. Контроллеры домена Contoso Azure находятся в следующих расположениях.

    - Находится в подсети "Production **-DC-EUS2** " в рабочей сети восточной части США 2 (**vnet-произв-EUS2**).
    - **CONTOSODC3** адрес: 10.245.42.4.
    - **CONTOSODC4** адрес: 10.245.42.5.
    - Сопоставитель Azure DNS: 168.63.129.16.

      ![DNS-серверы сети](./media/contoso-migration-rehost-vm-sql-managed-instance/mi-dns.png)

**Требуется дополнительная помощь?**

- Ознакомьтесь с [обзором управляемый экземпляр базы данных SQL](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance).
- См. раздел [Создание виртуальной сети для управляемых экземпляров](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-vnet-configuration).
- См. раздел [Создание, изменение и удаление пиринга в виртуальной сети](https://docs.microsoft.com/azure/virtual-network/virtual-network-manage-peering).
- См. раздел [Включение доменных служб Azure Active Directory](https://docs.microsoft.com/azure/active-directory-domain-services/tutorial-create-instance).

### <a name="set-up-routing"></a>Настройка маршрутизации

Управляемый экземпляр размещается в частной виртуальной сети. Компании Contoso необходима таблица маршрутов для виртуальной сети, чтобы взаимодействовать со службой управления Azure. Если виртуальная сеть не может связаться со службой, которая ею управляет, виртуальная сеть становится недоступной.

Компания Contoso принимает во внимание следующие факторы.

- Таблица маршрутизации с набором правил (маршрутов), указывающих, как отправляемые пакеты с Управляемого экземпляра должны маршрутизироваться в виртуальной сети.
- Таблица маршрутов связана с подсетями, в которых развернуты управляемые экземпляры. Каждый пакет, который оставляет подсеть, обрабатывается на основе связанной таблицы маршрутизации.
- Подсеть может быть связана только с одной таблицей маршрутизации.
- Никаких дополнительных затрат при создании таблицы маршрутизации в Microsoft Azure не требуется.

 Чтобы настроить маршрутизацию, администраторы Contoso выполняют следующие действия:

1. Они создают определяемую пользователем таблицу маршрутов в группе ресурсов **ContosoNetworkingRG**.

    ![Таблица маршрутов](./media/contoso-migration-rehost-vm-sql-managed-instance/mi-route-table.png)

2. Чтобы соответствовать требованиям Управляемого экземпляра, после развертывания таблицы маршрутизации (**MIRouteTable**) они добавляют маршрут с префиксом адреса 0.0.0.0/0. Параметр **Тип следующего прыжка** установлен как **Интернет**.

    ![Префикс таблицы маршрутизации](./media/contoso-migration-rehost-vm-sql-managed-instance/mi-route-table-prefix.png)

3. Они связывают таблицу маршрутов с подсетью **SQLMI-DB-EUS2** (в сети **VNET-SQLMI-EUS2**).

    ![Подсеть таблицы маршрутизации](./media/contoso-migration-rehost-vm-sql-managed-instance/mi-route-table-subnet.png)

**Требуется дополнительная помощь?**

См. в разделе [Создание таблицы маршрутов и маршрута](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-get-started).

### <a name="create-a-managed-instance"></a>Создание управляемого экземпляра

Теперь администраторы Contoso могут подготовить Управляемый экземпляр Базы данных SQL.

1. Так как Управляемый экземпляр работает в качестве бизнес-приложения, они развертывают его в основном регионе "Восточная часть США 2". Они добавляют Управляемый экземпляр в группу ресурсов **ContosoRG**.
2. Они выбирают ценовую категорию и размер вычислений и хранилище для экземпляра. Дополнительные сведения см. в статье [Цены на Базу данных SQL Azure ](https://azure.microsoft.com/pricing/details/sql-database/managed).

    ![Базы данных SQL](./media/contoso-migration-rehost-vm-sql-managed-instance/mi-create.png)

3. После развертывания Управляемый экземпляр в группе ресурсов **ContosoRG** появятся два новых ресурса:

    - Виртуальный кластер, если у Contoso есть несколько Управляемых экземпляров.
    - Управляемый экземпляр Базы данных SQL Azure.

      ![Базы данных SQL](./media/contoso-migration-rehost-vm-sql-managed-instance/mi-resources.png)

**Требуется дополнительная помощь?**

См. в разделе [Создание управляемого экземпляра базы данных SQL Azure на портале Azure](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-get-started).

## <a name="step-2-prepare-the-azure-database-migration-service"></a>Шаг 2. Подготовка Azure Database Migration Service

Чтобы подготовить службу Azure Database Migration Service, администраторам Contoso необходимо выполнить следующее.

- Зарегистрировать поставщик Azure Database Migration Service в Azure.
- Предоставить Azure Database Migration Service доступ к службе хранилища Azure для передачи файлов резервных копий, используемых для переноса базы данных. Чтобы предоставить доступ к службе хранилища Azure, они создают контейнер хранилища BLOB-объектов Azure. Они создают URI SAS для контейнера хранилища BLOB-объектов.
- Администраторы создают проект Azure Database Migration Service.

Затем выполняются указанные ниже действия.

1. Они регистрируют службу миграции баз данных в своей подписке.
    ![Database Migration Service: регистрация](./media/contoso-migration-rehost-vm-sql-managed-instance/dms-subscription.png)

2. Они создают контейнер больших двоичных объектов. Компания Contoso создает универсальный код ресурса (URI) подписанного URL-адреса, чтобы Azure Database Migration Service имела доступ к этому контейнеру.

    ![Database Migration Service: создание URI SAS](./media/contoso-migration-rehost-vm-sql-managed-instance/dms-sas.png)

3. Они создают экземпляр Azure Database Migration Service.

    ![Database Migration Service: создание экземпляра](./media/contoso-migration-rehost-vm-sql-managed-instance/dms-instance.png)

4. Они размещают экземпляр Azure Database Migration Service в подсети **PROD-DC-EUS2** виртуальной сети **VNET-PROD-DC-EUS2**.
    - Azure Database Migration Service размещается там, так как эта служба должна находиться в виртуальной сети с доступом к локальной виртуальной машине SQL Server через VPN-шлюз.
    - **Виртуальная сеть-EUS2** — это пиринг между **vnet-Hub-EUS2** и может использовать удаленные шлюзы. Параметр **Использовать удаленные шлюзы** гарантирует, что Azure Database Migration Service может при необходимости обмениваться данными.

        ![Database Migration Service: настройка сети](./media/contoso-migration-rehost-vm-sql-managed-instance/dms-network.png)

**Требуется дополнительная помощь?**

- Узнайте, как [настроить Azure Database Migration Service](https://docs.microsoft.com/azure/dms/quickstart-create-data-migration-service-portal).
- Узнайте, как [создать и использовать подписанный URL-адрес](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-shared-access-signature-part-2).

## <a name="step-3-prepare-azure-for-the-azure-migrate-server-migration-tool"></a>Шаг 3. Подготовка Azure к работе с миграцией Azure: средство миграции сервера

Ниже перечислены компоненты Azure, которые необходимы для миграции виртуальных машин компании Contoso в Azure.

- Виртуальная сеть, в которой будут находиться виртуальные машины Azure при их создании во время миграции.
- Средство миграции Azure: подготовка к переходу на сервер.

Специалисты компании Contoso настроили их указанным ниже образом.

1. **Настройка сети:** Компания Contoso уже настроила сеть, которая может быть для службы "миграция Azure": миграция сервера при [развертывании инфраструктуры Azure](./contoso-migration-infrastructure.md)

    - SmartHotel360 — это рабочее приложение, и виртуальные машины будут перенесены в рабочую сеть Azure (VNET-PROD-EUS2) в основном регионе "Восточная часть США 2".
    - Обе виртуальные машины будут размещены в группе ресурсов ContosoRG, которая используется для рабочих ресурсов.
    - Интерфейсная виртуальная машина приложения (WEBVM) будет перенесена в интерфейсную подсеть (PROD-FE-EUS2) в рабочей сети.
    - Виртуальная машина базы данных приложения (SQLVM) будет перенесена в подсеть базы данных (PROD-DB-EUS2) в рабочей сети.

## <a name="step-4-prepare-on-premises-vmware-for-azure-migrate-server-migration"></a>Шаг 4. Подготовка локальной среды VMware для миграции в Azure: миграция сервера

Ниже перечислены компоненты Azure, которые необходимы для миграции виртуальных машин компании Contoso в Azure.

- Виртуальная сеть, в которой будут находиться виртуальные машины Azure при их создании во время миграции.
- Подготовка и Настройка средства миграции сервера Azure (OVA).

Специалисты компании Contoso настроили их указанным ниже образом.

1. Настройка сети — Contoso уже настроена сеть, которая может быть для службы "миграция Azure": миграция сервера при [развертывании инфраструктуры Azure](./contoso-migration-infrastructure.md)

    - SmartHotel360 — это рабочее приложение, и виртуальные машины будут перенесены в рабочую сеть Azure (VNET-PROD-EUS2) в основном регионе "Восточная часть США 2".
    - Обе виртуальные машины будут размещены в группе ресурсов ContosoRG, которая используется для рабочих ресурсов.
    - Интерфейсная виртуальная машина приложения (WEBVM) будет перенесена в интерфейсную подсеть (PROD-FE-EUS2) в рабочей сети.
    - Виртуальная машина базы данных приложения (SQLVM) будет перенесена в подсеть базы данных (PROD-DB-EUS2) в рабочей сети.

2. Выполните подготовку к работе средства миграции Azure: Server Migration Tool.

    - В службе "миграция Azure" Скачайте образ OVA и импортируйте его в VMWare.

        ![Скачивание файла OVA](./media/contoso-migration-rehost-vm/migration-download-ova.png)

    - Запустите импортированное изображение и настройте средство, включая следующие шаги:

      - Настройте необходимые компоненты.

        ![Настройка средства](./media/contoso-migration-rehost-vm/migration-setup-prerequisites.png)

      - Наведите указатель на инструмент на подписку Azure.

        ![Настройка средства](./media/contoso-migration-rehost-vm/migration-register-azure.png)

      - Задайте учетные данные VMWare vCenter.

        ![Настройка средства](./media/contoso-migration-rehost-vm/migration-vcenter-server.png)

      - Добавьте учетные данные для обнаружения на основе Linux или Windows.

        ![Настройка средства](./media/contoso-migration-rehost-vm/migration-credentials.png)

3. После настройки для этого средства потребуется некоторое время для перечисления всех виртуальных машин. После завершения вы увидите, что они заполняются в средстве миграции Azure в Azure.

**Требуется дополнительная помощь?**

Дополнительные сведения о настройке [средства миграции Azure: Server Migration Tool](https://docs.microsoft.com/azure/migrate/migrate-services-overview#azure-migrate-server-migration-tool).

### <a name="prepare-on-premises-vms"></a>Подготовка локальных виртуальных машин

После миграции компания Contoso хочет подключиться к виртуальным машинам Azure и разрешить Azure управлять виртуальными машинами. Для этого перед миграцией администраторы компании Contoso выполняют указанные ниже действия.

1. Для доступа через Интернет они делают следующее.

    - Включите RDP или SSH на локальной виртуальной машине перед миграцией.
    - Проверяют, добавлены ли правила TCP и UDP для профиля **Общедоступный**.
    - Убедитесь, что протокол RDP или SSH разрешен в брандмауэре операционной системы.

2. Для доступа через межсайтовый VPN они делают указанное ниже.

    - Включите RDP или SSH на локальной виртуальной машине перед миграцией.
    - Убедитесь, что протокол RDP или SSH разрешен в брандмауэре операционной системы.
    - Для Windows задайте для политики SAN операционной системы на локальной виртуальной машине значение **OnlineAll**.

3. Установите агент для Azure:

    - [Агент Linux для Azure](https://docs.microsoft.com/azure/virtual-machines/extensions/agent-linux)
    - [Агент Azure для Windows](https://docs.microsoft.com/azure/virtual-machines/extensions/agent-windows)

4. Прочее

   - Для Windows на виртуальной машине не должно быть ожидающих обновлений Windows при активации миграции. Если есть такие обновления, не удастся войти в систему на виртуальной машине до их завершения.
   - После миграции они могут проверить **диагностику загрузки** , чтобы просмотреть снимок экрана виртуальной машины. Если не удается сделать это, необходимо проверить, работает ли виртуальная машина, и изучить [советы по устранению неполадок](https://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).

5. Требуется дополнительная помощь?

   - Дополнительные сведения о [подготовке виртуальных машин к миграции](https://docs.microsoft.com/azure/migrate/contoso-migration-rehost-vm#prepare-vms-for-migration).

## <a name="step-5-replicate-the-on-premises-vms"></a>Шаг 5. репликация локальных виртуальных машин

Чтобы можно было запустить миграцию в Azure, администраторам компании Contoso потребуется настроить и включить репликацию.

По завершении обнаружения можно начать репликацию виртуальных машин VMware в Azure.

1. В проекте службы "Миграция Azure" щелкните **Серверы** и в разделе **Azure Migrate: Server Migration** (Миграция Azure: миграция сервера) выберите **Репликация**.

    ![Репликация виртуальных машин](./media/contoso-migration-rehost-vm/select-replicate.png)

2. В разделе **Реплицировать** выберите **Параметры исходного кода** > **Ваши компьютеры виртуализированы?** и **Yes, with VMware vSphere Hypervisor** (Да, с помощью гипервизора VMware vSphere).

3. В разделе **Локальное устройство** выберите имя устройства Миграции Azure, которое вы настроили, и нажмите кнопку **ОК**.

    ![Параметры источника](./media/contoso-migration-rehost-vm/source-settings.png)

4. В разделе **Виртуальные машины** выберите виртуальные машины, которые необходимо реплицировать.
    - Если вы выполнили оценку для виртуальных машин, вы можете применить рекомендации по выбору размера виртуальной машины и типу диска ("Премиум" или "Стандарт") из результатов оценки. Для этого в поле **Импортировать параметры миграции из средства оценки Миграции Azure?** выберите вариант **Да**.
    - Если вы не проводили оценку или не хотите использовать параметры оценки, выберите вариант **Нет**.
    - Если вы решили использовать оценку, выберите группу виртуальных машин и имя оценки.

    ![Выбор оценки](./media/contoso-migration-rehost-vm/select-assessment.png)

5. В разделе **Виртуальные машины** найдите виртуальные машины и отметьте каждую виртуальную машину, которую вы хотите перенести. Выберите **Next: Целевые параметры**.

6. В разделе **Целевые параметры** выберите подписку и целевой регион, в который вы хотите выполнить миграцию, а также укажите группу ресурсов, в которой будут находиться виртуальные машины Azure после миграции. В разделе **Виртуальная сеть** выберите виртуальную сеть или подсеть Azure, к которой будут подключены виртуальные машины Azure после миграции.

7. В **преимущество гибридного использования Azure**выберите следующее:

    - выберите вариант **Нет**, если вы не хотите применять Преимущество гибридного использования Azure. Затем нажмите кнопку **Далее**.
    - Выберите вариант **Да**, если у вас есть компьютеры с Windows Server, на которые распространяются активные подписки Software Assurance или Windows Server, и вы хотите применить это преимущество к компьютерам, которые вы переносите. Затем нажмите кнопку **Далее**.

8. В разделе **Вычисления** просмотрите имя виртуальной машины, размер, тип диска ОС и группу доступности. Виртуальные машины должны соответствовать [требованиям Azure](https://docs.microsoft.com/azure/migrate/migrate-support-matrix-vmware#vmware-requirements).

    - **Размер виртуальной машины:** Если вы используете рекомендации по оценке, раскрывающийся список размер виртуальной машины будет содержать рекомендуемый размер. В противном случае Миграция Azure выбирает размер в зависимости от ближайшего совпадения в подписке Azure. В качестве альтернативы выберите размер вручную в разделе **Размер виртуальной машины Azure**.
    - **Диск ОС:** Укажите диск операционной системы (загрузочный) для виртуальной машины. Диск ОС — это диск с загрузчиком операционной системы и установщиком.
    - **Группа доступности:** Если после миграции виртуальная машина должна находиться в группе доступности Azure, укажите набор. Группа должна находиться в целевой группе ресурсов, которую вы указываете для миграции.

9. В разделе **Диски** укажите, следует ли реплицировать диски виртуальных машин в Azure, и выберите тип диска (SSD или HDD (цен. категория "Стандартный") или управляемые диски (цен. категория "Премиум")) в Azure. Затем нажмите кнопку **Далее**.
    - Диски можно исключить из репликации.
    - Если вы исключите диски, они не будут присутствовать на виртуальной машине Azure после миграции.

10. В разделе **Review and start replication** (Просмотр и запуск репликации) просмотрите параметры и нажмите кнопку **Реплицировать**, чтобы начать первоначальную репликацию серверов.

> [!NOTE]
> Вы можете обновить параметры репликации в любое время до начала репликации в разделе **Управление** > **Репликация компьютеров**. Настройки невозможно изменить после начала репликации.

## <a name="step-6-migrate-the-database-using-the-azure-database-migration-service"></a>Шаг 6. Перенос базы данных с помощью Azure Database Migration Service

Администраторам Contoso необходимо создать проект Azure Database Migration Service, а затем перенести базу данных.

### <a name="create-an-azure-database-migration-service-project"></a>Создание проекта Azure Database Migration Service

1. Они создают проект Azure Database Migration Service. В качестве типа исходного сервера они выбирают **SQL Server**, а в качестве цели — **Управляемый экземпляр Базы данных SQL Azure**.

     ![Database Migration Service: создание нового проекта](./media/contoso-migration-rehost-vm-sql-managed-instance/dms-project.png)

2. Откроется мастер миграции.

### <a name="migrate-the-database"></a>Миграция базы данных

1. В мастере миграции они указывают исходную виртуальную машину, на которой находится локальная база данных. Они вводят учетные данные для доступа к базе данных.

    ![Database Migration Service: сведения об источнике](./media/contoso-migration-rehost-vm-sql-managed-instance/dms-wizard-source.png)

2. Они выбирают базу данных для миграции (**смарсотел. Registration**):

    ![Database Migration Service: выбор баз данных-источников](./media/contoso-migration-rehost-vm-sql-managed-instance/dms-wizard-source-db.png)

3. В качестве цели они указывают имя Управляемого экземпляра в Azure и учетные данные для доступа.

    ![Database Migration Service: сведения о целевом объекте](./media/contoso-migration-rehost-vm-sql-managed-instance/dms-target-details.png)

4. В **новом действии**  >  **запустить миграцию**указываются параметры для запуска миграции:
    - Источник и цель учетных данных.
    - База данных для переноса.
    - Сетевая папка, созданная на локальной виртуальной машине. Azure Database Migration Service создает резервные копии источника для этого ресурса.
        - Учетная запись службы, которая выполняет исходный экземпляр SQL Server, должна иметь права записи для этой общей папки.
        - Должен использоваться полный путь FQDN к общей папке.
    - Универсальный код ресурса (URI) подписанного URL-адреса, который позволяет Azure Database Migration Service обращаться к контейнеру учетной записи хранения для передачи файлов резервных копий, используемых для переноса.

        ![Database Migration Service: настройка параметров миграции](./media/contoso-migration-rehost-vm-sql-managed-instance/dms-migration-settings.png)

5. Они сохраняют параметры миграции и запускают ее.
6. В разделе **Обзор** они отслеживают состояние миграции.

    ![Database Migration Service: мониторинг](./media/contoso-migration-rehost-vm-sql-managed-instance/dms-monitor1.png)

7. После завершения миграции они проверяют наличие целевых баз данных в Управляемом экземпляре.

    ![Database Migration Service: проверка миграции базы данных](./media/contoso-migration-rehost-vm-sql-managed-instance/dms-monitor2.png)

## <a name="step-7-migrate-the-vms-with-azure-migrate-server-migration"></a>Шаг 7. Миграция виртуальных машин с помощью службы "миграция Azure": миграция сервера

Администраторы Contoso выполняют быструю тестовую миграцию и проверяют, что виртуальная машина работает правильно, а затем переносит виртуальную машину.

### <a name="run-a-test-migration"></a>Выполнение тестовой миграции

1. Последовательно выберите разделы **Цели миграции** > **Серверы** > **Azure Migrate: Server Migration** (Миграция Azure: миграция сервера) щелкните **Тестовая миграция серверов выполнена**.

     ![Тестовая миграция серверов](./media/contoso-migration-rehost-linux-vm/test-migrated-servers.png)

2. Щелкните правой кнопкой мыши виртуальную машину, чтобы выполнить тест, и выберите **Тестовая миграция**.

    ![Тестовая миграция](./media/contoso-migration-rehost-linux-vm/test-migrate.png)

3. В разделе **Тестовая миграция** выберите виртуальную сеть Azure, в которой будет находиться виртуальная машина Azure после миграции. Мы рекомендуем использовать непродукцию-виртуальную сеть.
4. Запустится задание **Тестовая миграция**. Отслеживайте задание и уведомления на портале.
5. После завершения миграции просмотрите перенастроенную виртуальную машину Azure в разделе **Виртуальные машины** на портале Azure. Имя машины содержит суффикс **-Test**.
6. После завершения теста щелкните правой кнопкой мыши виртуальную машину Azure в разделе **Репликация компьютеров** и выберите **Очистка тестовой миграции**.

    ![Очистка миграции](./media/contoso-migration-rehost-linux-vm/clean-up.png)

### <a name="migrate-the-vms"></a>Миграция виртуальных машин

Теперь администраторы Contoso выполняют полную миграцию для завершения перемещения.

1. В проекте "Миграция Azure" щелкните **Серверы** > **Azure Migrate: Server Migration** (Миграция Azure: миграция сервера) и выберите **Репликация серверов**.

    ![Репликация серверов](./media/contoso-migration-rehost-linux-vm/replicating-servers.png)

2. В области **Репликация компьютеров** щелкните правой кнопкой мыши виртуальную машину и выберите **Миграция**.
3. В разделе **Миграция** > **Shut down virtual machines and perform a planned migration with no data loss** (Завершить работу виртуальных машин и выполнить запланированную миграцию без потери данных?) выберите вариант **Да** > **ОК**.
    - По умолчанию Миграция Azure выключает локальную виртуальную машину и запускает репликацию по требованию для синхронизации любых изменений виртуальной машины, которые произошли с момента последней репликации. Это гарантирует отсутствие потери данных.
    - Если вы не хотите завершать работу виртуальной машины, выберите **нет**.
4. Запустится задание миграции виртуальной машины. Отслеживайте задание в уведомлениях Azure.
5. После завершения работы вы можете просматривать виртуальную машину и управлять ею на странице **Виртуальные машины**.
6. Наконец, они обновляют записи DNS для **WEBVM** на одном из контроллеров домена contoso.

### <a name="update-the-connection-string"></a>Обновление строки подключения

На последнем этапе процесса миграции администраторы Contoso обновляют строку подключения приложения, чтобы она указывала на перенесенную базу данных, запущенную в Управляемом экземпляре Contoso.

1. В портал Azure они находят строку подключения, выбрав **Параметры**  >  **строки подключения**.

    ![Строки подключения](./media/contoso-migration-rehost-vm-sql-managed-instance/failover4.png)

2. Они указывают в строке имя пользователя и пароль Управляемого экземпляра Базы данных SQL.
3. После настройки строки они заменяют текущую строку подключения в файле web.config приложения.
4. После обновления файла и его сохранения они перезапускают IIS на WEBVM, выполнив команду `iisreset /restart` в окне командной строки.
5. После перезапуска служб IIS приложение использует базу данных, запущенную в Управляемом экземпляре Базы данных SQL.
6. На этом этапе они могут завершить работу локальной машины SQLVM. Миграция завершена.

**Требуется дополнительная помощь?**

- Узнайте, как [выполнить тестовую отработку отказа](https://docs.microsoft.com/azure/site-recovery/tutorial-dr-drill-azure).
- Узнайте, как [создать план восстановления](https://docs.microsoft.com/azure/site-recovery/site-recovery-create-recovery-plans).
- См. в разделе [Отработка отказа в Site Recovery](https://docs.microsoft.com/azure/site-recovery/site-recovery-failover).

## <a name="clean-up-after-migration"></a>Очистка после миграции

После завершения миграции приложение SmartHotel360, которое выполнялось на виртуальной машине Azure и базе данных SmartHotel360, доступно в Управляемом экземпляре Базы данных SQL Azure.

Теперь компании Contoso потребуется предпринять следующее задачи очистки.

- Удалить машину WEBVM из реестра сервера vCenter Server.
- Удалить машину SQLVM из реестра сервера vCenter Server.
- Удалить машины WEBVM и SQLVM из локальных заданий резервного копирования.
- Обновить внутренние документы и отразить в них новое расположение и IP-адреса WEBVM.
- Удалить SQLVM из внутренней документации. Кроме того компания Contoso может пересмотреть документацию, чтобы показать, что SQLVM удалена и больше не находится в реестре виртуальной машины.
- Просмотреть все ресурсы, которые взаимодействуют с выведенными из эксплуатации виртуальными машинами. Обновить все соответствующие параметры или документы согласно новой конфигурации.

## <a name="review-the-deployment"></a>Проверка развертывания

Теперь, когда выполняется миграция ресурсов в Azure, компании Contoso необходимо полностью ввести в эксплуатацию и защитить свою новую инфраструктуру.

### <a name="security"></a>Безопасность

Специалисты по безопасности Contoso рассматривают виртуальные машины Azure и Управляемый экземпляр Базы данных SQL, чтобы проверить проблемы безопасности и их реализацию.

- Участники команды проверяют группы безопасности сети, которые используются для управления доступом к виртуальной машине. Группы безопасности сети помогают убедиться, что только разрешенный трафик можно передавать в приложение.
- Команда безопасности Contoso также анализирует возможность защиты данных на диске с помощью шифрования дисков Azure и Key Vault Azure.
- Команда включает обнаружение угроз в Управляемом экземпляре. Обнаружение угроз передает оповещения в службу безопасности или службу поддержки Contoso для открытия билета, если обнаружена угроза. Дополнительные сведения см. в разделе [Обнаружение угроз в управляемом экземпляре Базы данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-threat-detection).

     ![Безопасность Управляемого экземпляра — обнаружение угроз](./media/contoso-migration-rehost-vm-sql-managed-instance/mi-security.png)

Дополнительные сведения см. в разделе [Рекомендации по безопасности для рабочих нагрузок IaaS в Azure](https://docs.microsoft.com/azure/security/fundamentals/iaas).

### <a name="bcdr"></a>Непрерывность бизнес-процессов и аварийное восстановление

Чтобы обеспечить непрерывность бизнес-процессов и аварийное восстановление (BCDR), Contoso выполняет следующие действия:

- Безопасное хранение данных. Специалисты Contoso выполняют резервное копирование данных, содержащихся в виртуальных машинах, с помощью службы Azure Backup. [Подробнее](https://docs.microsoft.com/azure/backup/backup-overview).
- Поддержание работы приложений. Специалисты компании Contoso реплицируют виртуальные машины приложения в дополнительный регион Azure с помощью Site Recovery. [Подробнее](https://docs.microsoft.com/azure/site-recovery/azure-to-azure-quickstart).
- Специалисты Contoso узнают больше о том, как контролировать Управляемый экземпляр SQL, в том числе [резервное копирование баз данных](https://docs.microsoft.com/azure/sql-database/sql-database-automated-backups).

### <a name="licensing-and-cost-optimization"></a>Лицензирование и оптимизация затрат

- Компания Contoso имеет существующие лицензирование для WEBVM. Чтобы воспользоваться преимуществами цен предложения "Преимущества гибридного использования Azure", компания Contoso преобразует существующую виртуальную машину Azure.
- Contoso будет использовать службу " [Управление затратами Azure](https://azure.microsoft.com/services/cost-management) ", чтобы убедиться, что они находятся в бюджете, УСТАНОВЛЕНном ИТ – лидером.

## <a name="conclusion"></a>Заключение

В этой статье компания Contoso повторно размещает приложение SmartHotel360 в Azure, переключая клиентскую виртуальную машину приложения в Azure с помощью службы "миграция Azure". Как компания Contoso выполняет миграцию локальной базы данных в Управляемый экземпляр Базы данных SQL Azure с помощью службы Azure Database Migration Service.
