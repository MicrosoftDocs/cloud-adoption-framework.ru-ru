---
title: Масштабирование миграции в Azure
description: Используйте платформу внедрения облачных технологий для Azure, чтобы научиться планировать и выполнять миграцию в Azure.
author: BrianBlanchard
ms.author: brblanch
ms.date: 07/01/2020
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: migrate
services: azure-migrate
ms.openlocfilehash: 97f36a7d97eb27e831591703a5cb07b6240d30ce
ms.sourcegitcommit: 07d56209d56ee199dd148dbac59671cbb57880c0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2020
ms.locfileid: "88877489"
---
<!-- docsTest:casing Hanu Scalr ARO POC Y/N None/Some/Severe Rehost/Refactor/Rearchitect/Rebuild -->

<!-- cSpell:ignore VHDs autosnooze unsnooze Hanu Scalr -->

# <a name="scale-a-migration-to-azure"></a>Масштабирование миграции в Azure

В этой статье показано, как вымышленная компания Contoso выполняет масштабную миграцию в Azure. Компания считает, как спланировать и выполнить миграцию более 3 000 рабочих нагрузок, 8 000 баз данных и 10 000 виртуальных машин (ВМ).

## <a name="business-drivers"></a>Бизнес-факторы

Совместными усилиями ИТ-руководство и деловые партнеры определили указанные ниже цели этой миграции.

- **Устраните бизнес-рост.** По мере развития компании Contoso растет нагрузка на локальные системы и инфраструктуру.
- **Повышение эффективности.** Contoso необходимо удалить ненужные процедуры и оптимизировать процессы для разработчиков и пользователей. Бизнес нуждается в том, чтобы ИТ были быстрыми и чтобы не тратить время или деньги, обеспечивая более высокие требования клиентов.
- **Повышение гибкости.** ИТ-отдел компании Contoso должен проявлять большую гибкость в отношении потребностей бизнеса. Он должен иметь возможность реагировать быстрее, чем изменения в Marketplace, чтобы обеспечить успешную работу в глобальной экономике. ИТ-не должныся как или стать заблокированным.
- **Измените.** По мере того как бизнес успешно растет, ИТ-отдел компании Contoso должен предоставлять системы, способные расти в том же темпе.
- **Улучшение моделей затрат.** Компании Contoso требуется снизить потребности в капитале, указанные в бюджете ИТ-отдела. Компания Contoso хочет использовать возможности облака для масштабирования ресурсов и снижения потребности в дорогостоящем оборудовании.
- **Снижение затрат на лицензии.** Компании Contoso требуется минимизировать затраты на облако.

## <a name="migration-goals"></a>Цели миграции

Группа, работающая над облачной инфраструктурой компании Contoso, определила цели этой миграции. Эти цели использовались для определения лучшего метода миграции.

| Требования | Сведения |
| --- | --- |
| Быстрый переход на Azure | Компания Contoso хочет быстро начать перемещение приложений и виртуальных машин в Azure. |
| Составление полного списка ресурсов | Contoso хочет выполнить полную инвентаризацию всех приложений, баз данных и виртуальных машин в Организации. |
| Оценка и классификация приложений | Contoso хочет воспользоваться всеми преимуществами облака. По умолчанию Contoso предполагает, что все службы будут работать как платформа как услуга (PaaS). Инфраструктура как услуга (IaaS) будет использоваться там, где PaaS не подходит. |
| Обучение и переход на модель DevOps | Компания Contoso намеревается перейти на модель DevOps. Компания Contoso предоставит вам обучение по Azure и DevOps и будет реорганизовывать группы по мере необходимости. |

После установки целей и требований компания Contoso изучает ИТ и определяет процесс миграции.

## <a name="current-deployment"></a>Текущее развертывание

Компания Contoso запланировала и настроила [инфраструктуру Azure](./contoso-migration-infrastructure.md) и предприняла другие сочетания экспериментов (проверка концепции), как описано в предыдущей таблице. Теперь все готово для созданию полной миграции в Azure в масштабе. Вот что компании Contoso необходимо перенести.

| Элемент | Том | Сведения |
| --- | --- | --- |
| Рабочие нагрузки | Приложения > 3 000 | <li> Приложения запускаются на виртуальных машинах. <li> К платформам приложений относятся Windows, SQL Server и [лампа](https://wikipedia.org/wiki/LAMP_(software_bundle)). |
| Базы данных | Примерно 8 500 баз данных | К базам данных относятся SQL Server, MySQL и PostgreSQL. |
| Виртуальные машины | > 35 000 виртуальных машин | Виртуальные машины выполняются на узлах VMware и управляются серверами vCenter. |

## <a name="migration-process"></a>Процесс миграции

Теперь, когда компания Contoso установила бизнес-драйверы и цели миграции, она может согласовать [методологию миграции](../index.md). Он может создавать приложения для этапов миграции и спринтов, чтобы итеративно планировать и выполнять миграцию.

## <a name="plan"></a>План

Компания Contoso запускает процесс планирования, выполнив обнаружение и оценку локальных приложений, данных и инфраструктуры. Ниже приведены действия специалистов Contoso:

- Contoso необходимо обнаруживать приложения, сопоставлять зависимости между приложениями, а затем выбирать порядок миграции и приоритет.
- Как только компания Contoso оценивается, она создает полный список приложений и ресурсов. Вместе с новой инвентаризацией Contoso будет использовать и обновлять эти существующие элементы:
  - База данных управления конфигурацией (CMDB). Он содержит технические настройки для приложений contoso.
  - Каталог услуг. В нем описываются рабочие сведения о приложениях, включая связанные бизнес-партнеры и соглашения об уровне обслуживания.

### <a name="discover-applications"></a>Обнаружение приложений

Компания Contoso запускает тысячи приложений на разных серверах. В дополнение к CMDB и каталогу услуг, компании Contoso требуются средства обнаружения и оценки.

Эти инструменты должны обеспечить механизм, позволяющий передавать данные оценки в процесс миграции. Инструменты оценки должны предоставлять данные, которые помогут создать интеллектуальный список физических и виртуальных ресурсов компании Contoso. Данные должны включать сведения о профиле и метрики производительности.

По завершении обнаружения компания Contoso должна иметь полную инвентаризацию активов и связанных с ними метаданных. Компания будет использовать эту инвентаризацию для определения плана миграции.

### <a name="identify-classifications"></a>Определение классификаций

Компания Contoso определяет несколько общих категорий для классификации ресурсов в списке. Эти классификации важны для принятия решений компании Contoso по миграции. Список классификаций помогает установить приоритеты миграции и определить сложные проблемы.

| Категория | Присвоенное значение | Сведения |
| --- | --- | --- |
| Бизнес-группа | Список имен бизнес-групп. | Какая группа ответственна за элемент списка? |
| Кандидат для подтверждения концепции | Да/нет | Можно ли использовать приложение в качестве подтверждения концепции или раннего внедрения облачной миграции? |
| Технический долг | Отсутствует; имеется некоторый или серьезный | Работает ли элемент инвентаризации или использует неподдерживаемый продукт, платформу или операционную систему? |
| Влияние брандмауэра | Да/нет | Взаимодействует ли приложение с Интернетом или вне трафика? Интегрируется ли оно с брандмауэром? |
| Проблемы с безопасностью | Да/нет | Существуют ли известные проблемы с безопасностью приложения? Использует ли приложение незашифрованные данные или самые актуальные платформы? |

### <a name="discover-application-dependencies"></a>Обнаружение зависимостей приложений

В рамках процесса оценки Contoso необходимо выяснить, где работают приложения. Также необходимо определить зависимости и соединения между серверами приложений. Компания Contoso сопоставляет среду в шагах:

1. Компания Contoso обнаруживает, как серверы и компьютеры сопоставляются с отдельными приложениями, сетевыми расположениями и группами.
2. Компания Contoso четко определяет приложения с небольшими зависимостями и подходит для быстрой миграции.
3. Contoso может использовать сопоставление для выявления более сложных зависимостей и обмена данными между серверами приложений. Затем компания Contoso может сгруппировать эти серверы логически для представления приложений и спланировать стратегию миграции на основе этих групп.

После сопоставления компания Contoso может гарантировать, что все компоненты приложения будут идентифицированы и учитывать при создании плана миграции.

![Схема сопоставления зависимостей.](./media/contoso-migration-scale/dependency-map.png)

### <a name="evaluate-applications"></a>Оценка приложений

В качестве последнего шага в процессе обнаружения и оценки компания Contoso может оценить результаты оценки и сопоставления, чтобы узнать, как перенести каждое приложение из каталога услуг.

Чтобы записать этот процесс оценки, компания Contoso добавляет несколько классификаций к инвентаризации.

| Категория | Присвоенное значение | Сведения |
| --- | --- | --- |
| Бизнес-группа | Список имен бизнес-групп. | Какая группа ответственна за элемент списка? |
| Кандидат для подтверждения концепции | Да/нет | Можно ли использовать приложение в качестве подтверждения концепции или раннего внедрения облачной миграции? |
| Технический долг | Отсутствует; имеется некоторый или серьезный | Работает ли элемент инвентаризации или использует неподдерживаемый продукт, платформу или операционную систему? |
| Влияние брандмауэра | Да/нет | Взаимодействует ли приложение с Интернетом или вне трафика? Интегрируется ли оно с брандмауэром? |
| Проблемы с безопасностью | Да/нет | Существуют ли известные проблемы с безопасностью приложения? Использует ли приложение незашифрованные данные или самые актуальные платформы? |
| Стратегия миграции | Повторное размещение, рефакторинг, перепроектирование или перестроение | Какой тип миграции требуется для приложения? Как будет развернуто приложение в Azure? [Подробнее.](./contoso-migration-overview.md#migration-patterns) |
| Техническая сложность | 1–5 | Насколько сложной является миграция? Это значение должно определяться отделом DevOps компании Contoso и соответствующими партнерами. |
| Важность для бизнеса | 1–5 | Насколько важна деятельность приложения для бизнеса? Например, небольшому приложению Рабочей группы может быть назначена оценка одного, тогда как критическое приложение, используемое в Организации, может иметь оценку 5. Эта оценка повлияет на уровень приоритета миграции. |
| Приоритет миграции | 1, 2, 3 | Каков приоритет миграции для приложения? |
| Риск при миграции | 1–5 | Каков уровень риска для миграции приложения? Компания Contoso DevOps и соответствующие партнеры должны согласиться с этим значением. |

### <a name="determine-costs"></a>Определение затрат

Чтобы определить затраты и сэкономить возможности миграции Azure, компания Contoso может использовать Калькулятор совокупной [стоимости владения (TCO)](https://azure.microsoft.com/pricing/tco/calculator) для вычисления и сравнения общей стоимости владения Azure с сравнимым локальным развертыванием.

### <a name="identify-assessment-tools"></a>Определение инструментов оценки

Компания Contoso выбирает инструменты для обнаружения, оценки и создания списка ресурсов. Contoso определяет набор средств и служб Azure, собственные средства и сценарии приложений, а затем средства партнеров. В частности, компании Contoso необходимо узнать, как можно использовать службу "Миграция Azure" для выполнения оценки в нужном масштабе.

#### <a name="azure-migrate"></a>Служба "Миграция Azure"

С помощью службы "Миграция Azure" можно обнаруживать и оценивать локальные виртуальные машины VMware для подготовки к миграции в Azure. Ниже приведены функции Миграции Azure.

1. **Обнаружение:** Обнаружение локальных виртуальных машин VMware.

   Служба "миграция Azure" поддерживает обнаружение с нескольких серверов vCenter (последовательно) и может выполнять операции обнаружения в отдельных проектах службы "миграция Azure".

   Служба "миграция Azure" выполняет обнаружение с помощью виртуальной машины VMware, на которой выполняется Сборщик Миграции Azure. Один и тот же сборщик может обнаруживать виртуальные машины на разных серверах vCenter и передавать данные в разные проекты.

2. **Оценка готовности:** Оцените, подходят ли локальные компьютеры для работы в Azure. Оценка включает:
   - **Рекомендации по размеру:** Получите рекомендации по размеру для виртуальных машин Azure на основе журнала производительности локальных виртуальных машин.
   - **Предполагаемые месячные затраты:** Получите оценочные затраты на выполнение локальных компьютеров в Azure.

3. **Выявление зависимостей:** Визуализируйте зависимости локальных компьютеров, чтобы создать оптимальные группы компьютеров для оценки и миграции.

![Схема работы службы "миграция Azure".](./media/contoso-migration-scale/azure-migrate.png)

Contoso должен правильно выполнить миграцию Azure, учитывая масштаб этой миграции:

- Компания Contoso выполняет оценку приложений с помощью службы "миграция Azure". Эта оценка гарантирует, что служба "миграция Azure" возвратит своевременные данные в портал Azure.
- Администраторы Contoso научитесь [развертывать миграцию Azure в масштабе](/azure/migrate/scale-hyper-v-assessment).
- Компания Contoso отмечает ограничения Миграции Azure, кратко изложенные в следующей таблице.

| Действие | Ограничение |
| --- | --- |
| Создание проекта Миграции Azure | 10 000 виртуальных машин |
| Обнаружение | 10 000 виртуальных машин |
| Оценка | 10 000 виртуальных машин |

Компания Contoso будет использовать Миграцию Azure следующим образом.

- В vCenter упорядочите виртуальные машины в папки. Это позволит администраторам легко сосредоточиться на выполнении оценки виртуальных машин в определенной папке.
- Оценка зависимостей между компьютерами. Для этого требуется установить агенты на оцениваемые виртуальные машины.
  
  Компания Contoso использует автоматизированные сценарии для установки необходимых агентов Windows или Linux. С помощью сценариев можно выполнить установку на виртуальные машины в папке vCenter.

#### <a name="database-tools"></a>Инструменты базы данных

Помимо Миграции Azure компания Contoso уделит внимание инструментам оценки баз данных. Такие средства, как [Помощник по миграции данных](/sql/dma/dma-overview?view=sql-server-2017) , помогут оценить SQL Server базы данных для миграции.

Помощник по миграции данных может помочь компании Contoso определить, совместимы ли локальные базы данных с различными решениями для баз данных Azure. К этим решениям относится база данных SQL Azure, SQL Server, выполняемая на виртуальной машине Azure IaaS, и Управляемый экземпляр SQL Azure.

В дополнение к Database Migration Service Contoso имеет некоторые сценарии, используемые для обнаружения и документирования SQL Server баз данных. Эти сценарии находятся в репозитории GitHub.

#### <a name="partner-assessment-tools"></a>Инструменты оценки от партнеров

Существует несколько других партнерских средств, которые могут помочь компании Contoso оценить локальную среду для миграции в Azure. Узнайте больше о [партнерах по миграции Azure](https://azure.microsoft.com/migration/partners).

## <a name="phase-2-migrate"></a>Этап 2. Миграция

После завершения оценки компании Contoso необходимо найти средства для переноса приложений, данных и инфраструктуры в Azure.

### <a name="migration-strategies"></a>Стратегии миграции

Компания Contoso может принять во внимание четыре широкие стратегии миграции.

| Стратегия | Сведения | Использование |
| --- | --- | --- |
| Повторное размещение | <li> Такой перенос, как правило, называется миграцией с _прогнозирования и сдвигом_ , что позволяет быстро перенести существующие приложения в Azure. <li> Приложение переносится в соответствии с преимуществами облака и без риска или затрат, связанных с изменениями кода. | <li> Компания Contoso может повторно разместить менее стратегические приложения, для которых не требуется вносить изменения в код. |
| Рефакторинг | <li> Эта стратегия также называется *перепакетированием*, для которой требуется минимальный код приложения или изменения конфигурации, чтобы подключить приложение к Azure PaaS и воспользоваться преимуществами облачных возможностей. | <li> Компания Contoso может выполнить рефакторинг стратегических приложений, чтобы они сохраняли одну базовую функциональность, но переместить их на платформу Azure, например службу приложений Azure. <li> Для этого потребуется внести в код минимальные изменения. <li> С другой стороны, компания Contoso должна поддерживать платформу виртуальной машины, так как она не будет управляться корпорацией Майкрософт. |
| Перепроектирование | <li> Эта стратегия изменяет или расширяет базу кода приложения, чтобы оптимизировать архитектуру приложения для возможностей облака и масштабирования. <li> Он модернизирована приложение в устойчивую, очень масштабируемую, независимо развертываемую архитектуру. <li> Службы Azure могут ускорить процесс, масштабировать приложения с уверенностью и легко управлять приложениями. |
| Перестроение | <li> Этот подход перестраивает приложение с нуля с помощью технологий, собственных в облаке. <li> Azure PaaS предоставляет полную среду разработки и развертывания в облаке. Она устраняет некоторые затраты и сложность лицензий на программное обеспечение. Она также устраняет необходимость в базовой инфраструктуре приложений, по промежуточного слоя и других ресурсах. | <li> Компания Contoso может переписать критически важные приложения, чтобы воспользоваться преимуществами облачных технологий, например бессерверных вычислений или микрослужб. <li> Компания Contoso будет управлять приложениями и службами, которые он разрабатывает, и Azure будет управлять всем остальным. |

Данные также необходимо учитывать, в особенности объем баз данных компании Contoso. Стандартным подходом компании Contoso является использование служб PaaS, таких как База данных SQL Azure, позволяющих воспользоваться всеми преимуществами облачных функций. При переходе к службе PaaS для баз данных Contoso будет хранить только данные. В этом случае базовая платформа будет оставлена в Майкрософт.

### <a name="evaluate-migration-tools"></a>Оценка инструментов миграции

Contoso в основном использует следующие службы и средства Azure для миграции:

- [Миграция Azure](/azure/migrate/migrate-services-overview): служба для миграции локальных виртуальных машин и других ресурсов в Azure.
- [Azure Database Migration Service](/azure/dms/dms-overview). Переносит в Azure локальные базы данных, например SQL Server, MySQL и Oracle.

<!-- markdownlint-disable MD024 -->

#### <a name="azure-migrate"></a>Служба "Миграция Azure"

Служба "миграция Azure" является основной службой Azure для координации миграции из Azure и локальных сайтов в Azure.

Служба "миграция Azure" управляет репликацией из локальных расположений в Azure. Если настроена и запущена репликация, можно выполнить отработку отказа локальных компьютеров в Azure, завершив миграцию.

Компания Contoso уже [завершила определение концепции](./contoso-migration-rehost-vm.md) , чтобы увидеть, как служба "миграция Azure" может помочь перенести ее в облако.

##### <a name="use-azure-migrate-at-scale"></a>Использование службы "миграция Azure" в масштабе

Компания Contoso планирует выполнить несколько миграций с прогнозированием и сдвигом. Чтобы убедиться, что это работает, служба "миграция Azure" будет реплицировать пакеты около 100 виртуальных машин за раз. Чтобы определить, как это будет работать, компания Contoso должна выполнить планирование ресурсов для предлагаемой миграции.

Необходимо собрать сведения об объемах трафика компании. В частности:

- Необходимо определить частоту изменений для виртуальных машин, которые требуется реплицировать.
- Необходимо выполнить сетевое подключение между локальным сайтом и Azure.

Учитывая требования к емкости и объему, компании Contoso необходимо выделить достаточную пропускную способность, соответствующую скорости ежедневного изменения данных для необходимых виртуальных машин, чтобы обеспечить соответствие целевой точке восстановления (RPO). Наконец, он должен определить, сколько серверов требуется для выполнения компонентов службы "миграция Azure" для развертывания.

##### <a name="gather-on-premises-information"></a>Сбор сведений о локальной инфраструктуре

Contoso может использовать службу "миграция Azure":

- Для удаленного профилирования виртуальных машин без влияния на рабочую среду. Это помогает уточнить требования к пропускной способности и хранилищу для репликации и отработки отказа.
- Без установки Site Recovery компонентов в локальной среде.

Инструмент собирает данные о виртуальных машинах (совместимых и несовместимых), дисках на каждой виртуальной машине и обновлениях данных на каждом диске. Он также определяет требования к пропускной способности сети и инфраструктуру Azure, необходимую для успешной репликации и отработки отказа.

Компания Contoso должна запустить средство планировщика на компьютере Windows Server, который соответствует минимальным требованиям к серверу конфигурации Site Recovery. Сервер конфигурации — это Site Recovery компьютер, необходимый для репликации локальных виртуальных машин VMware.

##### <a name="identify-site-recovery-requirements"></a>Определение требований Site Recovery

В дополнение к реплицируемым виртуальным машинам службе Site Recovery требуется несколько компонентов для миграции VMware.

| Компонент | Сведения |
| --- | --- |
| Сервер конфигурации | <li> Обычно это виртуальная машина VMware, настроенная с помощью шаблона OVF. <li> Компонент сервера конфигурации координирует обмен данными между локальной средой и Azure и управляет репликацией данных. |
| Сервер обработки | <li> По умолчанию устанавливается на сервере конфигурации. <li> Компонент сервера обработки получает данные репликации. оптимизирует его с помощью кэширования, сжатия и шифрования; и отправляет его в службу хранилища Azure. <li> Сервер обработки также устанавливает службу Azure Site Recovery Mobility Service на виртуальных машинах, которые необходимо реплицировать, и выполняет автоматическое обнаружение локальных компьютеров. <li> Для масштабируемых развертываний требуются дополнительные, изолированные серверы, обрабатывающие большие объемы трафика репликации. |
| Служба Mobility Service | <li> Агент службы Mobility Service устанавливается на каждой виртуальной машине VMware, которая будет перенесена с Azure Site Recovery. |

Компании Contoso необходимо выяснить, как развернуть эти компоненты с учетом емкости.

<br>

| Компонент | Требования к ресурсам |
| --- | --- |
| Максимальная скорость ежедневного изменения | <li> Один сервер обработки может обрабатывать ежедневную частоту изменений до 2 терабайт (ТБ). Так как виртуальная машина может использовать только один сервер обработки, максимальная частота ежедневного изменения данных, поддерживаемая для реплицируемой виртуальной машины, составляет 2 ТБ. |
| Максимальная пропускная способность | <li> Стандартная учетная запись хранения Azure может обрабатывать не более 20 000 запросов в секунду. Количество операций ввода-вывода в секунду для реплицируемой виртуальной машины должно быть в пределах этого предела. Например, если виртуальная машина имеет 5 дисков, и каждый диск создает 120 операций ввода-вывода в секунду (размер 8 КБ) на виртуальной машине, то он будет находиться в пределах ограничения в количестве операций ввода-вывода Azure на диск 500. <li> Необходимое количество учетных записей хранения равно общему числу операций ввода-вывода на компьютере, деленном на 20 000. Реплицированный компьютер может принадлежать только одной учетной записи хранения в Azure. |
| Сервер конфигурации | Основываясь на оценке компании Contoso репликации 100 на 200 виртуальных машин и [требованиях к размерам сервера конфигурации](/azure/site-recovery/site-recovery-plan-capacity-vmware#size-recommendations-for-the-configuration-server-and-inbuilt-process-server), компания Contoso оценивает, что требуется следующий тип конфигурации компьютера сервера: <li> ЦП: 16 виртуальных ЦП (2 сокета &#215; 8 ядер с частотой 2,5 ГГц) <li> Память: 32 ГБ. <li> Диск кэша: 1 ТБ. <li> Скорость изменения данных: от 1 до 2 ТБ <br> Помимо требований к размерам, компания Contoso должна убедиться, что сервер конфигурации оптимально расположен в той же сети и в сегменте локальной сети, что и виртуальные машины, подходящие для переноса. |
| Сервер обработки | Компания Contoso развернет изолированный выделенный сервер обработки с возможностью репликации 100 на виртуальные машины 200: <li> ЦП: 16 виртуальных ЦП (2 сокета &#215; 8 ядер с частотой 2,5 ГГц) <li> Память: 32 ГБ. <li> Диск кэша: 1 ТБ. <li> Скорость изменения данных: от 1 до 2 ТБ <br> Сервер обработки будет работать жестко, поэтому он расположен на узле ESXi, который может обрабатывать операции дискового ввода-вывода, сетевой трафик и ЦП, необходимые для репликации. Компания Contoso рассмотрит выделенный узел для этой цели. |
| Сеть | <li> Компания Contoso проверила текущую инфраструктуру VPN типа "сеть — сеть" и решила реализовать Azure ExpressRoute. Реализация является критической, поскольку она будет снижать задержку и повышать пропускную способность в основном регионе Azure () компании Contoso `East US 2` . <li> Компании Contoso необходимо будет внимательно отслеживать данные, поступающие с сервера обработки. Если данные перегружают пропускную способность сети, компания Contoso будет расдумать о [регулировании пропускной способности сервера обработки](/azure/site-recovery/site-recovery-plan-capacity-vmware#control-network-bandwidth). |
| Хранилище Azure | <li> Для миграции компания Contoso должна указать правильный тип и число целевых учетных записей хранения Azure. Site Recovery реплицирует данные виртуальной машины в службу хранилища Azure. <li> Site Recovery можно реплицировать в учетные записи хранения SSD уровня "Стандартный" или "Премиум". <li> Чтобы решить о хранении, компания Contoso должна проанализировать [ограничения хранилища](/azure/virtual-machines/windows/disks-types) и рассмотреть ожидаемый рост и дальнейшее использование. Учитывая скорость и приоритет миграции, компания Contoso решила использовать твердотельные накопители уровня "Премиум". <li> Компания Contoso решила использовать управляемые диски для всех виртуальных машин, развернутых в Azure. Необходимые операции ввода-вывода позволяют определить, будут ли диски иметь стандартный HDD, Стандартный SSD или SSD уровня "Премиум". |

#### <a name="azure-database-migration-service"></a>Azure Database Migration Service

Azure Database Migration Service — это полностью управляемая служба, которая обеспечивает бесперебойную миграцию из нескольких источников базы данных на платформы данных Azure с минимальным временем простоя. Ниже приведены некоторые сведения о службе.

- Она интегрирует функциональные возможности существующих средств и служб. Он использует Помощник по миграции данных для создания отчетов об оценке, определяющих рекомендации по совместимости базы данных и любых необходимых изменений.
- Он использует простой процесс самостоятельной миграции с интеллектуальной оценкой, который помогает решать потенциальные проблемы перед миграцией.
- Она может выполнять миграцию по шкале из нескольких источников в целевую базу данных Azure.
- Он обеспечивает поддержку от SQL Server 2005 до SQL Server 2017.

Database Migration Service не является единственным средством миграции баз данных Майкрософт. Вы можете изучить [сравнение инструментов и служб](https://blogs.msdn.microsoft.com/datamigration/2017/10/13/differentiating-microsofts-database-migration-tools-and-services).

##### <a name="use-database-migration-service-at-scale"></a>Использование Database Migration Service в масштабе

Contoso будет использовать Database Migration Service при миграции с SQL Server.

При подготовке Database Migration Service компании Contoso необходимо правильно задать размер и настроить ее для оптимизации производительности при миграции данных. Contoso выберет критически важный для бизнеса уровень с четырьмя виртуальных ядер. Этот параметр позволяет службе использовать преимущества нескольких виртуальных ЦП для параллелизации и ускорения обмена данными.

![Снимок экрана, на котором показано Database Migration Service масштабирование с выбранным параметром критически важный для бизнеса.](./media/contoso-migration-scale/dms.png)

Еще одним способов масштабирования, который компания Contoso может использовать, является временное масштабирование базы данных SQL Azure или целевого экземпляра базы данных Azure для MySQL до ценовой категории "Премиум" во время переноса данных. Это позволяет уменьшить регулирование базы данных, которое может повлиять на действия передачи данных, когда организация использует более низкие уровни.

##### <a name="use-other-tools"></a>Использование других средств

В дополнение к Database Migration Service Contoso может использовать другие средства и службы для обнаружения информации о виртуальной машине:

- Сценарии, помогающие выполнять миграцию вручную. Они хранятся в репозитории GitHub.
- Различные [средства партнеров](https://azure.microsoft.com/migration/partners) для миграции.

## <a name="ready-for-production"></a>Готово к производству

После того как компания Contoso переместит ресурсы в Azure, она должна оптимизировать их для повышения производительности и повысить окупаемость средств управления затратами. Так как Azure является службой оплаты за использование, для компании Contoso важно понимать, как работают системы и должны ли они правильно их изменять.

### <a name="azure-cost-management-and-billing"></a>Служба "Управление затратами Azure" и функция выставления счетов

Чтобы максимально эффективно использовать свои инвестиции в облако, компания Contoso будет использовать бесплатное средство управления затратами Azure и выставления счетов. Это решение позволяет компании Contoso управлять затратами на облако с прозрачностью и точностью. Оно предоставляет инструменты для мониторинга, распределения и сокращения затрат на облако.

Служба "Управление затратами Azure" и выставление счетов предоставляют простые отчеты панели мониторинга, помогающие в распределении затрат, шовбаккс и гибких операциях. Это средство помогает оптимизировать затраты на облачные ресурсы за счет определения недостаточного использования ресурсов, которые компания Contoso может использовать для управления и настройки.

Дополнительные сведения см. в [обзоре службы "Управление затратами Azure" и "выставление счетов](/azure/cost-management-billing/cost-management-billing-overview)".

![Снимок экрана с примером диаграммы затрат за период времени в службе "Управление затратами Azure".](./media/contoso-migration-scale/cost-management.png)

### <a name="native-tools"></a>Собственные инструменты

Компания Contoso также будет использовать сценарии для поиска неиспользуемых ресурсов.

Во время крупных миграций часто налагаются такие фрагменты данных, как виртуальные жесткие диски, которые приводят к оплате, но не предоставляют компании ценности. Скрипты доступны в [репозитории GitHub](https://github.com/azure/azure-quickstart-templates/tree/master/azure-resource-optimization-toolkit).

Contoso будет использовать преимущества работы ИТ-отдела корпорации Майкрософт и реализовать набор средств оптимизации ресурсов Azure (АТО). Набор средств также находится в репозитории GitHub.

Компания Contoso может развернуть учетную запись службы автоматизации Azure с предварительно настроенными модулями runbook и расписаниями в своей подписке, чтобы начать экономить средства. Оптимизация ресурсов происходит автоматически в подписке после включения или создания расписания, включая оптимизацию для новых ресурсов. Это обеспечивает возможности децентрализованной автоматизации для снижения затрат. Доступны следующие функции:

- Автоотсрочка виртуальных машин Azure на основе низкой загрузки ЦП.
- Планирование откладывания и возобновления обработки виртуальных машин Azure.
- Запланируйте откладывание или откладывание виртуальных машин Azure в порядке возрастания и убывания с помощью тегов Azure.
- Групповое удаление групп ресурсов по требованию.

### <a name="partner-optimization-tools"></a>Инструменты оптимизации запросов

Компания Contoso может использовать такие средства для партнеров, как [Hanu](https://hanu.com/insight) и [масштабируемость](https://www.scalr.com/cost-optimization).

## <a name="phase-4-secure-and-manage"></a>Этап 4. Защита и управление

На этом этапе компания Contoso использует ресурсы по безопасности и управлению Azure для управления, защиты и мониторинга облачных приложений в Azure. Эти ресурсы помогают организации запускать безопасную и хорошо управляемую среду при использовании продуктов, доступных в портал Azure.

Компания Contoso начинает использовать эти службы во время миграции. Благодаря гибридной поддержке Azure компания Contoso продолжит использовать многие из них для согласованной работы в гибридном облаке.

### <a name="security"></a>Безопасность

Компания Contoso полагается на центр безопасности Azure для унифицированного управления безопасностью и Azure Advanced Threat Protection в гибридных облачных рабочих нагрузках.

Центр безопасности предоставляет полную видимость и контроль над безопасностью облачных приложений в Azure. Компания Contoso может быстро обнаруживать угрозы и реагировать на них, а также снижать уровень риска угроз, активировав адаптивную защиту.

[Дополнительные сведения](https://azure.microsoft.com/services/security-center) о центре безопасности.

### <a name="monitoring"></a>Мониторинг

Компания Contoso должна оценить работоспособность и производительность только что перенесенных приложений, инфраструктуры и данных, которые теперь работают в Azure. Contoso будет использовать встроенные средства мониторинга облака Azure, такие как Azure Monitor, Рабочая область Log Analytics и Application Insights.

С помощью этих средств компания Contoso может легко получать данные из источников и получать ценные сведения. Например, компания Contoso может получать данные об использовании памяти, дисков и ЦП для виртуальных машин с помощью датчиков, просматривать зависимости приложений и сети для нескольких виртуальных машин, а также отслеживать производительность приложений. С помощью этих облачных инструментов мониторинга компания приступит к работе и выполнит интеграцию с решениями по управлению службами.

Дополнительные сведения о [мониторинге Azure](/azure/azure-monitor/overview).

### <a name="business-continuity-and-disaster-recovery"></a>Непрерывность бизнес-процессов и аварийное восстановление

Contoso потребуется стратегия непрерывности бизнес-процессов и аварийного восстановления (BCDR) для своих ресурсов Azure.

Azure предоставляет [встроенные функции BCDR](/azure/architecture/resiliency/disaster-recovery-azure-applications) , помогающие защитить данные и обеспечить работу приложений и служб.

Помимо использования встроенных функций, компании Contoso необходимо обеспечить восстановление после сбоев, избежать дорогостоящего прерывания работы, выполнить требования соответствия и защитить данные от программ-шантажистов и ошибок пользователей. Выполните указанные ниже действия.

- Компания Contoso развернет экономичное решение Azure Backup для резервного копирования ресурсов Azure. Так как она встроена, компания Contoso может настроить облачные резервные копии за несколько простых шагов.
- Contoso настроит аварийное восстановление для виртуальных машин Azure с помощью Azure Site Recovery для репликации, отработки отказа и восстановления размещения между регионами Azure, которые он указывает. Это гарантирует, что приложения, работающие на виртуальных машинах Azure, будут доступны во вторичном регионе компании Contoso, если происходит сбой в основном регионе. [Подробнее.](/azure/site-recovery/azure-to-azure-quickstart)

## <a name="conclusion"></a>Заключение

В этой статье было описано планирование миграции в Azure в нужном масштабе, выполненное компанией Contoso. Процесс миграции делится на четыре этапа. Этапы, которые выполнялись при оценке и миграции, проходят оптимизацию, безопасность и управление после завершения миграции.

Важно, чтобы Организация запланировать проект миграции как целый процесс и переносить свои системы, разбивая их на классификации и числа, имеющие смысл для бизнеса. Оценивая данные и применяя классификации, проекты можно разделить на несколько небольших миграций, которые могут работать безопасно и быстро. Совокупность этих меньших миграций быстро превратится в большую успешную миграцию к Azure.
