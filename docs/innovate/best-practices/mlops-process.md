---
title: Процесс операций машинного обучения
description: Общие сведения о процессе операций машинного обучения.
author: mufajjul
ms.author: brblanch
ms.date: 01/20/2021
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: innovate
ms.custom: think-tank
ms.openlocfilehash: 19d4961034aca6505c93d3ccd408267c71dffba9
ms.sourcegitcommit: 9cd2b48fbfee229edc778f8c5deaf2dc39dfe2d6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2021
ms.locfileid: "99230484"
---
# <a name="the-machine-learning-operations-process"></a>Процесс операций машинного обучения

## <a name="the-model-development-process"></a>Процесс разработки модели

В процессе разработки должны быть получены следующие результаты.

- Обучение автоматизировано и проверяется модель, которая включает в себя функции и производительность тестирования (например, использование метрик точности).

- Развертывание в инфраструктуре, используемой для установки и установки, — это автоматизированная инфраструктура.

- Механизмы создают сквозной журнал аудита данных. Автоматическое повторное обучение модели происходит при смещении данных с течением времени, что относится к системам, не связанным с системой машинного обучения.

На следующей схеме показан жизненный цикл развертывания системы машинного обучения.

![Схема жизненного цикла машинного обучения.](./media/ml-lifecycle.png)

После разработки модель машинного обучения считается обученной, проверенной, развернутой и отслеживаемой. С точки зрения Организации, а также от руководителя и технического уровня, важно определить, кто владеет и реализует этот процесс. В крупных организациях анализу данных может владеть этапами обучения и проверки модели, а инженер машинного обучения может выполнять оставшиеся действия. В небольших компаниях анализу данных может быть владельцем всех этапов.

### <a name="train-the-model"></a>Обучение модели

На этом шаге обучающий набор данных обучает модель машинного обучения. Обучающий код управляется версиями и используется повторно, и эта функция оптимизирует нажатия кнопок и триггеров событий (например, становится доступной новая версия данных) для автоматизации обучения модели.

### <a name="validate-the-model"></a>Проверка модели

На этом шаге используются установленные метрики, такие как метрика точности, для автоматической проверки новой обученной модели и сравнения ее с более старыми. Увеличится ли его точность? Если да, эта модель может быть зарегистрирована в реестре модели, чтобы следующие шаги могли ее использовать. Если новая модель работает хуже, то анализу данных может получать оповещения о том, почему или отменять новую обученную модель.

### <a name="deploy-the-model"></a>Развертывание модели

Разверните модель в качестве службы API для веб-приложений на шаге развертывания. Такой подход позволяет масштабировать и обновлять модель независимо от приложений. Кроме того, модель можно использовать для выполнения пакетной оценки, где она используется один раз или периодически для вычисления прогнозов на новых точках данных. Это полезно, когда требуется асинхронная обработка больших объемов данных. Дополнительные сведения о моделях развертывания см. на странице [Определение параметров машинного обучения во время развертывания](./ml-deployment-inference.md) .

### <a name="monitor-the-model"></a>Мониторинг модели

Необходимо наблюдать за моделью по двум основным причинам. Во первых, мониторинг модели помогает обеспечить ее технически работоспособность; Например, можно создать прогнозы. Это важно, если приложения организации зависят от модели и используют ее в режиме реального времени. Мониторинг модели также помогает организациям оценивать, будет ли она непрерывно создавать полезные прогнозы. Это может оказаться нецелесообразным, когда происходит смещение данных, например, когда данные, используемые для обучения модели, значительно отличаются от данных, отправляемых в модель на этапе прогнозирования. Например, модель, обученная для рекомендаций по продуктам, может дать нежелательные результаты, если рекомендовать продукты для людей из другой возрастной группы. Мониторинг модели с использованием пересчета данных может обнаружить несоответствие, инженеры службы "оповещения машинного обучения" и автоматически переучить модель с более актуальными или более новыми данными.

### <a name="how-to-monitor-models"></a>Мониторинг моделей

Так как смещение данных, сезонности или более новая архитектура, настроенная для повышения производительности, может привести к Ване производительности модели с течением времени, важно установить процесс непрерывного развертывания моделей. Ниже приведены некоторые рекомендации.

- **Владение:** Владелец должен быть назначен процессу мониторинга производительности модели для активного управления его производительностью.

- **Конвейеры выпуска:** Сначала настройте конвейер выпуска в [Azure DevOps](/azure/devops/user-guide/what-is-azure-devops) и задайте триггер в реестре модели. При регистрации новой модели в реестре конвейер выпуска запускает и подключается к процессу развертывания.

## <a name="prerequisites-for-retraining-models"></a>Необходимые условия для повторного обучения моделей

[Сбор данных из моделей в рабочей среде](/azure/machine-learning/how-to-enable-data-collection) является одним из необходимых компонентов для переобучения моделей в инфраструктуре непрерывной интеграции и непрерывной разработки, и этот процесс использует входные данные из запросов оценки. В настоящее время эта возможность ограничена табличными данными, которые могут быть проанализированы как JSON с минимальным форматированием и манипуляцией; видео, аудио и изображения исключаются. Эта возможность доступна для моделей в службе Kubernetes Azure (AKS). Собранные данные хранятся в большом двоичном объекте Azure.

Чтобы подготовиться к повторному обучению модели, выполните следующие действия.

1. **Отслеживание смещения данных от собираемых входных данных.** Для настройки процесса мониторинга необходимо извлечь метку времени из рабочих данных. Это необходимо для сравнения производственных данных и базовых данных (обучающих данных, используемых для построения модели). Предпочтительный способ отслеживания смещения данных — с помощью Azure Monitor Application Insights. Эта функция предоставляет [предупреждение](/azure/machine-learning/how-to-monitor-datasets#metrics-alerts-and-events) , которое может активировать такие действия, как электронная почта, SMS Text, Push-уведомления или функции Azure. Необходимо [включить](/azure/machine-learning/how-to-enable-app-insights#configure-logging-with-azure-machine-learning-studio) Application Insights для записи данных в журнал.

1. **Анализ собранных данных.** Обязательно [собирайте данные из моделей в рабочей среде](/azure/machine-learning/how-to-enable-data-collection)и включите результаты в Скрипт оценки модели. Собирайте все функции, используемые для оценки модели, так как это гарантирует наличие всех необходимых функций и может использоваться в качестве обучающих данных.

1. **Решите, требуется ли повторное обучение с собранными данными.** Многие вещи приводят к потере данных, включая проблемы с датчиками для сезонности, изменения в поведении пользователей и проблемы с качеством данных, связанные с источником данных. Повторное обучение модели не требуется во всех случаях, поэтому рекомендуется исследовать и понять причину смещения данных перед его обработкой.

1. **Повторное обучение модели.** Обучение модели должно уже быть автоматизировано, и этот этап включает в себя активацию текущего этапа обучения. Это может быть вызвано тем, что было обнаружено отклонение данных (и оно не связано с проблемами с данными) или когда инженер данных опубликовал новую версию набора данных. В зависимости от варианта использования эти действия могут быть полностью автоматизированы или защищены человеком. Например, хотя некоторые варианты использования, например рекомендации по продуктам, могут работать автономно в будущем, другие в финансовом отделе будут использовать такие стандарты, как равномерное распределение моделей и прозрачность и требующие от человека утверждения новых обученных моделей.

Во-первых, в организации обычно выполняется только Автоматизация обучения и развертывания модели, но не действия по проверке, мониторингу и переучению, которые выполняются вручную. В конечном итоге шаги автоматизации для этих задач могут быть выполнены до достижения требуемого состояния. Операции DevOps и машинного обучения — это основные понятия, которые разрабатываются со временем, а организации должны знать об их развитии.

## <a name="the-team-data-science-process-lifecycle"></a>Жизненный цикл процесса обработки и анализа данных группы

Процесс обработки и анализа данных группы (TDSP) предоставляет жизненный цикл, позволяя структурировать разработку проектов по обработке и анализу данных. Этот жизненный цикл представляет основные этапы, которые обычно выполняются проектами, часто итеративно:

- Коммерческий аспект
- Получение и изучение данных
- Моделирование
- Развертывание

Цели, задачи и артефакты документации для каждого этапа жизненного цикла TDSP описаны в [жизненном цикле процесса обработки и анализа данных группы](/azure/machine-learning/team-data-science-process/lifecycle).

## <a name="the-roles-and-activities-within-machine-learning-operations"></a>Роли и действия в операциях машинного обучения

В течение жизненного цикла TDSP ключевые роли в проекте AI — это инженеры по обработке данных, анализу данных и машинному обучению. Эти роли важны для успеха проекта и должны работать вместе с точными, повторяемыми, масштабируемыми и готовыми к работе решениями.

[![Схема, показывающая процесс операций машинного обучения.](./media/mlops-process.png)](./media/mlops-process.png#lightbox)

- **Инженер данных:** Эта роль принимает, проверяет и очищает данные. После уточнения данные переводятся в каталог и становятся доступными для использования специалистами по обработке и анализу данных. На этом этапе важно исследовать и анализировать дублирующиеся данные, удалять выбросы и выявление отсутствующих данных. Эти действия должны быть определены в шагах конвейера и выполняться при предварительной обработке конвейера обучения. Уникальные и специальные имена должны быть назначены базовым и создаваемым функциям.

- **Анализу данных (или инженер искусственного интеллекта):** Эта роль позволяет переходить к процессу конвейера обучения и оценивать модели. Анализу данных получает данные от инженера по обработке данных и определяет закономерности и связи внутри него, возможно, выбирая или создавая функции для эксперимента. Так как проектирование признаков играет важную роль в создании звуковой обобщенной модели, ее ключ к выполнению максимально тщательно завершается. Различные эксперименты можно выполнять с помощью различных алгоритмов и параметров. Средства Azure, такие как автоматизированное машинное обучение, могут автоматизировать эту задачу, которая также может помочь при чрезмерном уровне модели. Успешно обученная модель регистрируется в реестре модели. Модель должна иметь уникальное и определенное имя, а журнал версий должен храниться для отслеживания.

- **Инженер операций машинного обучения:** Эта роль создает комплексные конвейеры для непрерывной интеграции и доставки. Сюда входит упаковка модели в образ DOCKER, проверка и профилирование модели, ожидание утверждения от заинтересованного лица и развертывание модели в службе оркестрации контейнеров, например AKS. Во время непрерывной интеграции можно задать различные триггеры, и в дальнейшем код модели может активировать конвейер обучения и конвейер выпуска.
