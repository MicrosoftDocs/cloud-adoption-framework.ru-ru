---
title: Ресурсы для переноса Moodle
description: Сведения о ресурсах, которые создает Moodle миграцию в Azure, например в виртуальной сети Azure, группе безопасности сети и подсети.
author: UmakanthOS
ms.author: brblanch
ms.date: 11/30/2020
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: plan
ms.custom: think-tank
ms.openlocfilehash: 677b8c4a582688599a868ae5af9b9f43d8b0cdca
ms.sourcegitcommit: 54f01dd0eafa23c532e54c821954ba682357f686
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/13/2021
ms.locfileid: "98175140"
---
# <a name="moodle-migration-resources"></a>Ресурсы для переноса Moodle

При использовании шаблона Azure Resource Manager (ARM) для миграции Moodle, развертывание создает ресурсы в Azure. В рамках этого процесса развертывания дополнительные развертывания автоматически выполняются через дочерние шаблоны. В следующих разделах описываются эти развертывания и созданные ими ресурсы.

## <a name="network-template"></a>Шаблон сети

При развертывании шаблона сети создаются следующие ресурсы:

- [Виртуальная сеть Azure](/azure/virtual-network/virtual-networks-overview). представление вашей сети в облаке. Виртуальная сеть — это логическая изоляция облака Azure, предназначенного для вашей подписки. При создании виртуальной сети службы и виртуальные машины внутри нее могут напрямую и безопасно обмениваться данными в облаке. Виртуальная сеть, создаваемая шаблоном сети, включает имя виртуальной сети, версию API, расположение, имя DNS-сервера и адресное пространство. Адресное пространство содержит диапазон IP-адресов, которые могут использоваться подсетями.

- [Группа безопасности сети (NSG)](/azure/virtual-network/network-security-groups-overview): сетевой фильтр или брандмауэр, который содержит список правил безопасности. Эти правила разрешают или запрещают сетевой трафик к ресурсам, подключенным к виртуальной сети.

- [Сетевой интерфейс](/azure/virtual-network/virtual-network-network-interface)— это интерфейс, который виртуальная машина Azure может использовать для взаимодействия с Интернетом, Azure и локальными ресурсами.

- [Подсеть](/azure/virtual-network/virtual-network-manage-subnet). небольшая сеть в большой сети. Подсети также называются подсетями. По умолчанию IP-адрес в подсети может взаимодействовать с любым другим IP-адресом в виртуальной сети.

- [Общедоступный IP-адрес](/azure/virtual-network/public-ip-addresses#:~:text=public%20ip%20addresses%20enable%20azure,IP%20assigned%20can%20communicate%20outbound): IP-адрес, используемый ресурсом Azure для связи с Интернетом. Адрес выделен для ресурса Azure.

- [Azure Load Balancer](/azure/virtual-machines/windows/tutorial-load-balancer#:~:text=an%20azure%20load%20balancer%20is,traffic%20to%20an%20operational%20vm). балансировщик нагрузки, который эффективно распределяет трафик сети или приложений между несколькими серверами в ферме серверов. Подсистема балансировки нагрузки обеспечивает высокую доступность и надежность, отправляя запросы только к серверам, которые находятся в сети.

- [Шлюз приложений Azure](/azure/application-gateway/overview). альтернатива Load Balancer. Load Balancer развертываются все четыре готовые шаблоны ARM. При использовании полностью настраиваемого развертывания вместо шаблона ARM можно выбрать шлюз приложений вместо Load Balancer. Шлюз приложений — это балансировщик нагрузки веб-трафика, который можно использовать для управления трафиком веб-приложений. Шлюз приложений может принимать решения о маршрутизации на основе дополнительных атрибутов HTTP-запроса, таких как путь URI или заголовок узла.

- [Кэш Azure для Redis](/azure/azure-cache-for-redis/cache-overview): хранилище данных в памяти на основе программного обеспечения с открытым исходным кодом Redis. Redis повышает производительность и масштабируемость приложения, которое в значительной степени сохраняет данные серверной части. Он может обрабатывать большие объемы запросов приложений, сохраняя часто запрашиваемые данные в памяти сервера. Эти данные можно быстро записывать и читать.

## <a name="storage-template"></a>Шаблон хранилища

При развертывании шаблона учетной записи хранения создается учетная запись хранения Azure типа Филестораже. Для этой учетной записи предусмотрена производительность Premium, репликация локально избыточного хранилища (LRS) и 1 терабайт (ТБ) хранилища. Предопределенный шаблон настроен таким образом, что учетная запись хранения с файлами Azure создает общие папки.

[Учетная запись хранения Azure](/azure/storage/common/storage-account-overview) содержит объекты данных службы хранилища Azure, такие как большие двоичные объекты, файлы, очереди, таблицы и диски. Учетная запись хранения предоставляет уникальное пространство имен для данных службы хранилища Azure, доступное из любой точки мира по протоколу HTTP или HTTPS. Доступны следующие типы учетных записей хранения Azure: General-Purpose v1, General-Purpose v2, Блоккблобстораже, Филестораже и хранилище BLOB-объектов. Тип репликации может быть географически избыточным или LRS и хранилищем, избыточным в зоне. Типы производительности "Стандартный" и "Премиум", а отдельная учетная запись хранения могут хранить до 500 ТБ данных, как и любые другие службы Azure.

Шаблоны ARM поддерживают следующие типы учетных записей хранения:

- [Сетевая файловая система (NFS)](/windows-server/storage/nfs/nfs-overview)— тип учетной записи, которую удаленный узел может использовать для подключения файловых систем по сети. Удаленный узел может взаимодействовать с этими файловыми системами, как будто они подключены локально. При такой структуре системные администраторы могут консолидировать ресурсы на централизованные серверы в сети.

- [Глустерфс](/azure/virtual-machines/workloads/sap/high-availability-guide-rhel-glusterfs): распределенная файловая система с открытым исходным кодом, которая может масштабироваться в процессе создания блоков для хранения нескольких петабайтов данных.

- Служба " [файлы Azure](/azure/storage/files/storage-files-introduction)" — единственное хранилище файлов в общедоступном облаке, которое предоставляет защищенные облачные общие файловые ресурсы на основе SMB и полностью управляемые ими, которые также можно кэшировать в локальной среде для обеспечения производительности и совместимости. Для NFS и Глустерфс репликация — Standard LRS, а тип хранилища — общедоступный выпуск v1. Для службы файлов Azure репликация — Premium LRS, а тип — Филестораже.

Эти механизмы хранения зависят от выбранного развертывания. NFS и Глустерфс создают контейнер, а служба файлов Azure создает общую папку. Для минимальных и коротких размеров Moodle шаблон поддерживает NFS. Для больших и максимальных размеров шаблон поддерживает файлы Azure. Чтобы получить доступ к контейнерам и общим файловым ресурсам, перейдите в портал Azure и выберите учетную запись хранения в группе ресурсов.

![Снимок экрана: портал Azure. Для учетной записи хранения отображается страница, а для доступа к контейнерам и общим папкам доступны кнопки.](./images/storage-account.png)

## <a name="database-template"></a> Шаблон базы данных

При развертывании шаблона базы данных создается сервер [базы данных Azure для MySQL](/azure/mysql/) . База данных Azure для MySQL легко настраивается, управляется и масштабируется. Она автоматизирует управление и обслуживание инфраструктуры и сервера базы данных, включая регулярные обновления, резервные копии и безопасность. База данных Azure для MySQL построена на основе новейшего выпуска MySQL, включая версии 5,6, 5,7 и 8,0. Чтобы получить доступ к серверу базы данных, созданному шаблоном, перейдите к портал Azure и откройте группу ресурсов, предоставляемую процессом развертывания. Затем перейдите на **сервер базы данных Azure для MySQL**. Шаблон предоставляет серверу базы данных имя сервера, имя для входа администратора сервера, версию MySQL и конфигурацию производительности.

## <a name="virtual-machine-template"></a>Шаблон виртуальной машины

При развертывании шаблона виртуальной машины виртуальная машина назначается как виртуальная машина контроллера. Операционная система для виртуальной машины контроллера — Ubuntu 18,04.

Расширения виртуальных машин — это небольшие приложения, которые обеспечивают настройку и задачи автоматизации на [виртуальных машинах Azure](/azure/virtual-machines/extensions/overview)после развертывания. Расширение виртуальной машины запускает сценарий оболочки, который устанавливает Moodle на виртуальной машине контроллера и записывает файлы журналов. Он создает `stderr` `stdout` файлы журнала и в `/var/lib/waagent/custom-script/download/0/` папке. Эти файлы можно просмотреть в качестве привилегированного пользователя.

## <a name="scale-set-template"></a>Шаблон масштабируемого набора

При развертывании шаблона масштабируемого набора создается [масштабируемый набор виртуальных машин](/azure/virtual-machine-scale-sets/overview). С помощью масштабируемого набора виртуальных машин можно развертывать и управлять набором автоматически масштабируемых виртуальных машин. Вы можете вручную масштабировать количество виртуальных машин в масштабируемом наборе или определить правила для автомасштабирования на основе использования ресурсов, таких как [ЦП](/visualstudio/profiling/average-cpu-utilization), потребность в памяти или сетевой трафик. Когда экземпляр масштабируется, он развертывает виртуальную машину. Затем запускается сценарий оболочки, который устанавливает необходимые компоненты Moodle и настраивает задания cron. Виртуальная машина в масштабируемом наборе имеет частный IP-адрес. Дополнительные сведения о просмотре экземпляров виртуальных машин в масштабируемом наборе и о том, как получить доступ к этим экземплярам, см. в [документации по масштабируемому набору виртуальных машин](/azure/virtual-machine-scale-sets/tutorial-create-and-manage-cli#view-the-vm-instances-in-a-scale-set).

## <a name="next-steps"></a>Дальнейшие действия

Продолжайте [Moodle шаги миграции вручную](migration-start.md) для дальнейших действий в процессе миграции Moodle.
