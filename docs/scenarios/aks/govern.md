---
title: Управление решениями современных контейнеров
description: Расширение рекомендаций по управлению до современных экземпляров контейнеров
author: BrianBlanchard
ms.author: brblanch
ms.date: 03/01/2021
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: govern
ms.openlocfilehash: a764ac7671eeeea7430b20f48cff223fba554845
ms.sourcegitcommit: b8f8b7631aabaab28e9705934bf67dad15e3a179
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101798873"
---
<!-- docutune:ignore "public container registry" -->

# <a name="govern-modern-container-solutions"></a>Управление решениями современных контейнеров

[Инфраструктура внедрения облачных решений предоставляет методологию](../../govern/index.md) для систематического и постепенного улучшения управления облачным портфелем. В этой статье показано, как расширить подход к управлению, Kubernetes кластеры, развернутые в Azure или в других общедоступных или частных облаках.

## <a name="initial-governance-foundation"></a>Общие сведения о системе управления

Управление начинается с первоначального руководства по управлению, [который часто называют MVP по управлению](../../govern/initial-foundation.md). Эта основа развертывает основные продукты Azure, необходимые для предоставления управления в облачной среде.

Первоначальная система управления основана на следующих аспектах управления:

- Базовая Гибридная сеть и подключение.
- Управление доступом на основе ролей (RBAC) Azure для управления удостоверениями и доступом.
- Стандарты именования и маркировки для единообразного определения ресурсов.
- Организация ресурсов с помощью групп ресурсов, подписок и групп управления.
- Политики Azure и схемы Azure для применения политик управления.

Каждая из этих функций первоначального руководства по управлению может использоваться для управления современными экземплярами решений контейнеров. Но сначала необходимо добавить несколько компонентов в первоначальную основу, чтобы применить [политику Azure к контейнерам](/azure/governance/policy/concepts/policy-for-kubernetes?bc=/azure/cloud-adoption-framework/_bread/toc.json&toc=/azure/cloud-adoption-framework/toc.json). После настройки можно использовать политику Azure и начальную основу для управления контейнерами следующих типов:

- [Служба Azure Kubernetes (AKS)](/azure/aks/intro-kubernetes?bc=/azure/cloud-adoption-framework/_bread/toc.json&toc=/azure/cloud-adoption-framework/toc.json)
- [Kubernetes с поддержкой Azure Arc](/azure/azure-arc/kubernetes/overview?bc=/azure/cloud-adoption-framework/_bread/toc.json&toc=/azure/cloud-adoption-framework/toc.json)
- [Обработчик AKS](https://github.com/Azure/aks-engine/blob/master/docs/README.md)

## <a name="expand-on-governance-disciplines"></a>Развернуть в руководствах по управлению

Исходную систему управления можно использовать для расширения различных дисциплин, чтобы обеспечить согласованные и стабильные подходы к развертыванию всех экземпляров Kubernetes.

Управление кластерами Kubernetes можно рассматривать с пятью разными перспективами.

### <a name="azure-resource-governance"></a>Управление ресурсами Azure

Первый — это перспектива ресурсов Azure. Убедитесь, что все кластеры соответствуют требованиям вашей организации. Сюда входят такие понятия, как топология сети, частный кластер, роли RBAC Azure для выполняются Teams, параметры диагностики, доступность региона, рекомендации по пулу узлов, управление реестром контейнеров Azure, параметры Azure Load Balancer, надстройки AKS, параметры диагностики и т. д. Этот контроль обеспечивает согласованность в «взгляде» и «топология» кластеров в организациях. Это также необходимо сделать, чтобы выполнить начальную загрузку развертывания кластера, например, какие агенты безопасности должны быть установлены и как они должны быть настроены.

<!-- docutune:casing Bicep CVEs -->

Кластеры «снежинка» трудно контролировать в любой центральной емкости. Сократите количество несоответствий между кластерами, чтобы политики могли применяться единообразно и необычные кластеры, не рекомендуется и обнаруживаемые. Сюда также могут входить технологии, используемые для развертывания кластеров, например ARM, Бицеп или terraform.

Политика Azure, применяемая на уровне группы управления или подписки, может помочь в реализации многих из этих рекомендаций, но не все.

### <a name="kubernetes-workload-governance"></a>Управление рабочей нагрузкой Kubernetes

Так как Kubernetes сама по себе является платформой, вторая — управление тем, что происходит в кластере. Сюда входят такие вещи, как руководство по пространству имен, политики сети, Kubernetes RBAC, ограничения и квоты. Это будет применено к рабочим нагрузкам, чем к кластеру. Каждая рабочая нагрузка будет уникальной, так как все они решают различные бизнес-задачи и будут реализованы различными способами с различными технологиями. Может не быть много "один размер подходит всем", но следует рассмотреть возможность управления для создания и потребления артефактов OCI, требований к цепочке поставок, общего использования реестра контейнеров, процесса карантина изображений, управления конвейером развертывания.

Рассмотрите возможность стандартизации общих средств и шаблонов, если практикабле. Поставьте рекомендации по технологиям, таким как Helm, сеть службы, входящие контроллеры, операторы Гитопс, постоянные тома и т. д. Кроме того, здесь можно управлять использованием секретов управляемого удостоверения и источников данных Pod из Key Vault.

Обеспечьте строгие ожидания доступа к телеметрии, чтобы владельцы рабочей нагрузки имели соответствующий доступ к метрикам и данным, необходимым для улучшения их продукта, а также гарантируя, что операторы кластера имеют доступ к телеметрической метрике системы, чтобы улучшить свое предложение услуги. Данные часто должны быть взаимосвязаны между ними. Убедитесь, что установлены политики управления для обеспечения соответствующего доступа при необходимости.

Политика Azure для AKS, применяемая на уровне кластера, может помочь в доставке некоторых из них, но не все.

### <a name="cluster-operator-roles-devops-sre"></a>Роли оператора кластера (DevOps, выполняются)

Третья — управление ролями операторов кластера. Как выполняются команды для взаимодействия с кластерами? Какова взаимосвязь между группой и группой рабочей нагрузки. Они одинаковы? Операторы кластера должны иметь четко определенные сборник тренировочных заданий для действий рассмотрения в кластере, например, как они обращаются к кластерам, откуда они обращаются к кластерам и какие разрешения они имеют в кластерах, а также когда назначены эти разрешения. Все различия вносятся в документацию по управлению, политику и обучающие материалы по операторам рабочей нагрузки и оператору Cluster в этом контексте. В зависимости от Организации они могут быть одинаковыми.

### <a name="cluster-per-workload-or-many-workloads-per-cluster"></a>Кластер на рабочую нагрузку или многие рабочие нагрузки на кластер

Четвертый — управление многоаренды. Это означает, что кластеры содержат «похожие» приложения, принадлежащие по определению одной команде рабочей нагрузки и представляющие *один набор* связанных компонентов рабочей нагрузки. Или кластеры должны быть, по своей природе, несколькими клиентами, имеющими несколько разнородных рабочих нагрузок и владельцев рабочей нагрузки. выполнение и управление как управляемым предложением услуги в Организации. Стратегия управления важна для каждой из них, и поэтому следует контролировать, что выбранная стратегия применяется. Если требуется поддержка обеих моделей, убедитесь, что план управления четко определен, для каких типов кластеров применяются политики.

Этот вариант должен быть сделан на [этапе стратегии](./strategy.md) , поскольку он оказывает значительное влияние на персонал, бюджетирование и инновации.

### <a name="stay-current-efforts"></a>Оставайтесь в курсе текущих усилий

Пятый — это операции, такие как обновление образа узла (установка исправлений) и управление версиями Kubernetes. Кто отвечает за обновление образа узла, отслеживание примененных исправлений, отслеживание и совместный доступ Kubernetes и AKS CVE планов исправления? Группы рабочей нагрузки *должны* быть вовлечены в проверку работы решения при обновлении кластера, и если кластеры не являются актуальными, они будут отключены от службы поддержки Azure. Наличие надежного управления для «Оставайтесь в курсе» усилий очень *важно* в AKS, т. е. в большинстве других платформ в Azure. Это потребует очень близкого рабочего отношения к группам приложений и выделенному времени по крайней мере ежемесячно для проверки рабочей нагрузки, чтобы обеспечить актуальность кластеров. Убедитесь, что все группы, принимающие зависимость от Kubernetes, понимают требования и стоимость текущих усилий, которые будут в последний раз, пока они находятся на платформе.

### <a name="security-baseline"></a>Базовые средства безопасности

Следующие рекомендации можно добавить в базовый уровень безопасности для учета безопасности кластеров AKS:

- [Защита модулей Pod](/azure/aks/use-pod-security-on-azure-policy?bc=/azure/cloud-adoption-framework/_bread/toc.json&toc=/azure/cloud-adoption-framework/toc.json)
- [Безопасный трафик между модулями Pod](/azure/aks/use-network-policies?bc=/azure/cloud-adoption-framework/_bread/toc.json&toc=/azure/cloud-adoption-framework/toc.json)
- [Авторизация доступа к IP-адресу для API AKS](/azure/aks/api-server-authorized-ip-ranges?bc=/azure/cloud-adoption-framework/_bread/toc.json&toc=/azure/cloud-adoption-framework/toc.json) , если не используются частные кластеры.

### <a name="identity"></a>Идентификация

Существует множество рекомендаций, которые можно применить к базовому показателю идентификации, чтобы обеспечить согласованное управление удостоверениями и доступом в кластерах Kubernetes:

- [Интеграция Azure AD](/azure/aks/managed-aad?bc=/azure/cloud-adoption-framework/_bread/toc.json&toc=/azure/cloud-adoption-framework/toc.json)
- [RBAC и интеграция Azure AD](/azure/aks/azure-ad-rbac?bc=/azure/cloud-adoption-framework/_bread/toc.json&toc=/azure/cloud-adoption-framework/toc.json)
- [Управляемые удостоверения в Kubernetes](/azure/aks/use-managed-identity?bc=/azure/cloud-adoption-framework/_bread/toc.json&toc=/azure/cloud-adoption-framework/toc.json)
- [Доступ к другим ресурсам Azure с помощью удостоверения Pod Azure AD](/azure/aks/use-azure-ad-pod-identity?bc=/azure/cloud-adoption-framework/_bread/toc.json&toc=/azure/cloud-adoption-framework/toc.json)

## <a name="next-step-manage-modern-container-solutions"></a>Следующий шаг: Управление решениями современных контейнеров

В следующих статьях приводятся рекомендации в конкретных точках пути внедрения в облако, которые помогут вам успешно пройти сценарий внедрения в облако.

- [Управление решениями современных контейнеров](./manage.md)
