---
title: Управление удостоверениями и доступом
description: Ознакомьтесь со сведениями о проектировании и рекомендациями по управлению удостоверениями и доступом в корпоративной среде.
author: BrianBlanchard
ms.author: brblanch
ms.date: 06/15/2020
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
ms.openlocfilehash: 16e5be68c1a2089715a1896d325f1c3c2aa7f24a
ms.sourcegitcommit: 4bbd5f6444d033ef1f38dc6f3bad7b914a82f68f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/08/2020
ms.locfileid: "86128414"
---
# <a name="identity-and-access-management"></a>Управление удостоверениями и доступом

Удостоверение предоставляет базу данных большого объема в процентах от гарантии безопасности. Удостоверение обеспечивают доступ на основе проверки подлинности и управления авторизацией в облачных службах для защиты данных и ресурсов и принятия решения о том, какие запросы должны быть разрешены.

Управление удостоверениями и доступом (IAM) — это безопасность границ в общедоступном облаке, которая должна рассматриваться как основа любой безопасной и полностью совместимой архитектуры общедоступного облака. Microsoft Azure предлагает комплексный набор служб, средств и эталонных архитектур, позволяющих организациям обеспечить высокую безопасность, экономичные среды и, как описано здесь.

В этом разделе рассматриваются вопросы проектирования и рекомендации по управлению удостоверениями и доступом в корпоративной среде.

## <a name="why-we-need-identity-and-access-management"></a>Зачем требуется управление удостоверениями и доступом

Технологические ландшафты на предприятии становятся сложными и разнородных. Для управления соответствием и безопасностью в этой среде, IAM позволяет пользователям, которые правильно обращаются к нужным ресурсам в нужное время, правильно использовать ресурсы.

### <a name="planning-for-identity-and-access-management"></a>Планирование управления удостоверениями и доступом

Корпоративные организации обычно используют подход с минимальными правами доступа к рабочему доступу. Эта модель должна быть расширена, чтобы в Azure можно было использовать управление доступом на основе ролей (RBAC) Azure AD и пользовательские определения ролей. Очень важно спланировать, как управлять доступом к ресурсам в Azure на уровне управления и плоскости данных. Любой проект для IAM и RBAC должен соответствовать нормативным требованиям, безопасности и эксплуатационным требованиям, прежде чем его можно будет принять.

Управление удостоверениями и доступом — это многоэтапный процесс, включающий тщательное планирование интеграции удостоверений и других соображений безопасности, таких как блокирование устаревшей проверки подлинности и планирование современных паролей. Планирование промежуточного хранения также включает в себя выбор управления удостоверениями и доступом "бизнес-бизнес" (B2B) или "бизнес-потребитель" (B2C). Хотя эти требования различаются, существуют общие рекомендации по проектированию и рекомендации для корпоративной целевой зоны.

![Управление удостоверениями и доступом](./media/iam.png)

_Рис. 1. Управление удостоверениями и доступом._

**Рекомендации по проектированию:**

- Существует ряд ограничений на количество пользовательских ролей и назначений ролей, которые следует учитывать при создании структуры для IAM и управления. Их можно найти здесь: [ограничения службы RBAC Azure](https://docs.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits#role-based-access-control-limits) .
- Существует ограничение в 2000 пользовательских назначений ролей RBAC на подписку.

- Существует ограничение 500 настраиваемых ролей RBAC для каждой группы управления.

- Централизованное и федеративное владение ресурсами.

  - Общие ресурсы или любой аспект среды, реализующий или устанавливающий границу безопасности, например сеть, должна управляться централизованно. Это требование для многих нормативных платформ, а также стандартная практика для любой организации, которая предоставляет или запрещает доступ к конфиденциальным или важным бизнес-ресурсам.

  - Управление ресурсами приложений, которые не нарушают границы безопасности или другие аспекты, необходимые для обеспечения безопасности и соответствия требованиям, может быть делегировано группам приложений. Предоставление пользователям возможности подготавливать ресурсы в безопасно управляемой среде позволяет организациям воспользоваться преимуществами гибкой природы облака, одновременно предотвращая нарушение безопасности или границы управления.

<!-- docsTest:ignore Azure-AD-only Azure-AD-managed NetOps SecOps AppOps -->

**Рекомендации по проектированию:**

- Используйте Azure AD [RBAC](https://docs.microsoft.com/azure/role-based-access-control/overview) для управления доступом к ресурсам на уровне данных (например, Azure Key Vault, учетную запись хранения или базу данных SQL).

- Развертывание политик условного доступа Azure AD для любого пользователя с правами в средах Azure. Это предоставляет еще один механизм защиты от несанкционированного доступа к управляемой среде Azure.

- Применяйте многофакторную проверку подлинности для любого пользователя с правами в средах Azure. Это требование многих платформ соответствия требованиям и значительно снижает риск кражи учетных данных и несанкционированного доступа.

- Используйте [Azure AD privileged Identity Management (PIM)](https://docs.microsoft.com/azure/active-directory/privileged-identity-management/pim-configure) , чтобы установить нулевой доступ и наименьшую привилегию. Сопоставьте роли Организации с минимальным требуемым уровнем доступа. Служба PIM Azure AD может быть расширением существующих средств и процессов, использовать собственные инструменты Azure, как описано выше, или использовать их при необходимости.

- Используйте группы, предназначенные только для Azure AD, для ресурсов плоскости управления Azure в Azure AD PIM при предоставлении доступа к ресурсам.

  - Добавьте локальные группы в группу только Azure AD, если система управления группами уже существует.

- Используйте проверки доступа PIM Azure AD для периодической проверки прав на ресурсы. Проверки доступа являются частью многих платформ соответствия требованиям, поэтому во многих организациях уже есть процесс, позволяющий решить эту потребность.

- Интеграция журналов Azure AD с платформой [Azure Monitor](https://docs.microsoft.com/azure/active-directory/reports-monitoring/concept-activity-logs-azure-monitor). Azure Monitor позволяет одному источнику вести себя на основе данных журналов и мониторинга в Azure, предоставляя организациям собственные возможности для удовлетворения требований к сбору и хранению журналов.

- Если существуют какие – либо требования к независимости данных, то для их применения можно развернуть пользовательские политики пользователя.

- Используйте пользовательские определения ролей RBAC в клиенте Azure AD, принимая во внимание следующие ключевые роли.

| Роль | Использование | Действия | Нет действий |
|---|---|---|---|
| Владелец платформы Azure               | Управление жизненным циклом группы управления и подписки                                                           | `*`                                                                                                                                                                                                                  |                                                                                                                                                                                         |
| Управление сетью (Нетопс)        | Глобальное управление подключением на уровне платформы: виртуальных сетей, определяемые пользователем маршруты, группы безопасности сети, NVA, VPN, ExpressRoute и др.            | `*/read`, `Microsoft.Authorization/*/write`, `Microsoft.Network/vpnGateways/*`, `Microsoft.Network/expressRouteCircuits/*`, `Microsoft.Network/routeTables/write`, `Microsoft.Network/vpnSites/*`                              |                                                                                                                                                                               |
| Операции безопасности (SecOps)       | Роль администратора безопасности с горизонтальным представлением всей области Azure и политики очистки Azure Key Vault | `*/read`, `*/register/action`, `Microsoft.KeyVault/locations/deletedVaults/purge/action`, `Microsoft.Insights/alertRules/*`, `Microsoft.Authorization/policyDefinitions/*`, `Microsoft.Authorization/policyAssignments/*`, `Microsoft.Authorization/policySetDefinitions/*`, `Microsoft.PolicyInsights/*`, `Microsoft.Security/*` |                                                                            |
| Владелец подписки                 | Делегированная роль владельца подписки, полученная от роли владельца подписки                                       | `*`                                                                                                                                                                                                                  | `Microsoft.Authorization/*/write`, `Microsoft.Network/vpnGateways/*`, `Microsoft.Network/expressRouteCircuits/*`, `Microsoft.Network/routeTables/write`, `Microsoft.Network/vpnSites/*` |
| Владельцы приложений (DevOps/Аппопс) | Роль участника, предоставленная группе приложений или операций на уровне группы ресурсов                                 |                                                                                                                                                                                                                    | `Microsoft.Network/publicIPAddresses/write`, `Microsoft.Network/virtualNetworks/write`, `Microsoft.KeyVault/locations/deletedVaults/purge/action`                                         |

- Используйте JIT-доступ к центру безопасности Azure для всех ресурсов IaaS (инфраструктура как услуга), чтобы обеспечить защиту на уровне сети для временного доступа пользователей к виртуальным машинам IaaS.

- Используйте управляемые Azure AD удостоверения для ресурсов Azure, чтобы избежать проверки подлинности на основе имен пользователей и паролей. Так как многие нарушения безопасности общедоступных облачных ресурсов поступили с хищением учетных данных, внедренным в код или другими текстовыми источниками, применение управляемых удостоверений для программного доступа значительно сокращает риск кражи учетных данных.

- Используйте привилегированные удостоверения для модулей Runbook службы автоматизации, для которых требуются повышенные права доступа. Автоматизированные рабочие процессы, которые нарушают критические границы безопасности, должны управляться теми же инструментами и политиками, что и пользователи эквивалентных привилегий.

- Не добавляйте пользователей непосредственно в области ресурсов Azure. Отсутствие централизованного управления значительно увеличивает управление, необходимое для предотвращения несанкционированного доступа к ограниченным данным.

### <a name="planning-for-authentication-inside-a-landing-zone"></a>Планирование проверки подлинности в целевой зоне

Важное решение по проектированию, которое корпоративная организация должна принять при внедрении Azure, — это необходимость расширения существующего локального домена удостоверений в Azure или создания нового фирменного уровня. Требования к проверке подлинности в целевой зоне должны быть тщательно оценены и включены в планы развертывания домен Active Directory служб (AD DS) в Windows Server, доменных службах Azure AD или в обоих случаях. Большинство сред Azure будут использовать по крайней мере Azure AD для аутентификации Azure Fabric и AD DS проверку подлинности на локальном узле и управление групповыми политиками.

**Рекомендации по проектированию:**

- Для управления ресурсами, развернутыми в целевой зоне, рекомендуется использовать централизованные и делегированные обязанности.

- Приложения, использующие доменные службы и использующие старые протоколы, могут использовать [доменные службы Azure AD](https://docs.microsoft.com/azure/active-directory-domain-services).

**Рекомендации по проектированию:**

- Используйте как централизованные, так и делегированные обязанности для управления ресурсами, развернутыми в целевой зоне, на основе требований к ролям и безопасности.

- Для привилегированных операций, таких как создание объектов субъекта-службы, регистрация приложений в Azure AD, приобретение и обработка сертификатов или сертификатов с подстановочными знаками, требуются специальные разрешения. Определите, какие пользователи будут обрабатывать такие запросы, а также как защитить и отслеживать свои учетные записи с помощью необходимой степени их экспертизы.

- Если в Организации есть сценарий, в котором приложение, использующее встроенную проверку подлинности Windows, должно быть доступно удаленно через Azure AD, попробуйте использовать [azure AD application proxy](https://docs.microsoft.com/azure/active-directory/manage-apps/application-proxy).

- Существует разница между Azure AD, доменными службами Azure AD и AD DS, работающими на Windows Server. Оцените потребности приложения, а также выясните и задокументируйте поставщик проверки подлинности, который будет использоваться каждым из них. Планируйте соответствующим образом для всех приложений.

- Оцените совместимость рабочих нагрузок для AD DS в Windows Server и доменных службах Azure AD.

- Убедитесь, что структура сети позволяет ресурсам, требующим AD DS на Windows Server, выполнять локальную аутентификацию и управление для доступа к соответствующим контроллерам домена.

  - Для AD DS в Windows Server рассмотрите среды общих служб, которые обеспечивают локальную проверку подлинности и управление узлом в более крупном контексте сети корпоративного уровня.

- Развертывание доменных служб Azure AD в основном регионе, так как эта служба может быть проецирована только в одну подписку.

- Используйте управляемые удостоверения вместо субъектов-служб для проверки подлинности в службах Azure. Это снижает вероятность кражи учетных данных.
