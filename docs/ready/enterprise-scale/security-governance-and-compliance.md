---
title: Управление безопасностью и соответствие требованиям в масштабах предприятия КАФ
description: Сведения о корпоративном масштабировании системы безопасности и соответствии требованиям в рамках платформы внедрения Microsoft Cloud для Azure.
author: BrianBlanchard
ms.author: brblanch
ms.date: 06/15/2020
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
ms.openlocfilehash: a0543327e50ad50e4e3ada792999bc057c53e499
ms.sourcegitcommit: 71a4f33546443d8c875265ac8fbaf3ab24ae8ab4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/20/2020
ms.locfileid: "86479455"
---
# <a name="caf-enterprise-scale-security-governance-and-compliance"></a>Управление безопасностью и соответствие требованиям в масштабах предприятия КАФ

## <a name="define-encryption-and-key-management"></a>Определение шифрования и управления ключами

Шифрование — это важный шаг для обеспечения конфиденциальности данных, обеспечения соответствия требованиям и местонахождение данных в Microsoft Azure. Это также одна из наиболее важных проблем безопасности многих предприятий. В этом разделе рассматриваются рекомендации по проектированию и рекомендации по их отношению к шифрованию и управлению ключами.

**Рекомендации по проектированию:**

- Ограничения подписки и масштабирования, применяемые к Azure Key Vault: Key Vault имеет ограничения транзакций для ключей и секретов. Сведения о регулировании транзакций на хранилище в течение определенного периода см. в разделе ([ограничения Azure](https://docs.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits)).

- Key Vault выполняет границу безопасности, так как разрешения на доступ к ключам, секретам и сертификатам находятся на уровне хранилища. Назначения политики доступа Key Vault предоставляют разрешения отдельно для ключей, секретов или сертификатов, но они не поддерживают детализированные разрешения уровня объектов, такие как конкретный ключ, секрет или сертификат ([Управление ключами](https://docs.microsoft.com/azure/security/fundamentals/data-encryption-best-practices)).

- Вы можете изолировать секреты и общие секреты конкретного приложения и рабочей нагрузки в соответствии с соответствующими правами ([Control Access](https://docs.microsoft.com/azure/key-vault/general/best-practices)).

<!-- cSpell:ignore FIPS -->

- Номера SKU уровня Premium можно оптимизировать там, где требуются ключи, защищенные аппаратным обеспечением безопасности модуля. Базовые аппаратные модули безопасности (HSM) соответствуют стандарту FIPS 140-2 уровня 2. Управляемый выделенный АППАРАТный модуль Azure для соответствия требованиям FIPS 140-2 уровня 3, учитывая Поддерживаемые сценарии.

- Смена ключа и истечение срока действия секрета.

  - Закупок и подписывание сертификатов с помощью Key Vault ([о сертификатах](https://docs.microsoft.com/azure/key-vault/certificates/about-certificates))
  - Оповещения, уведомления и автоматическое продление срока действия сертификатов

- Требования к аварийному восстановлению ключей, сертификатов и секретов.

  Key Vault репликация службы и возможности отработки отказа: ([доступность и избыточность](https://docs.microsoft.com/azure/key-vault/general/disaster-recovery-guidance)).

- Контроль использования ключей, сертификатов и секретов.

  Обнаружение несанкционированного доступа с помощью хранилища ключей или Azure Monitor Log Analytics рабочей области: ([мониторинг и оповещения](https://docs.microsoft.com/azure/key-vault/general/alert))

- Делегированный Key Vault создание экземпляра и привилегированный доступ: ([безопасный доступ](https://docs.microsoft.com/azure/key-vault/general/secure-your-key-vault))

- Требования к использованию управляемых клиентом ключей для собственных механизмов шифрования, таких как шифрование службы хранилища Azure (SSE):
  - [Ключи, управляемые клиентом](https://docs.microsoft.com/azure/storage/common/storage-encryption-keys-portal).
  - Всего — шифрование диска для виртуальных машин.
  - Шифрование транзитных данных.
  - Шифрование неактивных данных.

**Рекомендации по проектированию:**

- Используйте модель федеративного Azure Key Vault, чтобы избежать ограничений шкалы транзакций.

- Подготавливайте Azure Key Vault с включенными политиками обратимого удаления и очистки, чтобы обеспечить защиту удаленных объектов.

- Используйте модель с минимальными правами доступа, ограничивая авторизацию для окончательного удаления ключей, секретов и сертификатов для специализированных пользовательских ролей Azure Active Directory.

- Автоматизируйте процесс управления сертификатами и обновления с помощью общедоступных центров сертификации, чтобы упростить администрирование.

- Создание автоматизированного процесса для смены ключей и сертификатов.

- Включите брандмауэр и конечную точку службы виртуальной сети в хранилище, чтобы управлять доступом к хранилищу ключей.

- Используйте рабочую область Azure Monitor платформы Log Analytics для аудита использования ключей, сертификатов и секретов в каждом экземпляре Key Vault.

- Делегирование Key Vault создание экземпляра и привилегированный доступ с помощью политики Azure для принудительной настройки соответствия требованиям.

- По умолчанию ключи, управляемые корпорацией Майкрософт, используются для шифрования основных функций и при необходимости используют ключи, управляемые клиентом.

- Не используйте централизованные экземпляры Key Vault для ключей приложений или секретов.

- Не предоставляйте доступ к экземплярам Key Vault между приложениями, чтобы избежать общего доступа к секретам в разных средах.

## <a name="planning-for-governance"></a>Планирование управления

Управление предусматривает механизмы и процессы для соответствующего обслуживания приложений и ресурсов в Azure. Политика Azure необходима для обеспечения безопасности и соответствия требованиям в рамках корпоративных технических площадок. Она может обеспечить соблюдение критически важных правил управления и безопасности в службах платформы Azure, а также обеспечивает управление доступом на основе ролей, которое управляет действиями, которые могут выполнять полномочные пользователи.

**Рекомендации по проектированию:**

- Определение необходимых политик Azure

- Применение соглашений об управлении и безопасности, таких как использование частных конечных точек

- Для управления и создания назначений политик определения политик можно повторно использовать в нескольких наследуемых областях назначения. В группах управления, подписках и группах ресурсов могут быть централизованные назначения базовых политик.

- Отчеты о соответствии и аудит для обеспечения непрерывности соответствия

- Политика Azure имеет ограничения, такие как ограничение определений в любой заданной области: ([ограничения политики](https://docs.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits))

- Политики соответствия нормативным требованиям, такие как акт о переносе и обеспечении безопасности страхования работоспособности, стандарт PCI, стандарты защиты данных, субъекты-службы управления организацией (SOC) и критерии.

**Рекомендации по проектированию:**

- Укажите необходимые теги Azure и используйте режим политики добавления для принудительного использования

- Сопоставьте нормативные требования и соответствие требованиям для определений политик Azure и назначений управления доступом на основе ролей Azure AD

- Установите определения политик Azure в корневой группе управления верхнего уровня, чтобы их можно было назначить в унаследованных областях.

- Управление назначениями политик на наиболее подходящем уровне с исключениями на нижних уровнях, если это необходимо

- Использование политики Azure для управления регистрацией поставщиков ресурсов на уровнях подписки и/или группы управления

- Используйте встроенные политики, когда возможно, чтобы сократить эксплуатационные расходы

- Назначьте встроенную роль участника политики в заданной области, чтобы включить управление на уровне приложения.

- Ограничьте число назначений политики Azure, сделанных в корневой области группы управления, чтобы избежать управления исключениями в унаследованных областях

## <a name="define-security-monitoring-and-an-audit-policy"></a>Определение мониторинга безопасности и политики аудита

Важно, чтобы предприятие имело представление о том, что происходит в своем техническом облаке. Мониторинг безопасности и ведение журнала аудита служб платформы Azure — ключевой компонент масштабируемой платформы.

**Рекомендации по проектированию:**

- Сроки хранения данных аудита; Срок хранения отчетов Azure AD (Premium) составляет 30 дней.

- Долгосрочное архивирование журналов, таких как журналы действий Azure, журналы виртуальных машин и журналы платформы как услуги (PaaS);

- Базовая конфигурация безопасности с помощью политики гостевой виртуальной машины Azure

- Экстренные исправления для критических уязвимостей

- Исправление для виртуальных машин, которые находятся в автономном режиме в течение продолжительного периода времени

- Требования для мониторинга в реальном времени и оповещений

- Интеграция управления сведениями о безопасности и событиями с помощью центра безопасности Azure и Sentinel

- Оценка уязвимостей виртуальных машин

**Рекомендации по проектированию:**

- Использование возможностей отчетов Azure AD для создания отчетов аудита контроля доступа

- Экспорт журналов действий Azure в журналы Azure Monitor для долгосрочного хранения данных и экспорта в хранилище Azure для долгосрочного хранения свыше двух лет (при необходимости)

- Включение центра безопасности (SKU "Стандартный") для всех подписок, использование политики Azure для обеспечения соответствия

- Наблюдение за обновлением базовой ОС с помощью журналов Azure Monitor и центра безопасности Azure

- Использование политик Azure для автоматического развертывания конфигураций программного обеспечения с помощью расширений виртуальной машины и принудительного применения соответствующей конфигурации базовой виртуальной машины

- Отслеживание смещения конфигурации безопасности виртуальной машины с помощью политики Azure

- Подключение конфигураций ресурсов по умолчанию к централизованной Log Analytics рабочей области Azure Monitor

- Использование решения на основе сетки событий для регистрации оповещений в режиме реального времени в журнале

## <a name="plan-for-platform-security"></a>Планирование безопасности платформы

При внедрении Azure важно поддерживать работоспособность системы безопасности. Помимо видимости, необходимо иметь возможность управлять исходными параметрами и изменениями по мере развития служб Azure. Поэтому планирование безопасности платформы является ключом.

**Рекомендации по проектированию:**

- Общая ответственность

- Высокая доступность и аварийное восстановление

- Согласованная безопасность между службами Azure с точки зрения операций управления данными и плоскости управления

- Мультитенантность для ключевых компонентов платформы, от Hyper-V и HSM лежащая Key Vault до ядер СУБД.

**Рекомендации по проектированию:**

- Совместное изучение каждой требуемой службы должно выполняться в контексте базовых требований. Если вы хотите использовать собственные ключи, это может быть не поддерживается во всех признанных службах. Необходимо реализовать соответствующие меры, чтобы несогласованность не ухудшит желаемые результаты. Выберите соответствующие пары регионов и регионы аварийного восстановления, которые снижают задержку.

- Разработайте план списка разрешений безопасности для оценки конфигурации безопасности служб, мониторинга, оповещений и интеграции их с существующими системами.

- Прежде чем разрешить, определите план реагирования на инциденты для служб Azure.

- Используйте возможности отчетов Azure AD для создания отчетов аудита контроля доступа.

- Выровняйте свои требования к безопасности с помощью планов платформы Azure, чтобы оставаться в курсе новых элементов управления безопасностью.

- Реализуйте подход с нулевым доверием для доступа к платформе Azure, где это уместно.

<!-- docsTest:ignore "and conditional access" -->

## <a name="service-enablement-framework"></a>Платформа включения службы

В качестве бизнес-единиц для развертывания рабочих нагрузок в Azure требуется дополнительная видимость рабочей нагрузки, чтобы определить, как добиться соответствующих уровней управления, безопасности и соответствия требованиям. Если требуется новая служба, которая не была подключена, это позволит службе. В следующей таблице представлена платформа для оценки готовности служб Azure к обеспечению корпоративной безопасности.

| Оценка                    | Категория                                                              | Критерии                                                                                                                                     |
|------------------------------|-----------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| Безопасность                     | Конечная точка сети                                                      | Есть ли у службы общедоступная конечная точка, доступная за пределами виртуальной сети?                                                                |
|                              |                                                                       | Поддерживает ли она конечные точки службы виртуальной сети?                                                                                                      |
|                              |                                                                       | Могут ли службы Azure напрямую взаимодействовать с конечной точкой службы?                                                                              |
|                              |                                                                       | Поддерживает ли она конечные точки частной связи?                                                                                                           |
|                              |                                                                       | Можно ли развернуть его в виртуальной сети?                                                                                                            |
|                              | Предотвращение кражи данных                                          | Имеет ли служба PaaS отдельное сообщество протоколов пограничного шлюза в ExpressRoute Майкрософт для пиринга? (Иными словами, ER предоставляет фильтр маршрутов для службы?) |
|                              |                                                                       | Поддерживает ли служба конечные точки частной связи?                                                                                                       |
|                              | Обеспечение потока сетевого трафика для операций управления и плоскости данных | Возможна ли проверка трафика при входе или выходе из службы? Может ли трафик вызывать принудительное туннелирование с помощью определяемой пользователем маршрутизации?                                    |
|                              |                                                                       | Используются ли в операциях управления диапазоны общих общедоступных IP-адресов Azure?                                                                                 |
|                              |                                                                       | Проходит ли трафик управления через конечную точку локальной связи, доступную на узле?                                                                |
|                              | Шифрование неактивных данных                                               | Применяется ли шифрование по умолчанию?                                                                                                            |
|                              |                                                                       | Можно ли отключить шифрование?                                                                                                                  |
|                              |                                                                       | Выполняется ли шифрование с помощью ключей, управляемых корпорацией Майкрософт, или ключей, управляемых клиентом?                                                   |
|                              | Транзитное шифрование данных                                            | Является ли трафик к службе зашифрован на уровне протокола (защищенный уровень сокетов/безопасность транспортного уровня)?                                                                           |
|                              |                                                                       | Существуют ли конечные точки HTTP и можно ли их отключить?                                                                                        |
|                              |                                                                       | Шифруется ли также связь базовой службы?                                                                                          |
|                              |                                                                       | Выполняется ли шифрование с помощью ключей, управляемых корпорацией Майкрософт, или ключей, управляемых клиентом? (Поддерживает ли ваш собственный шифрование?)                                                                               |
|                              | Развертывание программного обеспечения                                                   | Можно ли развернуть программное обеспечение приложения или продукты сторонних производителей в службе?                                                                 |
|                              |                                                                       | Как выполняется и управляется развертыванием программного обеспечения?                                                                                            |
|                              |                                                                       | Могут ли применяться политики для управления целостностью исходного кода или кодов?                                                                                   |
|                              |                                                                       | Если программное обеспечение развернуто, можно ли использовать средства защиты от вредоносных программ, управления уязвимостью и мониторинга безопасности?                                  |
|                              |                                                                       | Предоставляет ли служба собственные возможности? (Например, AKS)                                                                              |
| Управление удостоверениями и доступом | Управление проверкой подлинности и доступом                                       | Все операции плоскости управления управляются Azure AD? (Иными словами, есть ли вложенная плоскость управления, например для Kubernetes?)                             |
|                              |                                                                       | Какие существуют методы для предоставления доступа к плоскости данных?                                                                                      |
|                              |                                                                       | Интегрируется ли плоскость данных с Azure AD?                                                                                                      |
|                              |                                                                       | Используется ли проверка подлинности Azure to Azure (служба для службы)?                                                         |
|                              |                                                                       | Входит ли Azure в IaaS (служба для виртуальной сети) через Azure AD?                                                                                   |
|                              |                                                                       | Как действуют все применимые ключи и SAS?                                                                                                     |
|                              |                                                                       | Как можно отозвать доступ?                                                                                                                   |
|                              | Разделение обязанностей                                                 | Разделяют ли службы плоскости управления и операции с плоскостью данных в Azure AD?                                                                |
|                              | Многофакторная проверка подлинности и условный доступ                                            | Применяется ли многофакторная проверка подлинности для взаимодействия пользователя с обслуживанием?                                                                                            |
| Система управления                   | Экспорт и импорт данных                                                  | Поддерживает ли служба шифрование и экспорт данных в безопасном и зашифрованном виде?                                                                     |
|                              | Конфиденциальность и использование данных                                                  | Могут ли специалисты Майкрософт получить доступ к данным?                                                                                                     |
|                              |                                                                       | Служба поддержки Майкрософт взаимодействует с аудитом службы?                                                                               |
|                              | Местонахождение данных                                                        | Данные содержатся в регионе развертывания службы?                                                                                          |
| Операции                   | Наблюдение                                                            | Интегрируется ли служба с Azure Monitor?                                                                                               |
|                              | Управление резервным копированием                                                     | Какие данные рабочей нагрузки необходимо зарезервировать?                                                                                                       |
|                              |                                                                       | Как записываются резервные копии?                                                                                                                    |
|                              |                                                                       | Как часто могут быть созданы резервные копии?                                                                                                         |
|                              |                                                                       | Как долго можно хранить резервные копии?                                                                                                        |
|                              |                                                                       | Резервные копии зашифрованы?                                                                                                                       |
|                              |                                                                       | Выполняется ли шифрование резервных копий с помощью ключей, управляемых корпорацией Майкрософт, или управляемых клиентом ключей?                                                                                             |
|                              | Аварийное восстановление                                                     | Как служба может использоваться в регионально избыточном виде?                                                                                 |
|                              |                                                                       | Что такое RTO и RPO?                                                                                                          |
|                              | номер SKU                                                                   | Какие номера SKU доступны? И как они отличаются?                                                                                             |
|                              |                                                                       | Существуют ли функции, связанные с безопасностью SKU уровня "Премиум"?                                                                                  |
|                              | Управление емкостью                                                   | Как отслеживается емкость?                                                                                                                   |
|                              |                                                                       | Какова единица горизонтального масштабирования?                                                                                                        |
|                              | Управление исправлениями и обновлениями                                             | Требуется ли службе установка исправлений или она абстрагируется службой?                                                                        |
|                              |                                                                       | Как часто применяются исправления и их можно автоматизировать?                                                                                |
|                              | Аудит                                                                 | Захвачены ли вложенные операции плоскости управления (например, AKS или Azure Databricks)?                                                                      |
|                              |                                                                       | Записываются ли основные действия плоскости данных?                                                                                                      |
|                              | Управление конфигурацией                                              | Поддерживает ли он теги и предоставляет `put` схему для всех ресурсов?                                                                             |
| Соответствие служб Azure     | Аттестация службы, сертификация и внешние аудиты                | Соответствует ли служба PCI/ISO/SOC?                                                                                                        |
|                              | Доступность службы                                                  | Является ли служба закрытой предварительной версией или общедоступной предварительной версией?                                                                                            |
|                              |                                                                       | В каких регионах доступна служба?                                                                                                    |
|                              |                                                                       | Что такое область развертывания службы? (Иными словами, является ли он региональной или глобальной службой?)                                                      |
|                              | Соглашения об уровне обслуживания (SLA)                                              | Что такое соглашение об уровне обслуживания для доступности службы?                                                                                                    |
|                              |                                                                       | Если применимо, каково соглашение об уровне обслуживания для производительности?                                                                                              |
