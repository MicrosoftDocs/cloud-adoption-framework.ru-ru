---
title: Отслеживание затрат по всем бизнес-единицам, средам или проектам
description: Используйте инфраструктуру внедрения в облаке для Azure, чтобы понять, какие решения и подходы к реализации могут создавать механизмы отслеживания.
author: BrianBlanchard
ms.author: brblanch
ms.date: 09/05/2019
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
ms.openlocfilehash: 2e8d9c1c888b7b30322f8ddcce444968e73eefc9
ms.sourcegitcommit: 011525720bd9e2d9bcf03a76f371c4fc68092c45
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2020
ms.locfileid: "88574590"
---
# <a name="track-costs-across-business-units-environments-or-projects"></a>Отслеживание затрат по всем бизнес-единицам, средам или проектам

[Создание рентабельной организации](../../organize/cost-conscious-organization.md) требует видимости и надлежащего определения доступа к связанным с затратами данным (или их просмотра). В этой статье, основанной на передовом методе, описываются решения и подходы к созданию механизмов отслеживания.

![Общие черты процесса, ориентированного на затраты ](../../_images/ready/cost-optimization-process.png)
 _рис. 1. структура процесса, ориентированного на стоимость._

## <a name="establish-a-well-managed-environment-hierarchy"></a>Создание иерархии эффективно управляемой среды

Контроль за расходами, как и система управления и другие структуры управления, во многом зависит от эффективно управляемой среды. Создание такой среды (особенно сложной) требует последовательных процессов классификации и организации всех активов.

Активы (также известные как ресурсы) включают все виртуальные машины, источники данных и приложения, развернутые в облаке. Azure предоставляет несколько механизмов для классификации и организации активов. Организация параметров сведений о [подписках Azure и управление ими](../azure-best-practices/organize-subscriptions.md) для Организации ресурсов на основе нескольких критериев для создания хорошо управляемой среды. Эта статья посвящена применению фундаментальных концепций Azure для обеспечения видимости затрат в облаке.

### <a name="classification"></a>Классификация

_Расстановка тегов_ — это простой способ классификации активов. Расстановка тегов связывает метаданные с активом. Эти метаданные можно использовать для классификации актива, основанного на различных точках данных. Когда теги используются для классификации активов как частей работы по управлению затратами, компаниям часто требуются следующие теги: "бизнес-подразделение", "отдел", "платежный код", "регион", "среда", "проект", "рабочая нагрузка" или "категоризация приложений". Служба "Управление затратами Azure" и выставление счетов могут использовать эти теги для создания различных представлений данных о затратах.

Расстановка тегов является основным способом распознавания данных в любой отчетности по затратам. Это фундаментальная часть любой эффективно управляемой среды. А также первый шаг на пути к созданию надлежащего управления любой окружающей средой.

Первым шагом в точном отслеживании информации о затратах по всем бизнес-единицам, средам и проектам является определение стандарта расстановки тегов. Вторым шагом является обеспечение последовательного применения стандарта расстановки тегов. Следующие статьи помогут вам сделать следующее: [Разработка стандартов именования и маркировки](../azure-best-practices/naming-and-tagging.md) и [Создание MVP по управлению, чтобы обеспечить соблюдение стандартов тегов](../../govern/guides/complex/index.md)

### <a name="resource-organization"></a>Организация ресурсов

Существует несколько подходов к упорядочению активов. Данный раздел описывает лучшую методику, основанную на потребностях крупного предприятия со структурой затрат, распределенной по бизнес-единицам, регионам и IТ-организациям. Аналогичная рекомендация для небольших и менее сложных организаций доступна в [стандартном руководству по корпоративному управлению](../../govern/guides/standard/index.md).

Для крупного предприятия с помощью следующей модели для групп управления, подписок и ресурсных групп можно создать иерархию, которая позволит каждой команде иметь надлежащий уровень видимости для выполнения своих обязанностей. Когда предприятие нуждается в контроле над затратами для предотвращения перерасхода бюджета, оно может применить инструменты управления, такие как Azure Blueprints или политику Azure к подпискам в рамках этой структуры, чтобы быстро блокировать будущие ошибочные затраты.

![Схема Организации ресурсов для большого предприятия на ](../../_images/govern/large-enterprise-resource-organization.png)
 _рис. 2. Организация ресурсов для крупных предприятий._

На предыдущей диаграмме корень иерархии группы управления содержит узел для каждой бизнес-единицы. В данном примере многонациональной компании необходима видимость в региональных бизнес-единицах, поэтому она создает географический узел для каждой бизнес-единицы в иерархии.

В пределах каждого географического региона существует отдельный узел для производственных и непроизводственных сред, чтобы изолировать контроли затрат, доступа и управления. Чтобы обеспечить более эффективные операции и более разумные инвестиции, компания использует подписки для дальнейшей изоляции производственных сред с различной степенью обязательств по операционной эффективности. Наконец, компания использует группы ресурсов для захвата развертываемых единиц функции, называемых приложениями.

На диаграмме показаны рекомендации, но не указаны эти варианты:

- Многие компании ограничивают операции одним геополитическим регионом. Такой подход уменьшает потребность в диверсификации дисциплин системы управления или данных о расходах на основе суверенных требований локальных данных. В таких случаях географический узел не требуется.
- Некоторые компании предпочитают дальнейшее разделение разработки, тестирование и среды контроля качества в отдельных подписках.
- Когда компания объединяет команду Cloud Center of Excellence (CCoE), подписки на общие службы в каждом географическом узле могут сократить дублирующиеся активы.
- Меньшие трудозатраты на внедрение могут иметь гораздо меньшую иерархию управления. Широко распространенным является наличие одного корневого узла в корпоративных IТ — организациях с одинарным уровнем подчиненных узлов в иерархии для различных сред. Это не является нарушением рекомендаций для эффективно управляемой среды. Однако это все же затрудняет создание модели с минимальными правами на доступ к контролю над затратами и выполнению других важных функций.

Остальная часть этой статьи предполагает использование подхода, основанного на рекомендациях, представленных на предыдущей схеме. Но следующие статьи помогут вам применить подход к Организации ресурсов, которая лучше подходит вашей компании:

- [Масштабирование среды Azure с помощью нескольких подписок](../azure-best-practices/scale-subscriptions.md)
- [Организация и администрирование подписок Azure](../azure-best-practices/organize-subscriptions.md)
- [Развертывание MVP по управлению, чтобы управлять хорошо управляемыми стандартами среды](../../govern/guides/complex/index.md)

## <a name="provide-the-right-level-of-cost-access"></a>Предоставление правильного уровня доступа к затратам

Управление затратами является командной работой. Раздел "Готовность организации" в Cloud Adoption Framework определяет небольшое количество основных команд и описывает, как эти команды поддерживают трудозатраты по внедрению облачных технологий. Эта статья подробно описывает определения команд, чтобы определить объем и роли, которые необходимо назначить членам каждой команды для надлежащего уровня видимости данных по управлению затратами.

**Роли** определяют, что пользователь может делать с различными ресурсами. **Область** определяет ресурсы (пользователя, группу, субъект-службу или управляемое удостоверение), к которым пользователь может выполнять эти действия.

Ка правило, мы рекомендуем использовать модель с минимальными правами доступа при присвоении людям различных ролей и областей.

### <a name="roles"></a>Роли

<!-- docsTest:ignore Owner Contributor Reader "Cost Management Contributor" "Cost Management Reader" -->

Служба "Управление затратами Azure" и выставление счетов поддерживают следующие встроенные роли для каждой области:

- [Владелец](/azure/role-based-access-control/built-in-roles#owner): может просматривать затраты и управлять всеми, включая настройку затрат.
- [Участник](/azure/role-based-access-control/built-in-roles#contributor): может просматривать затраты и управлять всеми, включая настройку затрат, но без контроля доступа.
- [Читатель](/azure/role-based-access-control/built-in-roles#reader): может просматривать все, включая данные о затратах и конфигурацию, но не может вносить изменения.
- [Участник управления затратами](/azure/role-based-access-control/built-in-roles#cost-management-contributor): может просматривать затраты и управлять конфигурацией затрат.
- [Читатель управления затратами](/azure/role-based-access-control/built-in-roles#cost-management-reader): может просматривать данные о затратах и конфигурацию.

В соответствии с рекомендацией, членам всех групп должна быть назначена роль "Участник управления затратами". Эта роль предоставляет доступ к созданию бюджетов, управлению ними, а также их экспорта для более эффективного отслеживания затрат, а также их отчетности. Но члены [группы стратегии облака](../../organize/cloud-strategy.md) должны быть настроены только для чтения управления затратами. Это связано с тем, что они не участвуют в настройке бюджетов в средстве управления затратами Azure и выставления счетов.

### <a name="scope"></a>Область

Следующие настройки области и ролей создадут необходимую видимость в управлении затратами. Эта лучшая методика может потребовать незначительных изменений для соответствия с решениями об организации активов.

- [Группа внедрения в облако](../../organize/cloud-adoption.md). Ответственность за текущие изменения оптимизации требует доступа с ролью "Участник управления затратами" на уровне группы ресурсов.

  - **Рабочая среда.** Как минимум, команда по внедрению облачных технологий должна иметь доступ [Участник](/azure/role-based-access-control/built-in-roles#contributor) ко всем затронутым группам ресурсов или, по крайней мере, к группам, связанным с разработкой/тестированием или текущей деятельностью по развертыванию. Дополнительная настройка области не требуется.
  - **Рабочие среды.** Когда будет установлено надлежащее разделение ответственности, группа по внедрению облачных технологий, вероятно, больше не будет иметь доступ к группам ресурсов, связанным с ее проектами. Группам ресурсов, которые поддерживают производственные экземпляры своих рабочих нагрузок, понадобится дополнительная область, чтобы дать этой команде видимость влияния ее решений на производственные затраты. Установка параметра области [Участник управления затратами](/azure/role-based-access-control/built-in-roles#cost-management-contributor) для групп производственных ресурсов этой команды позволит команде отслеживать затраты и составлять бюджеты на основе использования и текущих инвестиций в поддерживаемые рабочие нагрузки.

- [Группа облачных стратегий](../../organize/cloud-strategy.md). Обязанности по отслеживанию затрат по нескольким проектам и бизнес-единицам требуют доступа с ролью "Читатель управления затратами" на корневом уровне иерархии групп управления.

  - Назначьте доступ [Читатель управления затратами](/azure/role-based-access-control/built-in-roles#cost-management-reader) этой команде в группе управления. Это обеспечит постоянную видимость всех развертываний, связанных с планами, регулируемыми иерархией этих групп управления.

- [Группа по управлению облаком](../../organize/cloud-governance.md). Ответственность за управление затратами, согласование бюджета и отчетность в рамках всех работ по внедрению требует доступа с ролью "Участник оптимизации управления затратами" на корневом уровне иерархии группы управления.

  - В эффективно управляемой среде команда по управлению облачными технологиями, вероятно, уже имеет более высокий уровень доступа, что делает ненужным дополнительное распределение задач для [Участника управления затратами](/azure/role-based-access-control/built-in-roles#cost-management-contributor).

<!-- cSpell:ignore automations -->

- [Cloud Center](../../organize/cloud-center-of-excellence.md). Ответственность за управление затратами, связанными с общими службами, требует доступа с ролью "Участник управления затратами" на уровне подписки. Также, этой группе может потребоваться доступ с ролью "Участник управления затратами" к группам ресурсов или подпискам, содержащим активы, развернутые инструментами автоматизации CCoE, чтобы распознавать, как эти инструменты влияют на затраты.

  - **Общие службы.** При использовании облачного центра, рекомендуемый подход, предполагает, что активы, управляемые Ккое, поддерживаются из централизованной подписки на общую службу в центральном и периферийном моделях. В данном сценарии CCoE, вероятно, имеет к этой подписке доступ "Участник" или "Владелец", что делает дополнительное назначение для области роли [Участник управления затратами](/azure/role-based-access-control/built-in-roles#cost-management-contributor) ненужным.
  - **Автоматизация и элементы управления Ккое.** CCoE обычно предоставляет элементы управления и сценарии автоматизированного развертывания командам внедрения облачных технологий. CCoE несет ответственность за распознавание влияния этих ускорителей на затраты. Чтобы получить такую видимость, команде нужен доступ [Участник управления затратами](/azure/role-based-access-control/built-in-roles#cost-management-contributor) к любым группам ресурсов или подпискам, на которых запущены эти ускорители.

- **Группа облачных операций.** Ответственность за управление текущими затратами на производственную среду требует доступа "Участник управления затратами" ко всем производственным подпискам.

  - Общая рекомендация помещает производственные и непроизводственные активы в отдельные подписки, управляемые узлами иерархии групп управления, связанной с рабочими средами. В эффективно управляемой среде члены команды по операциям, вероятно, уже имеют доступ "Владелец" или "Участник" к производственным подпискам, что делает роль [Участник управления затратами](/azure/role-based-access-control/built-in-roles#cost-management-contributor) ненужной.

## <a name="additional-cost-management-resources"></a>Дополнительные ресурсы для управления затратами

Служба "Управление затратами Azure" и "выставление счетов" — это хорошо документированное средство для настройки бюджетов и получения информации о затратах на облако для Azure или AWS. После того, как вы установите доступ к эффективно управляемой иерархии среды, следующие статьи помогут вам использовать этот инструмент, чтобы отслеживать и контролировать затраты.

### <a name="get-started-with-azure-cost-management-and-billing"></a>Приступая к работе со службой управления затратами Azure и выставлением счетов

Чтобы приступить к использованию службы управления затратами Azure и выставления счетов, см. статью [Оптимизация инвестиций в облако с помощью службы управления затратами Azure и выставления счетов](/azure/cost-management-billing/costs/cost-mgt-best-practices?bc=%2fazure%2fcloud-adoption-framework%2f_bread%2ftoc.json&toc=%2fazure%2fcloud-adoption-framework%2ftoc.json).

### <a name="use-azure-cost-management-and-billing"></a>Использование службы управления затратами Azure и выставления счетов

- [Создание бюджетов и управление ими](/azure/cost-management-billing/costs/tutorial-acm-create-budgets)
- [Экспорт данных о затратах](/azure/cost-management-billing/costs/tutorial-export-acm-data)
- [Оптимизация затрат на основе рекомендаций](/azure/cost-management-billing/costs/tutorial-acm-opt-recommendations)
- [Использование оповещения о затратах для отслеживания потребления и расходов](/azure/cost-management-billing/costs/cost-mgt-alerts-monitor-usage-spending)

<!-- docsTest: "AWS Cost and Usage" -->

### <a name="use-azure-cost-management-and-billing-to-govern-aws-costs"></a>Использование службы "Управление затратами Azure" и выставления счетов для управления AWS затратами

- [Настройка интеграции отчетов о затратах и использовании AWS](/azure/cost-management-billing/costs/aws-integration-set-up-configure)
- [Управление затратами AWS](/azure/cost-management/aws-integration-manage)

### <a name="establish-access-roles-and-scope"></a>Установка доступа, ролей и областей

- [Сведения об области управления затратами](/azure/cost-management/understand-work-scopes)
- [Настройка области для группы ресурсов](/azure/role-based-access-control/quickstart-assign-role-user-portal)
