---
title: Масштабирование с помощью подписок Azure
description: Используйте инфраструктуру внедрения в облаке для Azure, чтобы научиться разрабатывать стратегию масштабирования с помощью нескольких подписок Azure.
author: alexbuckgit
ms.author: abuck
ms.date: 05/20/2019
ms.topic: guide
ms.service: cloud-adoption-framework
ms.subservice: ready
ms.openlocfilehash: b734446a4bac7d8db12119b2248aece9a3377d37
ms.sourcegitcommit: d660484d534bc61fc60470373f3fcc885a358219
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/18/2020
ms.locfileid: "79508395"
---
# <a name="scale-with-multiple-azure-subscriptions"></a>Масштабирование с помощью нескольких подписок Azure

Организациям обычно требуется несколько подписок Azure в результате ограничений ресурсов и других рекомендаций по управлению. Важно определить стратегию масштабирования подписок.

## <a name="production-and-nonproduction-workloads"></a>Производственные и непроизводственные рабочие нагрузки

При развертывании первой рабочей рабочей нагрузки в Azure следует начинать с двух подписок: одной для рабочей среды и другой для непроизводственной среды (разработки и тестирования).

![Базовая модель подписки, показывающая ключи рядом с полями "производство" и "непроизводство"](../../_images/ready/initial-subscription-model.png)

Этот подход рекомендуется по нескольким причинам:

- В Azure предусмотрены специальные предложения по подписке для рабочих нагрузок разработки и тестирования. В этих предложениях предлагаются скидки на службы и лицензии Azure.
- Рабочие и непроизводственные среды, скорее всего, будут иметь разные наборы политик Azure. Использование отдельных подписок упрощает применение каждого набора индивидуальных политик на уровне подписки.
- Для тестирования могут потребоваться определенные типы ресурсов Azure в подписке для разработки и тестирования. С помощью отдельной подписки можно использовать эти типы ресурсов, не делая их доступными в рабочей среде.
- Подписки для разработки и тестирования можно использовать в качестве изолированных сред. Такие изолированные среды позволяют администраторам и разработчикам быстро создавать и разделять целые наборы ресурсов Azure. Такая изоляция также может помочь в защите данных и в вопросах безопасности.
- Допустимые пороговые значения затрат, скорее всего, будут зависеть от подписки на разработку и тестирование.

## <a name="other-reasons-for-multiple-subscriptions"></a>Другие причины для нескольких подписок

В других ситуациях могут потребоваться дополнительные подписки. При расширении облачной области необходимо учитывать следующее.

- Подписки имеют разные ограничения для разных типов ресурсов. Например, количество виртуальных сетей в подписке ограничено. Когда подписка приближается к какому-либо из своих ограничений, необходимо создать другую подписку и разместить в ней новые ресурсы.

  Дополнительные сведения см. в статье [Подписка Azure, границы, квоты и ограничения службы](https://docs.microsoft.com/azure/azure-subscription-service-limits).

- Каждая подписка может реализовывать собственные политики для развертываемых типов ресурсов и поддерживаемых регионов.

- Подписки в регионах общедоступного облака и облачных регионов независимых или государственных организаций имеют разные ограничения. Они часто обусловлены различными уровнями классификации данных между средами.

- При полном разделении различных групп пользователей по соображениям безопасности или соответствия требованиям, могут потребоваться отдельные подписки. Например, организациям национального правительства может потребоваться ограничить доступ подписки только к гражданам.

- Различные подписки могут иметь различные типы предложений, каждый из которых имеет свои собственные условия и преимущества.

- Между владельцами подписки и владельцем развертываемых ресурсов могут существовать проблемы доверия. Использование другой подписки с другим владельцем может устранить эти проблемы, однако в одном из них также должны учитываться проблемы с сетью и защитой данных, которые будут возникать в этом развертывании.

- Для жестких финансовых или геополитических элементов управления может потребоваться отдельное финансовое упорядочение для конкретных подписок. Эти проблемы могут включать в себя вопросы, связанные с независимостиами данных, компаниями с несколькими дочерними компаниями, а также отделением учета и выставления счетов за подразделения в разных странах и разных валютах.

- Ресурсы Azure, созданные с помощью классической модели развертывания, должны быть изолированы в собственной подписке. Безопасность классических ресурсов отличается от безопасности ресурсов, развернутых с помощью Azure Resource Manager. Политики Azure нельзя применять к классическим ресурсам.

- Администраторы служб, использующие классические ресурсы, имеют те же разрешения, что и владельцы подписки на управление доступом на основе ролей (RBAC). К подпискам, в которых смешиваются классические ресурсы и ресурсы диспетчер ресурсов, трудно ограничить доступ администраторов служб.

Также можно создать дополнительные подписки по другим деловым или техническим причинам, характерным для вашей организации. Для входящего и исходящего трафика между подписками могут потребоваться дополнительные затраты.

Можно перемещать различные типы ресурсов из одной подписки в другую или использовать автоматическое развертывание для переноса ресурсов в другую подписку. Дополнительные сведения см. в статье [Перемещение ресурсов Azure в другую группу ресурсов или подписку](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-move-resources).

## <a name="manage-multiple-subscriptions"></a>Управление несколькими подписками

Если у вас только несколько подписок, управлять ими независимо достаточно просто. Но если у вас много подписок, создайте иерархию групп управления, чтобы упростить управление подписками и ресурсами.

Группы управления обеспечивают эффективное управление доступом, политиками и соответствием для подписок организации. Каждая группа управления является контейнером для одной или нескольких подписок.

Группы управления упорядочены в одной иерархии. Эта иерархия определяется в клиенте Azure Active Directory (Azure AD) в соответствии со структурой и потребностями вашей организации. Верхний уровень называется *корневой группой управления*. В иерархии можно определить до шести уровней групп управления. Каждая подписка содержится только в одной группе управления.

В Azure предоставляются четыре уровня области управления: группы управления, подписки, группы ресурсов и ресурсы. Любой доступ или политика, примененные на одном уровне иерархии, наследуются уровнями ниже. Владелец ресурса или владелец подписки не могут изменить унаследованную политику. Это ограничение помогает улучшить управление.

> [!NOTE]
> Обратите внимание, что наследование тегов в настоящее время не поддерживается, но скоро будет доступно.

Опираясь на эту модель наследования, можно расположить подписки в своей иерархии так, чтобы каждая подписка следовала соответствующим политикам и элементам управления безопасностью.

![Четыре уровня области для организации ресурсов Azure](../../ready/azure-setup-guide/media/organize-resources/scope-levels.png)

Любое назначение доступа или политики в корневой группе управления применяется ко всем ресурсам в каталоге. Тщательно продумайте, какие элементы определяются в этой области. Включите только те назначения, которые необходимы.

При определении иерархии группы управления сначала необходимо создать корневую группу управления. Затем все существующие подписки в каталоге перемещаются в корневую группу управления. Новые подписки всегда создаются в корневой группе управления. Позднее их можно переместить в другую группу управления.

При перемещении подписки в существующую группу управления она наследует политики и назначения ролей из иерархии группы управления над ней. После установления нескольких подписок для рабочих нагрузок Azure следует создать дополнительные подписки, которые будут содержать службы Azure, общие для других подписок.

![Пример иерархии группы управления](../../_images/ready/management-group-hierarchy-v2.png)

Дополнительные сведения см. в разделе [Организация ваших ресурсов с группами управления Azure](https://docs.microsoft.com/azure/governance/management-groups).

## <a name="tips-for-creating-new-subscriptions"></a>Советы по созданию новых подписок

- Определите, кто будет отвечать за создание новых подписок.
- Решите, какие ресурсы будут в подписке по умолчанию.
- Определите, как должны выглядеть все стандартные подписки. Соображения включают в себя доступ RBAC, политики, теги и ресурсы инфраструктуры.
- Если возможно, [используйте субъект-службу](https://docs.microsoft.com/azure/azure-resource-manager/grant-access-to-create-subscription) для создания новых подписок. Определите группу безопасности, которая может запрашивать новые подписки с помощью автоматического рабочего процесса.
- Если вы являетесь клиентом Соглашения Enterprise (EA), обратитесь в службу поддержки Azure, чтобы заблокировать создание подписок, отличных от EA, для вашей организации.

## <a name="related-resources"></a>Связанные ресурсы

- [Основные понятия Azure.](../considerations/fundamental-concepts.md)
- [Организация ресурсов с помощью групп управления Azure.](https://docs.microsoft.com/azure/governance/management-groups)
- [Расширьте доступ для управления всеми подписками Azure и группами управления](https://docs.microsoft.com/azure/role-based-access-control/elevate-access-global-admin).
- [Переместите ресурсы Azure в другую группу ресурсов или подписку](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-move-resources).

## <a name="next-steps"></a>Дальнейшие действия

Ознакомьтесь [с рекомендуемыми соглашениями об именовании и добавлении тегов](./naming-and-tagging.md), которые следует соблюдать при развертывании ресурсов Azure.

> [!div class="nextstepaction"]
> [Рекомендации по именованию и добавлению тегов](./naming-and-tagging.md)
