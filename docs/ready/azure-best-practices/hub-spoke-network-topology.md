---
title: Звездообразная топология сети
description: Узнайте о топологиях центральных и периферийных сетей для более эффективного управления общими требованиями к взаимодействию или безопасности.
author: tracsman
ms.author: jonor
ms.date: 05/10/2019
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
manager: rossort
ms.custom: virtual-network
ms.openlocfilehash: 68f97138d3b2d6416b5718cbc611135bf9870335
ms.sourcegitcommit: bcc73d194c6d00c16ae2e3c7fb2453ac7dbf2526
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/09/2020
ms.locfileid: "86195179"
---
<!-- cSpell:ignore tracsman jonor rossort NVAs -->

# <a name="hub-and-spoke-network-topology"></a>Звездообразная топология сети

_Звездообразная топология_ — это сетевая модель для более эффективного управления общими требованиями к обмену данными или обеспечению безопасности. Она также позволяет избежать ограничений подписки Azure. В этой модели уделяется особое внимание следующим вопросам.

- **Сокращение затрат и повышения эффективности управления.** Централизация служб, которые могут совместно использоваться несколькими рабочими нагрузками, такими как сетевые виртуальные модули (NVA) и DNS-серверы, в одном расположении, что позволяет ИТ-отделу минимизировать избыток ресурсов и усилия по управлению.
- **Лимиты подписки превышены.** Большим рабочим нагрузкам может потребоваться больше ресурсов, чем разрешено в рамках одной подписки Azure Пиринг рабочей нагрузки виртуальных сетей из различных подписок в центральный концентратор может преодолеть эти ограничения. Дополнительные сведения см. в статье [ограничения подписки Azure](https://docs.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits).
- **Разделение проблем.** Вы можете развертывать отдельные рабочие нагрузки между центральными группами ИТ и группами рабочей нагрузки.

Небольшие облачные инфраструктуры могут не воспользоваться преимуществами дополнительной структуры и возможностями, которые предлагает эта модель. Но при больших усилиях по внедрению в облако следует рассмотреть возможность реализации архитектуры концентратора и периферийной сети, если у них есть какие-либо проблемы, перечисленные выше.

> [!NOTE]
> На сайте эталонные архитектуры Azure содержатся примеры шаблонов, которые можно использовать в качестве базиса для реализации собственных сетей HUB и периферийных служб.
>
> - [Реализация топологии концентратора и периферийной сети в Azure](https://docs.microsoft.com/azure/architecture/reference-architectures/hybrid-networking/hub-spoke)
> - [Реализация топологии сети HUB и периферийных серверов с помощью общих служб в Azure](https://docs.microsoft.com/azure/architecture/reference-architectures/hybrid-networking/shared-services)

## <a name="overview"></a>Общие сведения

![Примеры топологии сети концентратора и звезды](../../_images/azure-best-practices/network-hub-spoke-high-level.png)

Как показано на схеме, Azure поддерживает два типа центрально-лучевой конструкции. Она поддерживает взаимодействие, общие ресурсы и централизованную политику безопасности (помеченную как `VNet hub` схема), а также схему, основанную на виртуальной глобальной сети Azure (помеченную как `Virtual WAN` на схеме) для крупномасштабных взаимодействий между ветвями и ветвями и Azure.

Центральная зона (концентратор) контролирует и проверяет входящий и исходящий трафик между зонами, включая Интернет, а также локальные периферийные зоны. Топология "звезда" предоставляет ИТ-отделу эффективный способ принудительного применения политик безопасности в центральном расположении. одновременно минимизируя уязвимости и ошибки в конфигурации.

В концентраторе часто содержатся общие компоненты службы, используемые периферийными зонами. Их примеры представлены ниже.

- Инфраструктура Active Directory Windows Server, необходимая для проверки подлинности пользователей третьими сторонами, которые получают доступ из ненадежных сетей, прежде чем они получат доступ к рабочим нагрузкам в периферийной зоне. Сюда входят связанные службы федерации Active Directory (AD FS).
- Служба DNS для разрешения имен рабочих нагрузок в периферийных зонах и получения доступа к ресурсам локально и в Интернете, если [Azure DNS](https://docs.microsoft.com/azure/dns/dns-overview) не используется.
- Инфраструктура открытых ключей (PKI) для реализации единого входа в рабочие нагрузки.
- Управление TCP- и UDP-трафиком между зонами периферийными зонами и Интернетом.
- Управление потоком между периферийными зонами и локальными ресурсами.
- Управление потоком между несколькими периферийными зонами (при необходимости).

Вы можете минимизировать избыточность, упростить управление и снизить общую стоимость, используя общую инфраструктуру концентратора для поддержки нескольких периферийных зон.

Роль каждой периферийной зоны может заключаться в размещении различных типов рабочих нагрузок. Использование периферийных зон также позволяют реализовать модульный подход для повторяемых развертываний одних и тех же рабочих нагрузок Примерами являются разработка и тестирование, приемочное тестирование пользователей, промежуточное и рабочее.

Также эти зоны можно использовать для разделения и включения различных групп в пределах организации, например, групп DevOps в Azure. В пределах периферийной зоны можно развернуть базовую рабочую нагрузку или сложные многоуровневые рабочие нагрузки с управлением трафиком между уровнями.

## <a name="subscription-limits-and-multiple-hubs"></a>Ограничения подписки и несколько центральных зон

В Azure каждый компонент (независимо от типа) развертывается в подписке Azure. Изоляция компонентов Azure в разных подписках Azure позволяет выполнять требования различных бизнес-приложений, например настройку дифференцированных уровней доступа и авторизации.

Одна из основных и периферийных реализаций может масштабироваться до большого количества периферийных серверов. Но, как и в случае с любой ИТ-системой, у этой платформы есть свои ограничения. Развертывание концентратора привязано к определенной подписке Azure, которая имеет ограничения, Одним из примеров может быть максимальное число пиринга виртуальных сетей. Дополнительные сведения см. в статье [Подписка Azure и ограничения службы](https://docs.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits).

В случаях, когда ограничения становятся проблемой, архитектуру можно далее масштабировать, расширяя отдельную звездообразную модель до звездообразного кластера. Вы можете соединить несколько концентраторов в одном или нескольких регионах Azure с помощью пиринга виртуальных сетей, Azure ExpressRoute, виртуальной глобальной сети Azure или VPN типа "сеть — сеть".

![Кластер концентраторов и периферийных зон](../../_images/azure-best-practices/network-hub-spokes-cluster.png)

Включение нескольких концентраторов приводит к увеличению затрат и накладных расходов на управление. Это может быть оправдано только требованиями масштабируемости (в соответствии с системными ограничениями или избыточностью) и региональной репликации (для обеспечения производительности или аварийного восстановления). В сценариях, требующих несколько концентраторов, все концентраторы должны обеспечивать один набор служб для упрощения выполнения операций.

## <a name="interconnection-between-spokes"></a>Взаимодействие между периферийными зонами

В пределах отдельной периферийной зоны можно реализовать сложные многоуровневые рабочие нагрузки. Вы можете реализовать многоуровневые конфигурации, используя подсети (по одной для каждого уровня) в одной виртуальной сети, а также используя группы безопасности сети для фильтрации потоков.

Архитектор может развернуть многоуровневую рабочую нагрузку в пределах нескольких виртуальных сетей. Используя пиринг между виртуальными сетями, периферийные зоны могут подключаться к другим периферийным зонам в пределах одного или нескольких концентраторов.

Типичным примером такого сценария является случай, когда серверы обработки приложения располагаются в одной периферийной зоне или виртуальной сети, а база данных развернута в другой периферийной зоне или виртуальной сети. В этом случае периферийные зоны могут легко обмениваться данными через пиринговые виртуальные сети, не используя при этом концентратор. Решение состоит в том, чтобы выполнить тщательную проверку архитектуры и безопасности, чтобы обход концентратора не обходит важные точки безопасности или аудита, которые могут существовать только в концентраторе.

![Периферийные зоны, соединяющиеся друг с другом и с концентратором](../../_images/azure-best-practices/network-spoke-to-spoke.png)

Периферийные зоны могут также взаимодействовать с периферийной зоной, выполняющей функции концентратора. Такой подход создает двухуровневую иерархию: периферийная зона высокого уровня (уровень 0) становится концентратором подчиненных периферийных зон (уровень 1) иерархии. Периферийные серверы, связанные с основной и резервной реализацией, необходимы для пересылки трафика в Центральный концентратор, чтобы трафик мог пересылаться в место назначения в локальной сети или в общедоступном Интернете. Архитектура с двумя уровнями концентраторов представляет сложную маршрутизацию, которая устраняет преимущества простой связи HUB и звезды.
