---
title: Проверьте параметры сети
description: Используйте платформу внедрения облачных технологий для Azure, чтобы узнать, как выработать сетевые возможности, необходимые вашей целевой зоне для поддержки рабочих нагрузок Azure.
author: BrianBlanchard
ms.author: brblanch
ms.date: 05/15/2019
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
ms.openlocfilehash: bc14bb03f048ab335cd836c6a4a520b8df0ccad8
ms.sourcegitcommit: 7d3fc1e407cd18c4fc7c4964a77885907a9b85c0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "80997980"
---
<!-- cSpell:ignore paas NVAs VPNs -->

# <a name="review-your-network-options"></a>Проверьте параметры сети

Проектирование и реализация сетевых возможностей в Azure является критической частью трудозатрат по перемещению в облако. Для правильной поддержки рабочих нагрузок и служб, которые будут размещены в облаке, необходимо принять определенные решения по проектированию сети. Сетевые продукты и службы Azure поддерживают широкий спектр сетевых возможностей. Структура этих служб и выбор сетевой архитектуры зависят от требований к рабочей нагрузке, системе управления и возможностям подключения в вашей организации.

## <a name="identify-workload-networking-requirements"></a>Определение требований к рабочей нагрузке в сети

В ходе оценки и подготовки зоны размещения необходимо определить сетевые возможности, которые должна поддерживать зона размещения. Этот процесс предусматривает оценку каждого приложения и службы, которые формируют рабочую нагрузку, чтобы определить их требования к управлению подключением к сети. После определения и документирования требований вы можете создать политики для зоны размещения, чтобы контролировать разрешенные сетевые ресурсы и конфигурации, основываясь на потребностях рабочей нагрузки.

Для каждого приложения или службы, которые вы будете развертывать в среде зоны размещения, используйте следующее дерево принятия решений в качестве отправной точки, чтобы определить сетевые инструменты или службы, которые нужно использовать.

![Дерево принятия решений для служб в сети Azure](../../_images/ready/network-decision-tree.png)

### <a name="key-questions"></a>Основные вопросы

Ответьте на следующие вопросы о рабочих нагрузках, которые помогут вам принять решение на основе дерева принятия решений для служб в сети Azure.

- **Требуется ли для рабочих нагрузок виртуальная сеть?** Типы ресурсов "управляемая платформа как услуга" (PaaS) используют базовые сетевые возможности платформы, которым не всегда требуется виртуальная сеть. Если рабочая нагрузка не требует расширенных функций сети и вам не нужно развертывать инфраструктуру как услуги (IaaS), стандартные [ встроенные возможности сети, предоставляемые ресурсами PaaS ](../../decision-guides/software-defined-network/paas-only.md), могут соответствовать вашим требованиям к подключению рабочей нагрузки и управлению трафиком.
- **Требуется ли для рабочих нагрузок подключение между виртуальными сетями и вашим локальным центром обработки данных?** Azure предоставляет два решения для установки гибридных сетевых возможностей: VPN-шлюза Azure и Azure ExpressRoute. [VPN-шлюз Azure](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways) соединяет локальные сети с Azure через VPN типа "сеть — сеть" почти так же, как это делается при настройке и подключении к удаленному филиалу. Максимальная пропускная способность VPN-шлюза составляет 10 Гбит/с. [Azure ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-introduction) обеспечивает более высокую надежность и меньшую задержку благодаря использованию частного соединения между Azure и локальной инфраструктурой. Параметры пропускной способности для ExpressRoute в диапазоне от 50 Мбит/с до 100 Гбит/с.
- **Нужно ли проверять исходящий трафик и выполнять его аудит с помощью локальных сетевых устройств?** Для облачных рабочих нагрузок можно использовать [Брандмауэр Azure](https://docs.microsoft.com/azure/firewall/overview) или размещенные в облаке сторонние [виртуальные сетевые модули](https://azure.microsoft.com/solutions/network-appliances) для проверки и аудита трафика, поступающего в Интернет или из него. Однако многие политики корпоративной ИТ-безопасности требуют, чтобы исходящий интернет-трафик проходил через централизованно управляемые устройства в локальной среде организации. [Принудительное туннелирование](https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview) поддерживает эти сценарии. Не все управляемые службы поддерживают принудительное туннелирование. Службы и функции, такие как [App Service Environment in Azure App Service](https://docs.microsoft.com/azure/app-service/environment/intro) (Среда службы приложений в Службе приложений Azure), [Управление API Azure](https://docs.microsoft.com/azure/api-management/api-management-key-concepts), [Azure Kubernetes Service (AKS)](https://docs.microsoft.com/azure/aks/intro-kubernetes) (Служба Azure Kubernetes), [Managed Instances in Azure SQL Database](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-index) (Управляемый экземпляр Базы данных SQL Azure), [Azure Databricks](https://docs.microsoft.com/azure/azure-databricks/what-is-azure-databricks) и [Azure HDInsight](https://docs.microsoft.com/azure/hdinsight) поддерживают эту конфигурацию, если служба или функция развернуты в виртуальной сети.
- **Потребуется ли подключить несколько виртуальных сетей?** Вы можете использовать [пиринговую связь между виртуальными сетями](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview), чтобы подключить несколько экземпляров [виртуальной сети Azure](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview). Пиринг может поддерживать соединения между подписками и регионами. Для сценариев, в которых службы предоставляются между несколькими подписками или большим количеством требующих управления пиринговых узлов в сети, рекомендуем внедрить [звездообразную сетевую архитектуру](../../decision-guides/software-defined-network/hub-spoke.md) или использовать [Виртуальную глобальную сеть Azure](https://docs.microsoft.com/azure/virtual-wan/virtual-wan-about). Пиринг виртуальной сети обеспечивает подключение только между двумя одноранговыми сетями. По умолчанию, он не обеспечивает переходное подключение между несколькими одноранговыми сетями.
- **Будут ли рабочие нагрузки доступны через Интернет?** Azure предоставляет службы, которые помогают управлять внешними приложениями и службами и обеспечивать безопасный доступ к ним.
  - [Брандмауэр Azure](https://docs.microsoft.com/azure/firewall/overview)
  - [Устройства сети](https://azure.microsoft.com/solutions/network-appliances)
  - [Azure Front Door Service](https://docs.microsoft.com/azure/frontdoor/front-door-overview)
  - [Шлюз приложений Azure](https://docs.microsoft.com/azure/application-gateway)
  - [Диспетчер трафика Azure](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview)
- **Потребуется ли поддержка настраиваемого управления DNS?** [Azure DNS](https://docs.microsoft.com/azure/dns/dns-overview) — это служба размещения для доменов DNS. Azure DNS обеспечивает разрешение имен с помощью инфраструктуры Azure. Если для ваших рабочих нагрузок требует разрешение имен, которое выходит за рамки возможностей, предоставленных Azure DNS, может понадобиться развернуть дополнительные решения. Если для ваших рабочих нагрузок также требуются службы Active Directory, рекомендуем использовать [Доменные службы Azure Active Directory](https://docs.microsoft.com/azure/active-directory-domain-services/overview), чтобы расширить возможности Azure DNS. Чтобы получить дополнительные возможности, вы также можете [развертывать настаиваемые виртуальные машины IaaS](https://docs.microsoft.com/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances) для поддержки своих требований.

## <a name="common-networking-scenarios"></a>Распространенные сетевые сценарии

Сетевые решения Azure предусматривают множество продуктов и услуг, предоставляющих различные сетевые возможности. В рамках процесса проектирования сети вы можете сравнить требования рабочей нагрузки с сетевыми сценариями в таблице ниже, чтобы определить инструменты или службы Azure, которые можно использовать для предоставления этих сетевых возможностей.

<!-- markdownlint-disable MD033 -->

| **Сценарий** | **Сетевой продукт или служба** |
| --- | --- |
| Мне необходима сетевая инфраструктура для подключения всего, от виртуальных машин до входящих VPN соединений. | [Виртуальная сеть Azure](https://docs.microsoft.com/azure/virtual-network) |
| Мне нужно сбалансировать входящие и исходящие подключения и запросы к приложениям или службам. | [Подсистема балансировки нагрузки Azure](https://docs.microsoft.com/azure/load-balancer) |
| Мне нужно оптимизировать доставку из ферм серверов приложений, при этом повысив безопасность приложений с помощью брандмауэра веб-приложения. | [Шлюз приложений Azure](https://docs.microsoft.com/azure/application-gateway) <br/>[Azure Front Door Service](https://docs.microsoft.com/azure/frontdoor) |
| Мне нужно безопасно использовать Интернет для доступа к Виртуальной сети Azure через высокопроизводительные VPN-шлюзы. | [VPN-шлюз Azure](https://docs.microsoft.com/azure/vpn-gateway) |
| Мне нужно обеспечить сверхбыстрые DNS-ответы и сверхвысокую доступность для всех потребностей домена. | [Azure DNS](https://docs.microsoft.com/azure/dns) |
| Мне нужно ускорить доставку содержимого, передаваемого по каналам с высокой пропускной способностью, — от приложений и сохраненного содержимого до потокового видео — клиентам со всего мира. | [Сеть доставки содержимого Azure](https://docs.microsoft.com/azure/cdn) |
| Мне нужно защитить приложения Azure от DDoS-атак. | [Защита от атак DDoS Azure](https://docs.microsoft.com/azure/virtual-network/ddos-protection-overview) |
| Мне нужно оптимально распределять трафик между службами в регионах Azure по всему миру, обеспечивая при этом высокую доступность и быстроту отклика. | [Диспетчер трафика Azure](https://docs.microsoft.com/azure/traffic-manager)<br/>[Azure Front Door Service](https://docs.microsoft.com/azure/frontdoor) |
| Мне нужна возможность добавления частных сетевых подключений для доступа к облачным службам Майкрософт из корпоративных сетей, как если бы они находились в моем центре обработки данных. | [Azure ExpressRoute](https://docs.microsoft.com/azure/expressroute) |
| Мне нужно отслеживать и диагностировать условия на уровне сетевого сценария. | [Наблюдатель за сетями Azure](https://docs.microsoft.com/azure/network-watcher) |
| Мне нужны возможности собственного брандмауэра со встроенной высокой доступностью, неограниченной масштабируемостью облака и отсутствием обслуживания. | [Брандмауэр Azure](https://docs.microsoft.com/azure/firewall) |
| Мне нужно безопасно подключить бизнес-офисы, розничные отделения и сайты. | [Виртуальная глобальная сеть Azure](https://docs.microsoft.com/azure/virtual-wan) |
| Мне нужна масштабируемая точка доставки с повышенным уровнем безопасности для глобальных веб-приложений на базе микрослужб. | [Azure Front Door Service](https://docs.microsoft.com/azure/frontdoor) |

<!-- markdownlint-enable MD033 -->

## <a name="choose-a-networking-architecture"></a>Выбор сетевой архитектуры

После определения сетевых служб Azure, необходимых для поддержки рабочих нагрузок, также необходимо спроектировать архитектуру, которая объединит эти службы, чтобы предоставить облачную сетевую инфраструктуру в зоне размещения. [Руководство по принятию решений о программно-конфигурируемой сети](../../decision-guides/software-defined-network/index.md) для Cloud Adoption Framework содержит сведения о некоторых наиболее распространенных шаблонах сетевой архитектуры, используемых в Azure.

В таблице ниже приведены основные сценарии, которые поддерживают эти шаблоны.

| **Сценарий**                                                                                                                                                                                                                                                                                                                        | **Рекомендуемая архитектура сети**                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|
| Все рабочие нагрузки, размещенные в Azure, развернутые в целевой зоне, полностью основаны на PaaS, не нуждаются в виртуальной сети и не являются частью усилий по внедрению облака, которые включают ресурсы IaaS.                                                                                                                        | [Только PaaS](../../decision-guides/software-defined-network/paas-only.md)            |
| Рабочие нагрузки, размещенные в Azure, развернут ресурсы на основе IaaS, как виртуальные машины, или потребуют наличия виртуальной сети, но не подключения к локальной среде.                                                                                                                                          | [Машинный код в облаке](../../decision-guides/software-defined-network/cloud-native.md)      |
| Рабочие нагрузки, размещенные в Azure, требуют ограниченного доступа к локальным ресурсам, но облачные подключения следует считать ненадежными.                                                                                                                                                                                           | [Облачная сеть периметра](../../decision-guides/software-defined-network/cloud-dmz.md)            |
| Рабочие нагрузки, размещенные в Azure, требуют ограниченного доступа к локальным ресурсам, и вы планируете внедрить современные политики безопасности и безопасное подключение между облачной и локальной средами.                                                                                                                         | [Гибридная среда](../../decision-guides/software-defined-network/hybrid.md)                  |
| Необходимо развернуть и управлять большим количеством виртуальных машин и рабочих нагрузок, потенциально превышающих [ограничения подписки Azure](https://docs.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits), совместно использовать службы между подписками или использовать более сегментированную структуру для разделения ролей, приложений или разрешений. | [Звездообразная модель](../../decision-guides/software-defined-network/hub-spoke.md)        |
| Имеется множество филиалов, которым необходимо подключаться друг к другу и к Azure.                                                                                                                                                                                                                                                       | [Виртуальная глобальная сеть Azure](https://docs.microsoft.com/azure/virtual-wan/virtual-wan-about) |

### <a name="azure-virtual-datacenter"></a>Виртуальный центр обработки данных Azure

Кроме того, используя один из этих шаблонов архитектуры, если корпоративная ИТ-команда управляет большими облачными средами, см. [руководство по виртуальному центру обработки данных Azure](../../reference/vdc.md) во время разработки облачной инфраструктуры на базе Azure. Виртуальный центр обработки данных Azure обеспечивает единый подход к сетям, безопасности, управлению и инфраструктуре, если организация отвечает следующим критериям.

- Предприятие должно соблюдать нормативные требования, что требует возможностей централизованного наблюдения и проведения аудита.
- Облачная инфраструктура будет состоять из более чем 10 000 виртуальных машин IaaS или служб PaaS эквивалентного масштаба.
- Необходимо включить возможности гибкого развертывания рабочих нагрузок для поддержки команд разработчиков и операционных команд, соблюдая при этом общую политику, соответствие нормативным требованиям управления и централизованный контроль ИТ над базовыми службами.
- Ваша отрасль зависит от сложной платформы, которая требует глубоких экспертных знаний в какой-либо области (например, финансовая деятельность, нефтяная и газовая отрасль, производство).
- Существующие политики управления ИТ требуют более строгого соответствия с существующими функциями, даже на ранней стадии внедрения.

## <a name="follow-azure-networking-best-practices"></a>Следуйте лучшим методикам реализации сети Azure

В процессе проектирования сети ознакомьтесь с этими статьями.

- [Планирование виртуальной сети](https://docs.microsoft.com/azure/virtual-network/virtual-network-vnet-plan-design-arm?toc=https://docs.microsoft.com/azure/cloud-adoption-framework/toc.json&bc=https://docs.microsoft.com/azure/cloud-adoption-framework/_bread/toc.json). Узнайте, как планировать виртуальные сети на основе требований к изоляции, подключению и расположению.
- [Рекомендации Azure по обеспечению сетевой безопасности](https://docs.microsoft.com/azure/security/fundamentals/network-best-practices?toc=https://docs.microsoft.com/azure/cloud-adoption-framework/toc.json&bc=https://docs.microsoft.com/azure/cloud-adoption-framework/_bread/toc.json). Узнайте о рекомендациях Azure, которые могут помочь вам повысить безопасность сети.
- [Рекомендации для работы в сети при переносе рабочих нагрузок в Azure](https://docs.microsoft.com/azure/migrate/migrate-best-practices-networking?toc=https://docs.microsoft.com/azure/cloud-adoption-framework/toc.json&bc=https://docs.microsoft.com/azure/cloud-adoption-framework/_bread/toc.json). Получите дополнительные рекомендации о внедрении сети Azure для поддержки рабочих нагрузок на основе IaaS и PaaS.
