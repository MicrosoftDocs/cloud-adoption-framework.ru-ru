---
title: Разработка системы управления для небольшой рабочей нагрузки
description: Узнайте о процессе проектирования модели управления ресурсами в Azure для поддержки одной команды и простой рабочей нагрузки. 
author: alexbuckgit
ms.author: abuck
ms.date: 09/17/2019
ms.topic: guide
ms.service: cloud-adoption-framework
ms.subservice: govern
ms.custom: governance
ms.openlocfilehash: 868f62856c68c516c384d44cd7fa0e1857ade0e8
ms.sourcegitcommit: af45c1c027d7246d1a6e4ec248406fb9a8752fb5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2020
ms.locfileid: "77709572"
---
# <a name="governance-design-for-a-simple-workload"></a>Разработка системы управления для небольшой рабочей нагрузки

Цель этого руководства — помочь вам ознакомиться с разработкой модели системы управления ресурсами в Azure для отдельной команды и отдельной рабочей нагрузки. Вы рассмотрите набор гипотетических требований к управлению, а затем — несколько примеров реализации, которые отвечают этим требованиям.

Цель базового этапа внедрения заключалась в развертывании простой рабочей нагрузки в Azure. В результате формируются следующие требования:

- Реализация механизма управления удостоверениями одного **владельца рабочей нагрузки**, который отвечает за развертывание и обслуживание простой рабочей нагрузки. Владельцу рабочей нагрузки требуется разрешение на создание, чтение, обновление и удаление ресурсов, а также разрешение на делегирование этих прав другим пользователям в системе управления удостоверениями.
- Реализация механизма управления всеми ресурсами простой рабочей нагрузки как одной единицей.

## <a name="azure-licensing"></a>Лицензирование Azure

Прежде чем перейти к проектированию модели системы управления, важно понять, как лицензируется Azure. Это связано с тем, что учетные записи администратора, связанные с лицензией Azure, имеют самый высокий уровень доступа к ресурсам Azure. Эти учетные записи формируют основу модели системы управления.

> [!NOTE]
> Если организация имеет [Соглашение Microsoft Enterprise](https://www.microsoft.com/licensing/licensing-programs/enterprise.aspx), которое не включает Azure, эту службу можно добавить, приняв на себя предварительные денежные обязательства. Дополнительные сведения см. [в статье Лицензирование Azure для предприятия](https://azure.microsoft.com/pricing/enterprise-agreement).

При включении Azure в Соглашение Enterprise организация получает запрос на создание **учетной записи Azure**. Вместе с учетной записью Azure создается **ее владелец**, а также клиент Azure Active Directory (Azure AD) с учетной записью **глобального администратора**. Клиент Azure AD — это логическая структура, представляющая собой защищенный выделенный экземпляр Azure AD.

![учетной записи Azure с помощью диспетчера учетных записей Azure и глобального администратора Azure AD](../../_images/govern/design/governance-3-0.png)
*рис. 1 — учетная запись Azure с диспетчером учетных записей и глобальным администратором Azure AD.*

## <a name="identity-management"></a>Управление удостоверениями

Azure доверяет аутентификацию пользователей и предоставление им доступа к ресурсам только [Azure AD](https://docs.microsoft.com/azure/active-directory). Поэтому Azure AD — это система управления удостоверениями. Глобальный администратор Azure AD имеет наивысший уровень разрешений и может выполнять все действия, связанные с удостоверениями, в том числе создание пользователей и назначение разрешений.

Одно из требований заключается в реализации механизма управления удостоверениями одного **владельца рабочей нагрузки**, который отвечает за развертывание и обслуживание простой рабочей нагрузки. Владельцу рабочей нагрузки требуется разрешение на создание, чтение, обновление и удаление ресурсов, а также разрешение на делегирование этих прав другим пользователям в системе управления удостоверениями.

Глобальный администратор Azure AD создаст учетную запись **владельца рабочей нагрузки** для владельца рабочей нагрузки:

![глобальный администратор Azure AD создает учетную запись владельца рабочей нагрузки](../../_images/govern/design/governance-1-2.png)
*рис. 2. Глобальный администратор Azure AD создает учетную запись пользователя владельца рабочей нагрузки.*

Разрешения на доступ к ресурсу нельзя присвоить, если этот пользователь не добавлен в **подписку**. Это можно сделать в следующих двух разделах.

## <a name="resource-management-scope"></a>Область управления ресурсами

По мере роста количества развернутых в организации ресурсов растет также и сложность управления ими. Azure реализует логическую иерархию контейнеров. Это позволяет управлять ресурсами организации в группах с различными уровнями детализации, также известными как **области**.

Верхний уровень области управления ресурсами — это **подписка**. Подписку создает **владелец учетной записи** Azure, который берет на себя финансовое обязательство и несет ответственность за оплату всех включенных в эту подписку ресурсов:

![владелец учетной записи Azure создает подписку](../../_images/govern/design/governance-1-3.png)
*рис. 3. Владелец учетной записи Azure создает подписку.*

При создании подписки **владелец учетной записи** Azure связывает с ней клиент Azure AD. С помощью этого клиента выполняется аутентификация и авторизация пользователей:

![владелец учетной записи Azure связывает клиент Azure AD с подпиской](../../_images/govern/design/governance-1-4.png)
*рис. 4. Владелец учетной записи Azure связывает клиент Azure AD с подпиской.*

Как вы могли заметить, сейчас с подпиской не связано ни одного пользователя. Это означает, что ни один пользователь не имеет разрешений на управление ресурсами. На самом деле **владелец учетной записи** также является владельцем подписки и имеет разрешения на выполнение любых действий с ресурсами в подписке. Однако на практике **владелец учетной записи**, скорее всего, связан с финансами и не несет ответственности за создание, чтение, обновление и удаление ресурсов. Эти задачи должен выполнять **владелец рабочей нагрузки**. Таким образом, в подписку нужно добавить **владельца рабочей нагрузки** и назначить ему соответствующие разрешения.

Так как сейчас только **владелец учетной записи** имеет разрешение на добавление **владельца рабочей нагрузки** в подписку, этот пользователь должен **сделать следующее**:

![владелец учетной записи Azure добавляет к подписке * * владельца рабочей нагрузки * *,](../../_images/govern/design/governance-1-5.png)
*рис. 5. Владелец учетной записи Azure добавляет владельца рабочей нагрузки в подписку.*

**Владелец учетной записи** Azure предоставляет разрешения **владельцу рабочей нагрузки**, назначив ему роль [управления доступом на основе ролей (RBAC)](https://docs.microsoft.com/azure/role-based-access-control). Роль RBAC предоставляет набор разрешений, которые **владелец рабочей нагрузки** имеет в отдельном типе ресурса или в их наборе.

Обратите внимание, что в этом примере **владелец учетной записи** присвоил [встроенную роль **владельца**](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#owner):

![для владельца рабочей нагрузки * * назначена встроенная роль владельца](../../_images/govern/design/governance-1-6.png)
*рис. 6. владельцем рабочей нагрузки была назначена роль владельца "встроенный владелец".*

Встроенная роль **владельца** предоставляет все разрешения **владельцу рабочей нагрузки** в области подписки.

> [!IMPORTANT]
> **Владелец учетной записи** Azure несет ответственность за финансовые обязательства, связанные с подпиской, но **Владелец рабочей нагрузки** имеет те же разрешения. **Владелец учетной записи** должен доверять **владельцу рабочей нагрузки** в вопросах развертывания ресурсов, которые находятся в пределах бюджета подписки.

Следующий уровень области управления — это **группа ресурсов**. Группа ресурсов — это логический контейнер ресурсов. Операции, выполняемые на уровне группы, применяются ко всем ресурсам в ней. Кроме того, важно отметить, что каждый пользователь наследует разрешения со следующего более высокого уровня, если эти разрешения явно не изменены в этой области.

Чтобы показать этот процесс, рассмотрим что происходит, когда **владелец рабочей нагрузки** создает группу ресурсов:

![* * владелец рабочей нагрузки * * создает группу ресурсов](../../_images/govern/design/governance-1-7.png)
*рис. 7. Владелец рабочей нагрузки создает группу ресурсов и наследует встроенную роль владельца в области группы ресурсов.*

И опять же, встроенная роль **владельца** предоставляет все разрешения **владельцу рабочей нагрузки** в области группы ресурсов. Как уже говорилось ранее, эта роль наследуется с уровня подписки. Другая роль, назначенная этому пользователю в этой области, применяется только к этой области.

Самый низкий уровень области управления — это **ресурс**. Операции, выполняемые на уровне ресурса, применяются только к самому ресурсу. И снова разрешения на уровне ресурсов наследуются от области группы ресурсов. Например, давайте рассмотрим, что произойдет, если **владелец рабочей нагрузки** развернет [виртуальную сеть](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) в группе ресурсов:

![* * владелец рабочей нагрузки * * создает ресурс](../../_images/govern/design/governance-1-8.png)
*рис. 8. Владелец рабочей нагрузки создает ресурс и наследует встроенную роль владельца в области действия ресурса.*

**Владелец рабочей нагрузки** наследует роль владельца в области ресурса, а это означает, что владелец рабочей нагрузки имеет все разрешения в виртуальной сети.

## <a name="implement-the-basic-resource-access-management-model"></a>Реализация базовой модели управления доступом для ресурсов

Теперь мы реализуем разработанную ранее модель системы управления.

Чтобы начать, организации потребуется учетная запись Azure. Если организация имеет [Соглашение Microsoft Enterprise](https://www.microsoft.com/licensing/licensing-programs/enterprise.aspx), которое не включает Azure, эту службу можно добавить, приняв на себя предварительные денежные обязательства. Дополнительные сведения см. [в статье Лицензирование Azure для предприятия](https://azure.microsoft.com/pricing/enterprise-agreement).

После создания учетной записи Azure необходимо указать сотрудника организации, который станет **ее владельцем**. После этого по умолчанию создается клиент Azure Active Directory (Azure AD). **Владелец учетной записи** Azure должен [создать учетную запись пользователя](https://docs.microsoft.com/azure/active-directory/add-users-azure-active-directory) и предоставить ее сотруднику, который станет **владельцем рабочей нагрузки**.

Далее **владелец учетной записи** Azure должен [создать подписку](https://docs.microsoft.com/partner-center/create-a-new-subscription) и [связать с ней клиент Azure AD](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-how-subscriptions-associated-directory).

Наконец, создав подписку и связав с нею клиент Azure AD, вы можете [добавить в нее **владельца рабочей нагрузки** со встроенной ролью **владельца**](https://docs.microsoft.com/azure/billing/billing-add-change-azure-subscription-administrator#to-assign-a-user-as-an-administrator).

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Развертывание основной рабочей нагрузки в Azure](../../infrastructure/virtual-machines/basic-workload.md)
> [!div class="nextstepaction"]
> [Предоставление доступа к ресурсам для нескольких команд](./governance-multiple-teams.md)
