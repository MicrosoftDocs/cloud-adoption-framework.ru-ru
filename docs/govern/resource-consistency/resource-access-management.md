---
title: Управление доступом к ресурсам в Azure
description: Основные сведения об управлении доступом к ресурсам Azure, такие как Azure Resource Manager, подписки, группы ресурсов и ресурсы.
author: alexbuckgit
ms.author: abuck
ms.date: 09/17/2019
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: govern
ms.custom: governance
ms.openlocfilehash: c4a3c3b7f093f226895bccede7efcfdba94cd002
ms.sourcegitcommit: 71a4f33546443d8c875265ac8fbaf3ab24ae8ab4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/20/2020
ms.locfileid: "86479357"
---
# <a name="resource-access-management-in-azure"></a>Управление доступом к ресурсам в Azure

В этой [методологии](../index.md) описываются пять дисциплин управления облаком, в том числе управление ресурсами. Статья [CAF. Общие сведения о дисциплине "Согласованность ресурсов"](./index.md) объясняет, как управление доступом к ресурсам вписывается в дисциплину управления ресурсами. Прежде чем переходить к изучению принципов проектирования модели системы управления, важно разобраться с элементами управления доступом к ресурсам в Azure. Конфигурация этих элементов управления доступом к ресурсами — это основа модели системы управления.

Давайте рассмотрим принцип развертывания ресурсов в Azure.

## <a name="what-is-an-azure-resource"></a>Что собой представляет ресурс Azure

В Azure _ресурс_ — это сущность под управлением Azure. Например, к ресурсам относятся виртуальные машины, виртуальные сети и учетные записи хранения.

![Схема ресурса ](../../_images/govern/design/governance-1-9.png)
 _рис. 1. ресурс._

## <a name="what-is-an-azure-resource-group"></a>Что такое группа ресурсов Azure?

Каждый ресурс в Azure должен принадлежать [группе ресурсов](https://docs.microsoft.com/azure/azure-resource-manager/management/overview#resource-groups). Группа ресурсов — это просто логическая конструкция, которая группирует несколько ресурсов вместе, чтобы ими можно было управлять как единой сущностью **на основе жизненного цикла и безопасности**. Например, ресурсы с аналогичным жизненным циклом, например ресурсы [n-уровневых приложений](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier), можно создавать или удалять как группу. Другими словами, все, что порождено вместе, управляется вместе и является более устаревшим, объединяется в группе ресурсов.

![Схема группы ресурсов, содержащей ресурс ](../../_images/govern/design/governance-1-10.png)
 _рис. 2. Группа ресурсов содержит ресурс._

Группы и ресурсы в них связаны с подпиской Azure.

## <a name="what-is-an-azure-subscription"></a>Подписка Azure

_Подписка_ Azure аналогична группе ресурсов в том, что это логическая конструкция, объединяющая группы ресурсов и их ресурсы. Подписка Azure также связывается с элементами управления, используемыми Azure Resource Manager. Рассмотрим более подробно Azure Resource Manager, чтобы больше узнать о связи между ним и подпиской Azure.

![Схема подписки Azure ](../../_images/govern/design/governance-1-11.png)
 _рис. 3. Подписка Azure._

## <a name="what-is-azure-resource-manager"></a>Azure Resource Manager

[Как работает Azure?](../../get-started/what-is-azure.md) вы узнали, что Azure включает внешний интерфейс со многими службами, координирующими все функции Azure. К этим службам относится [Azure Resource Manager](https://docs.microsoft.com/azure/azure-resource-manager). В этой службе размещен интерфейс REST API, с помощью которого клиенты управляют ресурсами.

![Схема Azure Resource Manager ](../../_images/govern/design/governance-1-12.png)
 _рис. 4. Azure Resource Manager._

На следующем рисунке показаны три клиента: [PowerShell](https://docs.microsoft.com/powershell/azure/overview), [портал Azure](https://portal.azure.com)и [Azure CLI](https://docs.microsoft.com/cli/azure).

![Схема клиентов Azure, подключающихся к диспетчер ресурсов REST API ](../../_images/govern/design/governance-1-13.png)
 _рис. 5. клиенты Azure подключаются к REST API диспетчер ресурсов._

Хотя эти клиенты подключаются к диспетчер ресурсов с помощью REST API, диспетчер ресурсов не включает функции для непосредственного управления ресурсами. Вместо этого большинство типов ресурсов в Azure имеют собственный [поставщик ресурсов](https://docs.microsoft.com/azure/azure-resource-manager/management/overview#terminology).

![Поставщики ресурсов Azure ](../../_images/govern/design/governance-1-14.png)
 _рис. 6. поставщики ресурсов Azure._

Когда клиент отправляет запрос на управление определенным ресурсом, Azure Resource Manager подключается к поставщику ресурсов этого типа ресурса, чтобы выполнить запрос. Например, если клиент выполняет запрос на управление ресурсом виртуальной машины, Azure Resource Manager подключается к `Microsoft.Compute` поставщику ресурсов.

![Azure Resource Manager подключении к поставщику ресурсов Microsoft. COMPUTE ](../../_images/govern/design/governance-1-15.png)
 _рис. 7. Azure Resource Manager подключается к `Microsoft.Compute` поставщику ресурсов для управления ресурсом, указанным в запросе клиента._

Azure Resource Manager требует, чтобы клиент указал идентификатор подписки и группы ресурсов и тем самым разрешил управлять ресурсами виртуальной машины.

Теперь, когда вы имеете представление о принципе работы Azure Resource Manager, рассмотрим, как используемые этой службой элементы управления связаны с подпиской Azure. Перед выполнением Azure Resource Manager любого запроса на управление ресурсом проверяется набор элементов управления.

Сначала проверяется, выполняется ли запрос проверенным пользователем. Azure Resource Manager имеет отношения доверия с [Azure Active Directory (Azure AD)](https://docs.microsoft.com/azure/active-directory), что позволяет обеспечить механизм удостоверения пользователя.

![Azure Active Directory ](../../_images/govern/design/governance-1-16.png)
 _рис. 8. Azure Active Directory._

В Azure AD данные пользователей сегментируются по клиентам. _Клиент_ — это логическая конструкция, которая представляет защищенный выделенный экземпляр Azure AD, обычно связанный с Организацией. Каждая подписка связана с клиентом Azure AD.

![Клиент Azure AD, связанный с подпиской ](../../_images/govern/design/governance-1-17.png)
 _рис. 9. Клиент Azure AD, связанный с подпиской._

Каждый запрос клиента на управление ресурсом в определенной подписке требует наличия у пользователя учетной записи в связанном клиенте Azure AD.

Следующим проверяется, имеет ли пользователь необходимые права на выполнение запроса. Разрешения присваиваются пользователям с использованием механизма [управления доступом на основе ролей (RBAC)](https://docs.microsoft.com/azure/role-based-access-control).

![Пользователи, назначенные ролям RBAC ](../../_images/govern/design/governance-1-18.png)
 _рис. 10. каждому пользователю в клиенте назначается одна или несколько ролей RBAC._

Роль RBAC указывает набор разрешений, которые пользователь имеет в определенном ресурсе. Эти разрешения применяются после назначения роли пользователю. Например, [Встроенная `owner` роль](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#owner) позволяет пользователю выполнять любые действия с ресурсом.

На следующем этапе проверяется, разрешен ли запрос согласно параметрам, заданным в [политике ресурсов Azure](https://docs.microsoft.com/azure/governance/policy). Политики ресурсов Azure указывают операции, разрешенные в конкретном ресурсе. Например, в соответствии с политикой ресурсов Azure пользователи смогут развертывать только определенные типы виртуальной машины.

![Политика ресурсов Azure ](../../_images/govern/design/governance-1-19.png)
 _рис. 11. Политика ресурсов Azure._

На следующем этапе проверяется, не превышает ли запрос [ограничения подписки Azure](https://docs.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits). Например, каждая подписка может максимально содержать 980 групп ресурсов. Если получен запрос на развертывание дополнительной группы ресурсов по достижении предела, он отклоняется.

![Ограничения ресурсов Azure ](../../_images/govern/design/governance-1-20.png)
 _рис. 12. ограничения ресурсов Azure._

В последнюю очередь проверяется, связан ли запрос в рамках финансовых обязательств с подпиской. Например, если отправляется запрос на развертывание виртуальной машины, Azure Resource Manager проверяет платежную информацию в подписке.

![Финансовые обязательства, связанные с подпиской на ](../../_images/govern/design/governance-1-21.png)
 _рис. 13. финансовое обязательство связано с подпиской._

## <a name="summary"></a>Итоги

Из этой статьи вы узнали об управлении доступом к ресурсам в Azure с помощью Azure Resource Manager.

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы узнали об управлении доступом к ресурсам в Azure, узнайте о том, как разработать модель управления [для простой рабочей нагрузки](./governance-simple-workload.md) или [для нескольких команд](./governance-multiple-teams.md).

> [!div class="nextstepaction"]
> [Общие сведения о системе управления](../index.md)
